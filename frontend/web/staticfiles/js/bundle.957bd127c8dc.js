function _mergeNamespaces(r,e){return e.forEach(function(i){i&&"string"!=typeof i&&!Array.isArray(i)&&Object.keys(i).forEach(function(e){var t;"default"===e||e in r||(t=Object.getOwnPropertyDescriptor(i,e),Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return i[e]}}))})}),Object.freeze(r)}function __awaiter(e,a,s,c){return new(s=s||Promise)(function(i,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?i(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,n)}o((c=c.apply(e,a||[])).next())})}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __asyncValues(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a="function"==typeof __values?__values(a):a[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=a[o]&&function(n){return new Promise(function(e,t){var i,r;n=a[o](n),i=e,e=t,r=n.done,t=n.value,Promise.resolve(t).then(function(e){i({value:e,done:r})},e)})}}}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},loglevel={exports:{}},LogLevel;!function(e){var t,i;t=commonjsGlobal,i=function(){var n=function(){},s="undefined",o=typeof window!==s&&typeof window.navigator!==s&&/Trident\/|MSIE /.test(window.navigator.userAgent),c=["trace","debug","info","warn","error"];function a(t,e){var i=t[e];if("function"==typeof i.bind)return i.bind(t);try{return Function.prototype.bind.call(i,t)}catch(e){return function(){return Function.prototype.apply.apply(i,[t,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(e,t){for(var i=0;i<c.length;i++){var r=c[i];this[r]=i<e?n:this.methodFactory(r,e,t)}this.log=this.debug}function u(e,t,i){return"debug"===(r=e)&&(r="log"),typeof console!==s&&("trace"===r&&o?l:void 0!==console[r]?a(console,r):void 0!==console.log?a(console,"log"):n)||function(e,t,i){return function(){typeof console!==s&&(d.call(this,t,i),this[e].apply(this,arguments))}}.apply(this,arguments);var r}function t(i,t,e){var r,n=this,o=(t=null==t?"WARN":t,"loglevel");function a(){var e;if(typeof window!==s&&o){try{e=window.localStorage[o]}catch(e){}if(typeof e===s)try{var t=window.document.cookie,i=t.indexOf(encodeURIComponent(o)+"=");-1!==i&&(e=/^([^;]+)/.exec(t.slice(i))[1])}catch(e){}return e=void 0===n.levels[e]?void 0:e}}"string"==typeof i?o+=":"+i:"symbol"==typeof i&&(o=void 0),n.name=i,n.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},n.methodFactory=e||u,n.getLevel=function(){return r},n.setLevel=function(e,t){if(!("number"==typeof(e="string"==typeof e&&void 0!==n.levels[e.toUpperCase()]?n.levels[e.toUpperCase()]:e)&&0<=e&&e<=n.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(r=e,!1!==t&&!function(e){if(e=(c[e]||"silent").toUpperCase(),typeof window!==s&&o){try{return window.localStorage[o]=e}catch(e){}try{window.document.cookie=encodeURIComponent(o)+"="+e+";"}catch(e){}}}(e),d.call(n,e,i),typeof console===s&&e<n.levels.SILENT)return"No console available for logging"},n.setDefaultLevel=function(e){t=e,a()||n.setLevel(e,!1)},n.resetLevel=function(){if(n.setLevel(t,!1),typeof window!==s&&o){try{return void window.localStorage.removeItem(o)}catch(e){}try{window.document.cookie=encodeURIComponent(o)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}},n.enableAll=function(e){n.setLevel(n.levels.TRACE,e)},n.disableAll=function(e){n.setLevel(n.levels.SILENT,e)};e=a();null==e&&(e=t),n.setLevel(e,!1)}var i=new t,r={},e=(i.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");return r[e]||(r[e]=new t(e,i.getLevel(),i.methodFactory))},typeof window!==s?window.log:void 0);return i.noConflict=function(){return typeof window!==s&&window.log===i&&(window.log=e),i},i.getLoggers=function(){return r},i.default=i},e.exports?e.exports=i():t.log=i()}(loglevel),!function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"}(LogLevel=LogLevel||{});const livekitLogger=loglevel.exports.getLogger("livekit");function setLogLevel(e){livekitLogger.setLevel(e)}livekitLogger.setLevel(LogLevel.info);var long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function isLong(e){return!0===(e&&e.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var i,r,n;return t?(n=0<=(e>>>=0)&&e<256)&&(r=UINT_CACHE[e])?r:(i=fromBits(e,(0|e)<0?-1:0,!0),n&&(UINT_CACHE[e]=i),i):(n=-128<=(e|=0)&&e<128)&&(r=INT_CACHE[e])?r:(i=fromBits(e,e<0?-1:0,!1),n&&(INT_CACHE[e]=i),i)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(TWO_PWR_64_DBL<=e)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(TWO_PWR_63_DBL<=e+1)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,i){return new Long(e,t,i)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,t,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if(t="number"==typeof t?(i=t,!1):!!t,(i=i||10)<2||36<i)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return fromString(e.substring(1),t,i).neg();for(var n=fromNumber(pow_dbl(i,8)),o=ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+s),i);o=s<8?(s=fromNumber(pow_dbl(i,s)),o.mul(s).add(fromNumber(c))):(o=o.mul(n)).add(fromNumber(c))}return o.unsigned=t,o}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0),UZERO=(Long.ZERO=ZERO,fromInt(0,!0)),ONE=(Long.UZERO=UZERO,fromInt(1)),UONE=(Long.ONE=ONE,fromInt(1,!0)),NEG_ONE=(Long.UONE=UONE,fromInt(-1)),MAX_VALUE=(Long.NEG_ONE=NEG_ONE,fromBits(-1,2147483647,!1)),MAX_UNSIGNED_VALUE=(Long.MAX_VALUE=MAX_VALUE,fromBits(-1,-1,!0)),MIN_VALUE=(Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE,fromBits(0,-2147483648,!1)),LongPrototype=(Long.MIN_VALUE=MIN_VALUE,Long.prototype),indexMinimal=(LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,i;if(this.isNegative())return this.eq(MIN_VALUE)?(i=fromNumber(e),i=(t=this.div(i)).mul(i).sub(this),t.toString(e)+i.toInt().toString(e)):"-"+this.neg().toString(e);for(var r=fromNumber(pow_dbl(e,6),this.unsigned),n=this,o="";;){var a=n.div(r),s=(n.sub(a.mul(r)).toInt()>>>0).toString(e);if((n=a).isZero())return s+o;for(;s.length<6;)s="0"+s;o=""+s+o}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||0<=this.high},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return 0<this.comp(e)},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return 0<=this.comp(e)},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,n=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=0,l=0,d=0,u=0;return l+=(d=d+((u+=n+(65535&e.low))>>>16)+(r+s))>>>16,fromBits((d&=65535)<<16|(u&=65535),((c+=(l+=i+a)>>>16)+(t+o)&65535)<<16|(l&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,n=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,e=65535&e.low,c=0,l=0,d=0,u=(u=0)+((l=l+((d+=n*e)>>>16)+r*e)>>>16)+((l=(l&65535)+n*s)>>>16);return fromBits((l&=65535)<<16|(d&=65535),((c+=(u+=i*e)>>>16)+((u=(u&65535)+r*s)>>>16)+((u=(u&65535)+n*a)>>>16)+(t*e+i*s+r*a+n*o)&65535)<<16|(u&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if((e=isLong(e)?e:fromValue(e)).isZero())throw Error("division by zero");var t,i,r;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;i=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(r=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(t=this.sub(e.mul(r)),r.add(t.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=ZERO}for(t=this;t.gte(e);){r=Math.max(1,Math.floor(t.toNumber()/e.toNumber()));for(var n=Math.ceil(Math.log(r)/Math.LN2),o=n<=48?1:pow_dbl(2,n-48),a=fromNumber(r),s=a.mul(e);s.isNegative()||s.gt(t);)s=(a=fromNumber(r-=o,this.unsigned)).mul(e);a.isZero()&&(a=ONE),i=i.add(a),t=t.sub(s)}return i},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){var t;return isLong(e)&&(e=e.toInt()),0===(e&=63)?this:(t=this.high,e<32?fromBits(this.low>>>e|t<<32-e,t>>>e,this.unsigned):fromBits(32===e?t:t>>>e-32,0,this.unsigned))},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,i){return i?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},{}),minimal$1={},aspromise=asPromise;function asPromise(e,t){for(var i=new Array(arguments.length-1),o=0,r=2,a=!0;r<arguments.length;)i[o++]=arguments[r++];return new Promise(function(r,n){i[o]=function(e){if(a)if(a=!1,e)n(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];r.apply(null,t)}};try{e.apply(t||null,i)}catch(e){a&&(a=!1,n(e))}})}var base64$1={},eventemitter=(!function(){for(var e=base64$1,l=(e.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;1<--t%4&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i},new Array(64)),c=new Array(123),t=0;t<64;)c[l[t]=t<26?t+65:t<52?t+71:t<62?t-4:t-59|43]=t++;e.encode=function(e,t,i){for(var r,n=null,o=[],a=0,s=0;t<i;){var c=e[t++];switch(s){case 0:o[a++]=l[c>>2],r=(3&c)<<4,s=1;break;case 1:o[a++]=l[r|c>>4],r=(15&c)<<2,s=2;break;case 2:o[a++]=l[r|c>>6],o[a++]=l[63&c],s=0}8191<a&&((n=n||[]).push(String.fromCharCode.apply(String,o)),a=0)}return s&&(o[a++]=l[r],o[a++]=61,1===s&&(o[a++]=61)),n?(a&&n.push(String.fromCharCode.apply(String,o.slice(0,a))),n.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var d="invalid encoding";e.decode=function(e,t,i){for(var r,n=i,o=0,a=0;a<e.length;){var s=e.charCodeAt(a++);if(61===s&&1<o)break;if(void 0===(s=c[s]))throw Error(d);switch(o){case 0:r=s,o=1;break;case 1:t[i++]=r<<2|(48&s)>>4,r=s,o=2;break;case 2:t[i++]=(15&r)<<4|(60&s)>>2,r=s,o=3;break;case 3:t[i++]=(3&r)<<6|s,o=0}}if(1===o)throw Error(d);return i-n},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(),EventEmitter$1);function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},EventEmitter$1.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],r=0;r<i.length;)i[r].fn===t?i.splice(r,1):++r;return this},EventEmitter$1.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,i)}return this};var float=factory(factory);function factory(e){function t(e,t,i,r){var n=t<0?1:0;0===(t=n?-t:t)?e(0<1/t?0:2147483648,i,r):isNaN(t)?e(2143289344,i,r):e(34028234663852886e22<t?(n<<31|2139095040)>>>0:t<11754943508222875e-54?(n<<31|Math.round(t/1401298464324817e-60))>>>0:(n<<31|(e=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-e)*8388608))>>>0,i,r)}function i(e,t,i){e=e(t,i),t=2*(e>>31)+1,i=e>>>23&255,e&=8388607;return 255==i?e?NaN:1/0*t:0==i?1401298464324817e-60*t*e:t*Math.pow(2,i-150)*(8388608+e)}function r(e,t,i){s[0]=e,t[i]=c[0],t[i+1]=c[1],t[i+2]=c[2],t[i+3]=c[3]}function n(e,t,i){s[0]=e,t[i]=c[3],t[i+1]=c[2],t[i+2]=c[1],t[i+3]=c[0]}function o(e,t){return c[0]=e[t],c[1]=e[t+1],c[2]=e[t+2],c[3]=e[t+3],s[0]}function a(e,t){return c[3]=e[t],c[2]=e[t+1],c[1]=e[t+2],c[0]=e[t+3],s[0]}var s,c,l,d,u;function p(e,t,i,r,n,o){var a,s,c=r<0?1:0;0===(r=c?-r:r)?(e(0,n,o+t),e(0<1/r?0:2147483648,n,o+i)):isNaN(r)?(e(0,n,o+t),e(2146959360,n,o+i)):17976931348623157e292<r?(e(0,n,o+t),e((c<<31|2146435072)>>>0,n,o+i)):r<22250738585072014e-324?(e((a=r/5e-324)>>>0,n,o+t),e((c<<31|a/4294967296)>>>0,n,o+i)):(1024===(s=Math.floor(Math.log(r)/Math.LN2))&&(s=1023),e(4503599627370496*(a=r*Math.pow(2,-s))>>>0,n,o+t),e((c<<31|s+1023<<20|1048576*a&1048575)>>>0,n,o+i))}function h(e,t,i,r,n){t=e(r,n+t),e=e(r,n+i),r=2*(e>>31)+1,n=e>>>20&2047,i=4294967296*(1048575&e)+t;return 2047==n?i?NaN:1/0*r:0==n?5e-324*r*i:r*Math.pow(2,n-1075)*(i+4503599627370496)}function f(e,t,i){l[0]=e,t[i]=d[0],t[i+1]=d[1],t[i+2]=d[2],t[i+3]=d[3],t[i+4]=d[4],t[i+5]=d[5],t[i+6]=d[6],t[i+7]=d[7]}function m(e,t,i){l[0]=e,t[i]=d[7],t[i+1]=d[6],t[i+2]=d[5],t[i+3]=d[4],t[i+4]=d[3],t[i+5]=d[2],t[i+6]=d[1],t[i+7]=d[0]}function g(e,t){return d[0]=e[t],d[1]=e[t+1],d[2]=e[t+2],d[3]=e[t+3],d[4]=e[t+4],d[5]=e[t+5],d[6]=e[t+6],d[7]=e[t+7],l[0]}function b(e,t){return d[7]=e[t],d[6]=e[t+1],d[5]=e[t+2],d[4]=e[t+3],d[3]=e[t+4],d[2]=e[t+5],d[1]=e[t+6],d[0]=e[t+7],l[0]}return"undefined"!=typeof Float32Array?(s=new Float32Array([-0]),c=new Uint8Array(s.buffer),u=128===c[3],e.writeFloatLE=u?r:n,e.writeFloatBE=u?n:r,e.readFloatLE=u?o:a,e.readFloatBE=u?a:o):(e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=i.bind(null,readUintLE),e.readFloatBE=i.bind(null,readUintBE)),"undefined"!=typeof Float64Array?(l=new Float64Array([-0]),d=new Uint8Array(l.buffer),u=128===d[7],e.writeDoubleLE=u?f:m,e.writeDoubleBE=u?m:f,e.readDoubleLE=u?g:b,e.readDoubleBE=u?b:g):(e.writeDoubleLE=p.bind(null,writeUintLE,0,4),e.writeDoubleBE=p.bind(null,writeUintBE,4,0),e.readDoubleLE=h.bind(null,readUintLE,0,4),e.readDoubleBE=h.bind(null,readUintBE,4,0)),e}function writeUintLE(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function writeUintBE(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={},pool_1=(!function(){var e=utf8$2;e.length=function(e){for(var t,i=0,r=0;r<e.length;++r)(t=e.charCodeAt(r))<128?i+=1:t<2048?i+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,i+=4):i+=3;return i},e.read=function(e,t,i){if(i-t<1)return"";for(var r,n=null,o=[],a=0;t<i;)(r=e[t++])<128?o[a++]=r:191<r&&r<224?o[a++]=(31&r)<<6|63&e[t++]:239<r&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((n=n||[]).push(String.fromCharCode.apply(String,o)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,o.slice(0,a))),n.join("")):String.fromCharCode.apply(String,o.slice(0,a))},e.write=function(e,t,i){for(var r,n,o=i,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(n=e.charCodeAt(a+1)))?(++a,t[i++]=(r=65536+((1023&r)<<10)+(1023&n))>>18|240,t[i++]=r>>12&63|128):t[i++]=r>>12|224,t[i++]=r>>6&63|128),t[i++]=63&r|128);return i-o}}(),pool);function pool(t,i,e){var r=e||8192,n=r>>>1,o=null,a=r;return function(e){if(e<1||n<e)return t(e);r<a+e&&(o=t(r),a=0);e=i.call(o,a,a+=e);return 7&a&&(a=1+(7|a)),e}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0),zeroHash=(zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1},LongBits$2.zeroHash="\0\0\0\0\0\0\0\0"),charCodeAt$1=(LongBits$2.fromNumber=function(e){if(0===e)return zero;var t=e<0,i=(e=t?-e:e)>>>0,e=(e-i)/4294967296>>>0;return t&&(e=~e>>>0,i=~i>>>0,4294967295<++i&&(i=0,4294967295<++e&&(e=0))),new LongBits$2(i,e)},LongBits$2.from=function(e){if("number"==typeof e)return LongBits$2.fromNumber(e);if(util$5.isString(e)){if(!util$5.Long)return LongBits$2.fromNumber(parseInt(e,10));e=util$5.Long.fromString(e)}return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero},LongBits$2.prototype.toNumber=function(e){var t;return!e&&this.hi>>>31?(e=1+~this.lo>>>0,t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))):this.lo+4294967296*this.hi},LongBits$2.prototype.toLong=function(e){return util$5.Long?new util$5.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}},String.prototype.charCodeAt),writer=(LongBits$2.fromHash=function(e){return e===zeroHash?zero:new LongBits$2((charCodeAt$1.call(e,0)|charCodeAt$1.call(e,1)<<8|charCodeAt$1.call(e,2)<<16|charCodeAt$1.call(e,3)<<24)>>>0,(charCodeAt$1.call(e,4)|charCodeAt$1.call(e,5)<<8|charCodeAt$1.call(e,6)<<16|charCodeAt$1.call(e,7)<<24)>>>0)},LongBits$2.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits$2.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits$2.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10},!function(){var r=minimal$1;function n(e,t,i){for(var r=Object.keys(t),n=0;n<r.length;++n)void 0!==e[r[n]]&&i||(e[r[n]]=t[r[n]]);return e}function e(e){function i(e,t){if(!(this instanceof i))return new i(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&n(this,t)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return e}}),i.prototype.toString=function(){return this.name+": "+this.message},i}r.asPromise=aspromise,r.base64=base64$1,r.EventEmitter=eventemitter,r.float=float,r.inquire=inquire_1,r.utf8=utf8$2,r.pool=pool_1,r.LongBits=longbits,r.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){e=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(e.lo,e.hi,t):e.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=e,r.ProtocolError=e("ProtocolError"),r.oneOfGetter=function(e){for(var i={},t=0;t<e.length;++t)i[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===i[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},r.oneOfSetter=function(i){return function(e){for(var t=0;t<i.length;++t)i[t]!==e&&delete this[i[t]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var i=r.Buffer;i?(r._Buffer_from=i.from!==Uint8Array.from&&i.from||function(e,t){return new i(e,t)},r._Buffer_allocUnsafe=i.allocUnsafe||function(e){return new i(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}(),Writer$1),util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function noop$1(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$4=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,i){t[i]=255&e}function writeVarint32(e,t,i){for(;127<e;)t[i++]=127&e|128,e>>>=7;t[i]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function writeFixed32(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}Writer$1.create=create$4(),Writer$1.alloc=function(e){return new util$4.Array(e)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,i){return this.tail=this.tail.next=new Op(e,t,i),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){e=LongBits$1.from(e);return this._push(writeVarint64,e.length(),e)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){e=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,e.length(),e)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){e=LongBits$1.from(e);return this._push(writeFixed32,4,e.lo)._push(writeFixed32,4,e.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$4.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]},writer_buffer=(Writer$1.prototype.bytes=function(e){var t,i=e.length>>>0;return i?(util$4.isString(e)&&(t=Writer$1.alloc(i=base64.length(e)),base64.decode(e,t,0),e=t),this.uint32(i)._push(writeBytes,i,e)):this._push(writeByte,1,0)},Writer$1.prototype.string=function(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$4(),BufferWriter$1._configure()},BufferWriter),Writer=writer,util$3=((BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter,minimal$1);function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,t,i){e.length<40?util$3.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&"set"===util$3.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]}},BufferWriter.prototype.bytes=function(e){var t=(e=util$3.isString(e)?util$3._Buffer_from(e,"base64"):e).length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this},BufferWriter.prototype.string=function(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$3=function(){return util$2.Buffer?function(e){return(Reader$1.create=function(e){return util$2.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e)})(e)}:create_array};function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create$3(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128||!((this.pos+=5)>this.len))))))return e;throw this.pos=this.len,indexOutOfRange(this,10)}}(),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create$3(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader,util$1=((BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader,minimal$1);function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util=minimal$1;function Service(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(i,t,r,n,o){if(!n)throw TypeError("request must be specified");var a=this;if(!o)return util.asPromise(e,a,i,t,r,n);if(a.rpcImpl)try{return a.rpcImpl(i,t[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(e,t){if(e)return a.emit("error",e,i),o(e);if(null!==t){if(!(t instanceof r))try{t=r[a.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return a.emit("error",e,i),o(e)}return a.emit("data",t,i),o(null,t)}a.end(!0)})}catch(e){return a.emit("error",e,i),void setTimeout(function(){o(e)},0)}else setTimeout(function(){o(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},rpc.Service=service;var roots={},minimal=(!function(){var e=indexMinimal;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=minimal$1,e.rpc=rpc,e.roots=roots,e.configure=t,t()}(),indexMinimal),globalThis$2=(()=>{if(void 0!==globalThis$2)return globalThis$2;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})(),TrackType,TrackSource,VideoQuality,ConnectionQuality$1,ClientConfigSetting,DisconnectReason,ParticipantInfo_State,DataPacket_Kind,ClientInfo_SDK;function trackTypeFromJSON(e){switch(e){case 0:case"AUDIO":return TrackType.AUDIO;case 1:case"VIDEO":return TrackType.VIDEO;case 2:case"DATA":return TrackType.DATA;default:return TrackType.UNRECOGNIZED}}function trackTypeToJSON(e){switch(e){case TrackType.AUDIO:return"AUDIO";case TrackType.VIDEO:return"VIDEO";case TrackType.DATA:return"DATA";default:return"UNKNOWN"}}function trackSourceFromJSON(e){switch(e){case 0:case"UNKNOWN":return TrackSource.UNKNOWN;case 1:case"CAMERA":return TrackSource.CAMERA;case 2:case"MICROPHONE":return TrackSource.MICROPHONE;case 3:case"SCREEN_SHARE":return TrackSource.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNRECOGNIZED}}function trackSourceToJSON(e){switch(e){case TrackSource.UNKNOWN:return"UNKNOWN";case TrackSource.CAMERA:return"CAMERA";case TrackSource.MICROPHONE:return"MICROPHONE";case TrackSource.SCREEN_SHARE:return"SCREEN_SHARE";case TrackSource.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}function videoQualityFromJSON(e){switch(e){case 0:case"LOW":return VideoQuality.LOW;case 1:case"MEDIUM":return VideoQuality.MEDIUM;case 2:case"HIGH":return VideoQuality.HIGH;case 3:case"OFF":return VideoQuality.OFF;default:return VideoQuality.UNRECOGNIZED}}function videoQualityToJSON(e){switch(e){case VideoQuality.LOW:return"LOW";case VideoQuality.MEDIUM:return"MEDIUM";case VideoQuality.HIGH:return"HIGH";case VideoQuality.OFF:return"OFF";default:return"UNKNOWN"}}function connectionQualityFromJSON(e){switch(e){case 0:case"POOR":return ConnectionQuality$1.POOR;case 1:case"GOOD":return ConnectionQuality$1.GOOD;case 2:case"EXCELLENT":return ConnectionQuality$1.EXCELLENT;default:return ConnectionQuality$1.UNRECOGNIZED}}function connectionQualityToJSON(e){switch(e){case ConnectionQuality$1.POOR:return"POOR";case ConnectionQuality$1.GOOD:return"GOOD";case ConnectionQuality$1.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}function clientConfigSettingFromJSON(e){switch(e){case 0:case"UNSET":return ClientConfigSetting.UNSET;case 1:case"DISABLED":return ClientConfigSetting.DISABLED;case 2:case"ENABLED":return ClientConfigSetting.ENABLED;default:return ClientConfigSetting.UNRECOGNIZED}}function clientConfigSettingToJSON(e){switch(e){case ClientConfigSetting.UNSET:return"UNSET";case ClientConfigSetting.DISABLED:return"DISABLED";case ClientConfigSetting.ENABLED:return"ENABLED";default:return"UNKNOWN"}}function disconnectReasonFromJSON(e){switch(e){case 0:case"UNKNOWN_REASON":return DisconnectReason.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return DisconnectReason.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return DisconnectReason.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return DisconnectReason.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return DisconnectReason.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return DisconnectReason.ROOM_DELETED;case 6:case"STATE_MISMATCH":return DisconnectReason.STATE_MISMATCH;default:return DisconnectReason.UNRECOGNIZED}}function disconnectReasonToJSON(e){switch(e){case DisconnectReason.UNKNOWN_REASON:return"UNKNOWN_REASON";case DisconnectReason.CLIENT_INITIATED:return"CLIENT_INITIATED";case DisconnectReason.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case DisconnectReason.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case DisconnectReason.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case DisconnectReason.ROOM_DELETED:return"ROOM_DELETED";case DisconnectReason.STATE_MISMATCH:return"STATE_MISMATCH";default:return"UNKNOWN"}}function participantInfo_StateFromJSON(e){switch(e){case 0:case"JOINING":return ParticipantInfo_State.JOINING;case 1:case"JOINED":return ParticipantInfo_State.JOINED;case 2:case"ACTIVE":return ParticipantInfo_State.ACTIVE;case 3:case"DISCONNECTED":return ParticipantInfo_State.DISCONNECTED;default:return ParticipantInfo_State.UNRECOGNIZED}}function participantInfo_StateToJSON(e){switch(e){case ParticipantInfo_State.JOINING:return"JOINING";case ParticipantInfo_State.JOINED:return"JOINED";case ParticipantInfo_State.ACTIVE:return"ACTIVE";case ParticipantInfo_State.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}function dataPacket_KindFromJSON(e){switch(e){case 0:case"RELIABLE":return DataPacket_Kind.RELIABLE;case 1:case"LOSSY":return DataPacket_Kind.LOSSY;default:return DataPacket_Kind.UNRECOGNIZED}}function dataPacket_KindToJSON(e){switch(e){case DataPacket_Kind.RELIABLE:return"RELIABLE";case DataPacket_Kind.LOSSY:return"LOSSY";default:return"UNKNOWN"}}function clientInfo_SDKFromJSON(e){switch(e){case 0:case"UNKNOWN":return ClientInfo_SDK.UNKNOWN;case 1:case"JS":return ClientInfo_SDK.JS;case 2:case"SWIFT":return ClientInfo_SDK.SWIFT;case 3:case"ANDROID":return ClientInfo_SDK.ANDROID;case 4:case"FLUTTER":return ClientInfo_SDK.FLUTTER;case 5:case"GO":return ClientInfo_SDK.GO;case 6:case"UNITY":return ClientInfo_SDK.UNITY;default:return ClientInfo_SDK.UNRECOGNIZED}}function clientInfo_SDKToJSON(e){switch(e){case ClientInfo_SDK.UNKNOWN:return"UNKNOWN";case ClientInfo_SDK.JS:return"JS";case ClientInfo_SDK.SWIFT:return"SWIFT";case ClientInfo_SDK.ANDROID:return"ANDROID";case ClientInfo_SDK.FLUTTER:return"FLUTTER";case ClientInfo_SDK.GO:return"GO";case ClientInfo_SDK.UNITY:return"UNITY";default:return"UNKNOWN"}}function createBaseRoom(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}minimal.util.Long!==long&&(minimal.util.Long=long,minimal.configure()),!function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(TrackType=TrackType||{}),!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(TrackSource=TrackSource||{}),!function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(VideoQuality=VideoQuality||{}),!function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ConnectionQuality$1=ConnectionQuality$1||{}),!function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ClientConfigSetting=ClientConfigSetting||{}),!function(e){e[e.UNKNOWN_REASON=0]="UNKNOWN_REASON",e[e.CLIENT_INITIATED=1]="CLIENT_INITIATED",e[e.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",e[e.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",e[e.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",e[e.ROOM_DELETED=5]="ROOM_DELETED",e[e.STATE_MISMATCH=6]="STATE_MISMATCH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(DisconnectReason=DisconnectReason||{}),!function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ParticipantInfo_State=ParticipantInfo_State||{}),!function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(DataPacket_Kind=DataPacket_Kind||{}),!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ClientInfo_SDK=ClientInfo_SDK||{});const Room$1={encode(e,t=minimal.Writer.create()){""!==e.sid&&t.uint32(10).string(e.sid),""!==e.name&&t.uint32(18).string(e.name),0!==e.emptyTimeout&&t.uint32(24).uint32(e.emptyTimeout),0!==e.maxParticipants&&t.uint32(32).uint32(e.maxParticipants),0!==e.creationTime&&t.uint32(40).int64(e.creationTime),""!==e.turnPassword&&t.uint32(50).string(e.turnPassword);for(const i of e.enabledCodecs)Codec.encode(i,t.uint32(58).fork()).ldelim();return""!==e.metadata&&t.uint32(66).string(e.metadata),0!==e.numParticipants&&t.uint32(72).uint32(e.numParticipants),!0===e.activeRecording&&t.uint32(80).bool(e.activeRecording),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseRoom();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.sid=i.string();break;case 2:n.name=i.string();break;case 3:n.emptyTimeout=i.uint32();break;case 4:n.maxParticipants=i.uint32();break;case 5:n.creationTime=longToNumber(i.int64());break;case 6:n.turnPassword=i.string();break;case 7:n.enabledCodecs.push(Codec.decode(i,i.uint32()));break;case 8:n.metadata=i.string();break;case 9:n.numParticipants=i.uint32();break;case 10:n.activeRecording=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",name:isSet$1(e.name)?String(e.name):"",emptyTimeout:isSet$1(e.emptyTimeout)?Number(e.emptyTimeout):0,maxParticipants:isSet$1(e.maxParticipants)?Number(e.maxParticipants):0,creationTime:isSet$1(e.creationTime)?Number(e.creationTime):0,turnPassword:isSet$1(e.turnPassword)?String(e.turnPassword):"",enabledCodecs:Array.isArray(null==e?void 0:e.enabledCodecs)?e.enabledCodecs.map(e=>Codec.fromJSON(e)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",numParticipants:isSet$1(e.numParticipants)?Number(e.numParticipants):0,activeRecording:!!isSet$1(e.activeRecording)&&Boolean(e.activeRecording)}},toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.name&&(t.name=e.name),void 0!==e.emptyTimeout&&(t.emptyTimeout=Math.round(e.emptyTimeout)),void 0!==e.maxParticipants&&(t.maxParticipants=Math.round(e.maxParticipants)),void 0!==e.creationTime&&(t.creationTime=Math.round(e.creationTime)),void 0!==e.turnPassword&&(t.turnPassword=e.turnPassword),e.enabledCodecs?t.enabledCodecs=e.enabledCodecs.map(e=>e?Codec.toJSON(e):void 0):t.enabledCodecs=[],void 0!==e.metadata&&(t.metadata=e.metadata),void 0!==e.numParticipants&&(t.numParticipants=Math.round(e.numParticipants)),void 0!==e.activeRecording&&(t.activeRecording=e.activeRecording),t},fromPartial(e){var t;const i=createBaseRoom();return i.sid=null!=(t=e.sid)?t:"",i.name=null!=(t=e.name)?t:"",i.emptyTimeout=null!=(t=e.emptyTimeout)?t:0,i.maxParticipants=null!=(t=e.maxParticipants)?t:0,i.creationTime=null!=(t=e.creationTime)?t:0,i.turnPassword=null!=(t=e.turnPassword)?t:"",i.enabledCodecs=(null==(t=e.enabledCodecs)?void 0:t.map(e=>Codec.fromPartial(e)))||[],i.metadata=null!=(t=e.metadata)?t:"",i.numParticipants=null!=(t=e.numParticipants)?t:0,i.activeRecording=null!=(t=e.activeRecording)&&t,i}};function createBaseCodec(){return{mime:"",fmtpLine:""}}const Codec={encode(e,t=minimal.Writer.create()){return""!==e.mime&&t.uint32(10).string(e.mime),""!==e.fmtpLine&&t.uint32(18).string(e.fmtpLine),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseCodec();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.mime=i.string();break;case 2:n.fmtpLine=i.string();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{mime:isSet$1(e.mime)?String(e.mime):"",fmtpLine:isSet$1(e.fmtpLine)?String(e.fmtpLine):""}},toJSON(e){const t={};return void 0!==e.mime&&(t.mime=e.mime),void 0!==e.fmtpLine&&(t.fmtpLine=e.fmtpLine),t},fromPartial(e){var t;const i=createBaseCodec();return i.mime=null!=(t=e.mime)?t:"",i.fmtpLine=null!=(t=e.fmtpLine)?t:"",i}};function createBaseParticipantPermission(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1}}const ParticipantPermission={encode(e,t=minimal.Writer.create()){return!0===e.canSubscribe&&t.uint32(8).bool(e.canSubscribe),!0===e.canPublish&&t.uint32(16).bool(e.canPublish),!0===e.canPublishData&&t.uint32(24).bool(e.canPublishData),!0===e.hidden&&t.uint32(56).bool(e.hidden),!0===e.recorder&&t.uint32(64).bool(e.recorder),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseParticipantPermission();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.canSubscribe=i.bool();break;case 2:n.canPublish=i.bool();break;case 3:n.canPublishData=i.bool();break;case 7:n.hidden=i.bool();break;case 8:n.recorder=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{canSubscribe:!!isSet$1(e.canSubscribe)&&Boolean(e.canSubscribe),canPublish:!!isSet$1(e.canPublish)&&Boolean(e.canPublish),canPublishData:!!isSet$1(e.canPublishData)&&Boolean(e.canPublishData),hidden:!!isSet$1(e.hidden)&&Boolean(e.hidden),recorder:!!isSet$1(e.recorder)&&Boolean(e.recorder)}},toJSON(e){const t={};return void 0!==e.canSubscribe&&(t.canSubscribe=e.canSubscribe),void 0!==e.canPublish&&(t.canPublish=e.canPublish),void 0!==e.canPublishData&&(t.canPublishData=e.canPublishData),void 0!==e.hidden&&(t.hidden=e.hidden),void 0!==e.recorder&&(t.recorder=e.recorder),t},fromPartial(e){var t;const i=createBaseParticipantPermission();return i.canSubscribe=null!=(t=e.canSubscribe)&&t,i.canPublish=null!=(t=e.canPublish)&&t,i.canPublishData=null!=(t=e.canPublishData)&&t,i.hidden=null!=(t=e.hidden)&&t,i.recorder=null!=(t=e.recorder)&&t,i}};function createBaseParticipantInfo(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}const ParticipantInfo={encode(e,t=minimal.Writer.create()){""!==e.sid&&t.uint32(10).string(e.sid),""!==e.identity&&t.uint32(18).string(e.identity),0!==e.state&&t.uint32(24).int32(e.state);for(const i of e.tracks)TrackInfo.encode(i,t.uint32(34).fork()).ldelim();return""!==e.metadata&&t.uint32(42).string(e.metadata),0!==e.joinedAt&&t.uint32(48).int64(e.joinedAt),""!==e.name&&t.uint32(74).string(e.name),0!==e.version&&t.uint32(80).uint32(e.version),void 0!==e.permission&&ParticipantPermission.encode(e.permission,t.uint32(90).fork()).ldelim(),""!==e.region&&t.uint32(98).string(e.region),!0===e.isPublisher&&t.uint32(104).bool(e.isPublisher),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseParticipantInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.sid=i.string();break;case 2:n.identity=i.string();break;case 3:n.state=i.int32();break;case 4:n.tracks.push(TrackInfo.decode(i,i.uint32()));break;case 5:n.metadata=i.string();break;case 6:n.joinedAt=longToNumber(i.int64());break;case 9:n.name=i.string();break;case 10:n.version=i.uint32();break;case 11:n.permission=ParticipantPermission.decode(i,i.uint32());break;case 12:n.region=i.string();break;case 13:n.isPublisher=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",identity:isSet$1(e.identity)?String(e.identity):"",state:isSet$1(e.state)?participantInfo_StateFromJSON(e.state):0,tracks:Array.isArray(null==e?void 0:e.tracks)?e.tracks.map(e=>TrackInfo.fromJSON(e)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",joinedAt:isSet$1(e.joinedAt)?Number(e.joinedAt):0,name:isSet$1(e.name)?String(e.name):"",version:isSet$1(e.version)?Number(e.version):0,permission:isSet$1(e.permission)?ParticipantPermission.fromJSON(e.permission):void 0,region:isSet$1(e.region)?String(e.region):"",isPublisher:!!isSet$1(e.isPublisher)&&Boolean(e.isPublisher)}},toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.identity&&(t.identity=e.identity),void 0!==e.state&&(t.state=participantInfo_StateToJSON(e.state)),e.tracks?t.tracks=e.tracks.map(e=>e?TrackInfo.toJSON(e):void 0):t.tracks=[],void 0!==e.metadata&&(t.metadata=e.metadata),void 0!==e.joinedAt&&(t.joinedAt=Math.round(e.joinedAt)),void 0!==e.name&&(t.name=e.name),void 0!==e.version&&(t.version=Math.round(e.version)),void 0!==e.permission&&(t.permission=e.permission?ParticipantPermission.toJSON(e.permission):void 0),void 0!==e.region&&(t.region=e.region),void 0!==e.isPublisher&&(t.isPublisher=e.isPublisher),t},fromPartial(e){var t;const i=createBaseParticipantInfo();return i.sid=null!=(t=e.sid)?t:"",i.identity=null!=(t=e.identity)?t:"",i.state=null!=(t=e.state)?t:0,i.tracks=(null==(t=e.tracks)?void 0:t.map(e=>TrackInfo.fromPartial(e)))||[],i.metadata=null!=(t=e.metadata)?t:"",i.joinedAt=null!=(t=e.joinedAt)?t:0,i.name=null!=(t=e.name)?t:"",i.version=null!=(t=e.version)?t:0,i.permission=void 0!==e.permission&&null!==e.permission?ParticipantPermission.fromPartial(e.permission):void 0,i.region=null!=(t=e.region)?t:"",i.isPublisher=null!=(t=e.isPublisher)&&t,i}};function createBaseSimulcastCodecInfo(){return{mimeType:"",mid:"",cid:"",layers:[]}}const SimulcastCodecInfo={encode(e,t=minimal.Writer.create()){""!==e.mimeType&&t.uint32(10).string(e.mimeType),""!==e.mid&&t.uint32(18).string(e.mid),""!==e.cid&&t.uint32(26).string(e.cid);for(const i of e.layers)VideoLayer.encode(i,t.uint32(34).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSimulcastCodecInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.mimeType=i.string();break;case 2:n.mid=i.string();break;case 3:n.cid=i.string();break;case 4:n.layers.push(VideoLayer.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",cid:isSet$1(e.cid)?String(e.cid):"",layers:Array.isArray(null==e?void 0:e.layers)?e.layers.map(e=>VideoLayer.fromJSON(e)):[]}},toJSON(e){const t={};return void 0!==e.mimeType&&(t.mimeType=e.mimeType),void 0!==e.mid&&(t.mid=e.mid),void 0!==e.cid&&(t.cid=e.cid),e.layers?t.layers=e.layers.map(e=>e?VideoLayer.toJSON(e):void 0):t.layers=[],t},fromPartial(e){var t;const i=createBaseSimulcastCodecInfo();return i.mimeType=null!=(t=e.mimeType)?t:"",i.mid=null!=(t=e.mid)?t:"",i.cid=null!=(t=e.cid)?t:"",i.layers=(null==(t=e.layers)?void 0:t.map(e=>VideoLayer.fromPartial(e)))||[],i}};function createBaseTrackInfo(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[]}}const TrackInfo={encode(e,t=minimal.Writer.create()){""!==e.sid&&t.uint32(10).string(e.sid),0!==e.type&&t.uint32(16).int32(e.type),""!==e.name&&t.uint32(26).string(e.name),!0===e.muted&&t.uint32(32).bool(e.muted),0!==e.width&&t.uint32(40).uint32(e.width),0!==e.height&&t.uint32(48).uint32(e.height),!0===e.simulcast&&t.uint32(56).bool(e.simulcast),!0===e.disableDtx&&t.uint32(64).bool(e.disableDtx),0!==e.source&&t.uint32(72).int32(e.source);for(const i of e.layers)VideoLayer.encode(i,t.uint32(82).fork()).ldelim();""!==e.mimeType&&t.uint32(90).string(e.mimeType),""!==e.mid&&t.uint32(98).string(e.mid);for(const r of e.codecs)SimulcastCodecInfo.encode(r,t.uint32(106).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseTrackInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.sid=i.string();break;case 2:n.type=i.int32();break;case 3:n.name=i.string();break;case 4:n.muted=i.bool();break;case 5:n.width=i.uint32();break;case 6:n.height=i.uint32();break;case 7:n.simulcast=i.bool();break;case 8:n.disableDtx=i.bool();break;case 9:n.source=i.int32();break;case 10:n.layers.push(VideoLayer.decode(i,i.uint32()));break;case 11:n.mimeType=i.string();break;case 12:n.mid=i.string();break;case 13:n.codecs.push(SimulcastCodecInfo.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",type:isSet$1(e.type)?trackTypeFromJSON(e.type):0,name:isSet$1(e.name)?String(e.name):"",muted:!!isSet$1(e.muted)&&Boolean(e.muted),width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,simulcast:!!isSet$1(e.simulcast)&&Boolean(e.simulcast),disableDtx:!!isSet$1(e.disableDtx)&&Boolean(e.disableDtx),source:isSet$1(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(null==e?void 0:e.layers)?e.layers.map(e=>VideoLayer.fromJSON(e)):[],mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",codecs:Array.isArray(null==e?void 0:e.codecs)?e.codecs.map(e=>SimulcastCodecInfo.fromJSON(e)):[]}},toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.type&&(t.type=trackTypeToJSON(e.type)),void 0!==e.name&&(t.name=e.name),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.simulcast&&(t.simulcast=e.simulcast),void 0!==e.disableDtx&&(t.disableDtx=e.disableDtx),void 0!==e.source&&(t.source=trackSourceToJSON(e.source)),e.layers?t.layers=e.layers.map(e=>e?VideoLayer.toJSON(e):void 0):t.layers=[],void 0!==e.mimeType&&(t.mimeType=e.mimeType),void 0!==e.mid&&(t.mid=e.mid),e.codecs?t.codecs=e.codecs.map(e=>e?SimulcastCodecInfo.toJSON(e):void 0):t.codecs=[],t},fromPartial(e){var t;const i=createBaseTrackInfo();return i.sid=null!=(t=e.sid)?t:"",i.type=null!=(t=e.type)?t:0,i.name=null!=(t=e.name)?t:"",i.muted=null!=(t=e.muted)&&t,i.width=null!=(t=e.width)?t:0,i.height=null!=(t=e.height)?t:0,i.simulcast=null!=(t=e.simulcast)&&t,i.disableDtx=null!=(t=e.disableDtx)&&t,i.source=null!=(t=e.source)?t:0,i.layers=(null==(t=e.layers)?void 0:t.map(e=>VideoLayer.fromPartial(e)))||[],i.mimeType=null!=(t=e.mimeType)?t:"",i.mid=null!=(t=e.mid)?t:"",i.codecs=(null==(t=e.codecs)?void 0:t.map(e=>SimulcastCodecInfo.fromPartial(e)))||[],i}};function createBaseVideoLayer(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}const VideoLayer={encode(e,t=minimal.Writer.create()){return 0!==e.quality&&t.uint32(8).int32(e.quality),0!==e.width&&t.uint32(16).uint32(e.width),0!==e.height&&t.uint32(24).uint32(e.height),0!==e.bitrate&&t.uint32(32).uint32(e.bitrate),0!==e.ssrc&&t.uint32(40).uint32(e.ssrc),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseVideoLayer();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.quality=i.int32();break;case 2:n.width=i.uint32();break;case 3:n.height=i.uint32();break;case 4:n.bitrate=i.uint32();break;case 5:n.ssrc=i.uint32();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{quality:isSet$1(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,bitrate:isSet$1(e.bitrate)?Number(e.bitrate):0,ssrc:isSet$1(e.ssrc)?Number(e.ssrc):0}},toJSON(e){const t={};return void 0!==e.quality&&(t.quality=videoQualityToJSON(e.quality)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.bitrate&&(t.bitrate=Math.round(e.bitrate)),void 0!==e.ssrc&&(t.ssrc=Math.round(e.ssrc)),t},fromPartial(e){var t;const i=createBaseVideoLayer();return i.quality=null!=(t=e.quality)?t:0,i.width=null!=(t=e.width)?t:0,i.height=null!=(t=e.height)?t:0,i.bitrate=null!=(t=e.bitrate)?t:0,i.ssrc=null!=(t=e.ssrc)?t:0,i}};function createBaseDataPacket(){return{kind:0,user:void 0,speaker:void 0}}const DataPacket={encode(e,t=minimal.Writer.create()){return 0!==e.kind&&t.uint32(8).int32(e.kind),void 0!==e.user&&UserPacket.encode(e.user,t.uint32(18).fork()).ldelim(),void 0!==e.speaker&&ActiveSpeakerUpdate.encode(e.speaker,t.uint32(26).fork()).ldelim(),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseDataPacket();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.kind=i.int32();break;case 2:n.user=UserPacket.decode(i,i.uint32());break;case 3:n.speaker=ActiveSpeakerUpdate.decode(i,i.uint32());break;default:i.skipType(7&o)}}return n},fromJSON(e){return{kind:isSet$1(e.kind)?dataPacket_KindFromJSON(e.kind):0,user:isSet$1(e.user)?UserPacket.fromJSON(e.user):void 0,speaker:isSet$1(e.speaker)?ActiveSpeakerUpdate.fromJSON(e.speaker):void 0}},toJSON(e){const t={};return void 0!==e.kind&&(t.kind=dataPacket_KindToJSON(e.kind)),void 0!==e.user&&(t.user=e.user?UserPacket.toJSON(e.user):void 0),void 0!==e.speaker&&(t.speaker=e.speaker?ActiveSpeakerUpdate.toJSON(e.speaker):void 0),t},fromPartial(e){var t;const i=createBaseDataPacket();return i.kind=null!=(t=e.kind)?t:0,i.user=void 0!==e.user&&null!==e.user?UserPacket.fromPartial(e.user):void 0,i.speaker=void 0!==e.speaker&&null!==e.speaker?ActiveSpeakerUpdate.fromPartial(e.speaker):void 0,i}};function createBaseActiveSpeakerUpdate(){return{speakers:[]}}const ActiveSpeakerUpdate={encode(e,t=minimal.Writer.create()){for(const i of e.speakers)SpeakerInfo.encode(i,t.uint32(10).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseActiveSpeakerUpdate();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.speakers.push(SpeakerInfo.decode(i,i.uint32())):i.skipType(7&o)}return n},fromJSON(e){return{speakers:Array.isArray(null==e?void 0:e.speakers)?e.speakers.map(e=>SpeakerInfo.fromJSON(e)):[]}},toJSON(e){const t={};return e.speakers?t.speakers=e.speakers.map(e=>e?SpeakerInfo.toJSON(e):void 0):t.speakers=[],t},fromPartial(e){const t=createBaseActiveSpeakerUpdate();return t.speakers=(null==(e=e.speakers)?void 0:e.map(e=>SpeakerInfo.fromPartial(e)))||[],t}};function createBaseSpeakerInfo(){return{sid:"",level:0,active:!1}}const SpeakerInfo={encode(e,t=minimal.Writer.create()){return""!==e.sid&&t.uint32(10).string(e.sid),0!==e.level&&t.uint32(21).float(e.level),!0===e.active&&t.uint32(24).bool(e.active),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSpeakerInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.sid=i.string();break;case 2:n.level=i.float();break;case 3:n.active=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",level:isSet$1(e.level)?Number(e.level):0,active:!!isSet$1(e.active)&&Boolean(e.active)}},toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.level&&(t.level=e.level),void 0!==e.active&&(t.active=e.active),t},fromPartial(e){var t;const i=createBaseSpeakerInfo();return i.sid=null!=(t=e.sid)?t:"",i.level=null!=(t=e.level)?t:0,i.active=null!=(t=e.active)&&t,i}};function createBaseUserPacket(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}const UserPacket={encode(e,t=minimal.Writer.create()){""!==e.participantSid&&t.uint32(10).string(e.participantSid),0!==e.payload.length&&t.uint32(18).bytes(e.payload);for(const i of e.destinationSids)t.uint32(26).string(i);return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseUserPacket();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.participantSid=i.string();break;case 2:n.payload=i.bytes();break;case 3:n.destinationSids.push(i.string());break;default:i.skipType(7&o)}}return n},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",payload:isSet$1(e.payload)?bytesFromBase64(e.payload):new Uint8Array,destinationSids:Array.isArray(null==e?void 0:e.destinationSids)?e.destinationSids.map(e=>String(e)):[]}},toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.payload&&(t.payload=base64FromBytes(void 0!==e.payload?e.payload:new Uint8Array)),e.destinationSids?t.destinationSids=e.destinationSids.map(e=>e):t.destinationSids=[],t},fromPartial(e){var t;const i=createBaseUserPacket();return i.participantSid=null!=(t=e.participantSid)?t:"",i.payload=null!=(t=e.payload)?t:new Uint8Array,i.destinationSids=(null==(t=e.destinationSids)?void 0:t.map(e=>e))||[],i}};function createBaseParticipantTracks(){return{participantSid:"",trackSids:[]}}const ParticipantTracks={encode(e,t=minimal.Writer.create()){""!==e.participantSid&&t.uint32(10).string(e.participantSid);for(const i of e.trackSids)t.uint32(18).string(i);return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseParticipantTracks();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.participantSid=i.string();break;case 2:n.trackSids.push(i.string());break;default:i.skipType(7&o)}}return n},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map(e=>String(e)):[]}},toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),e.trackSids?t.trackSids=e.trackSids.map(e=>e):t.trackSids=[],t},fromPartial(e){var t;const i=createBaseParticipantTracks();return i.participantSid=null!=(t=e.participantSid)?t:"",i.trackSids=(null==(t=e.trackSids)?void 0:t.map(e=>e))||[],i}};function createBaseClientInfo(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:""}}const ClientInfo={encode(e,t=minimal.Writer.create()){return 0!==e.sdk&&t.uint32(8).int32(e.sdk),""!==e.version&&t.uint32(18).string(e.version),0!==e.protocol&&t.uint32(24).int32(e.protocol),""!==e.os&&t.uint32(34).string(e.os),""!==e.osVersion&&t.uint32(42).string(e.osVersion),""!==e.deviceModel&&t.uint32(50).string(e.deviceModel),""!==e.browser&&t.uint32(58).string(e.browser),""!==e.browserVersion&&t.uint32(66).string(e.browserVersion),""!==e.address&&t.uint32(74).string(e.address),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseClientInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.sdk=i.int32();break;case 2:n.version=i.string();break;case 3:n.protocol=i.int32();break;case 4:n.os=i.string();break;case 5:n.osVersion=i.string();break;case 6:n.deviceModel=i.string();break;case 7:n.browser=i.string();break;case 8:n.browserVersion=i.string();break;case 9:n.address=i.string();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{sdk:isSet$1(e.sdk)?clientInfo_SDKFromJSON(e.sdk):0,version:isSet$1(e.version)?String(e.version):"",protocol:isSet$1(e.protocol)?Number(e.protocol):0,os:isSet$1(e.os)?String(e.os):"",osVersion:isSet$1(e.osVersion)?String(e.osVersion):"",deviceModel:isSet$1(e.deviceModel)?String(e.deviceModel):"",browser:isSet$1(e.browser)?String(e.browser):"",browserVersion:isSet$1(e.browserVersion)?String(e.browserVersion):"",address:isSet$1(e.address)?String(e.address):""}},toJSON(e){const t={};return void 0!==e.sdk&&(t.sdk=clientInfo_SDKToJSON(e.sdk)),void 0!==e.version&&(t.version=e.version),void 0!==e.protocol&&(t.protocol=Math.round(e.protocol)),void 0!==e.os&&(t.os=e.os),void 0!==e.osVersion&&(t.osVersion=e.osVersion),void 0!==e.deviceModel&&(t.deviceModel=e.deviceModel),void 0!==e.browser&&(t.browser=e.browser),void 0!==e.browserVersion&&(t.browserVersion=e.browserVersion),void 0!==e.address&&(t.address=e.address),t},fromPartial(e){var t;const i=createBaseClientInfo();return i.sdk=null!=(t=e.sdk)?t:0,i.version=null!=(t=e.version)?t:"",i.protocol=null!=(t=e.protocol)?t:0,i.os=null!=(t=e.os)?t:"",i.osVersion=null!=(t=e.osVersion)?t:"",i.deviceModel=null!=(t=e.deviceModel)?t:"",i.browser=null!=(t=e.browser)?t:"",i.browserVersion=null!=(t=e.browserVersion)?t:"",i.address=null!=(t=e.address)?t:"",i}};function createBaseClientConfiguration(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0}}const ClientConfiguration={encode(e,t=minimal.Writer.create()){return void 0!==e.video&&VideoConfiguration.encode(e.video,t.uint32(10).fork()).ldelim(),void 0!==e.screen&&VideoConfiguration.encode(e.screen,t.uint32(18).fork()).ldelim(),0!==e.resumeConnection&&t.uint32(24).int32(e.resumeConnection),void 0!==e.disabledCodecs&&DisabledCodecs.encode(e.disabledCodecs,t.uint32(34).fork()).ldelim(),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseClientConfiguration();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.video=VideoConfiguration.decode(i,i.uint32());break;case 2:n.screen=VideoConfiguration.decode(i,i.uint32());break;case 3:n.resumeConnection=i.int32();break;case 4:n.disabledCodecs=DisabledCodecs.decode(i,i.uint32());break;default:i.skipType(7&o)}}return n},fromJSON(e){return{video:isSet$1(e.video)?VideoConfiguration.fromJSON(e.video):void 0,screen:isSet$1(e.screen)?VideoConfiguration.fromJSON(e.screen):void 0,resumeConnection:isSet$1(e.resumeConnection)?clientConfigSettingFromJSON(e.resumeConnection):0,disabledCodecs:isSet$1(e.disabledCodecs)?DisabledCodecs.fromJSON(e.disabledCodecs):void 0}},toJSON(e){const t={};return void 0!==e.video&&(t.video=e.video?VideoConfiguration.toJSON(e.video):void 0),void 0!==e.screen&&(t.screen=e.screen?VideoConfiguration.toJSON(e.screen):void 0),void 0!==e.resumeConnection&&(t.resumeConnection=clientConfigSettingToJSON(e.resumeConnection)),void 0!==e.disabledCodecs&&(t.disabledCodecs=e.disabledCodecs?DisabledCodecs.toJSON(e.disabledCodecs):void 0),t},fromPartial(e){var t;const i=createBaseClientConfiguration();return i.video=void 0!==e.video&&null!==e.video?VideoConfiguration.fromPartial(e.video):void 0,i.screen=void 0!==e.screen&&null!==e.screen?VideoConfiguration.fromPartial(e.screen):void 0,i.resumeConnection=null!=(t=e.resumeConnection)?t:0,i.disabledCodecs=void 0!==e.disabledCodecs&&null!==e.disabledCodecs?DisabledCodecs.fromPartial(e.disabledCodecs):void 0,i}};function createBaseVideoConfiguration(){return{hardwareEncoder:0}}const VideoConfiguration={encode(e,t=minimal.Writer.create()){return 0!==e.hardwareEncoder&&t.uint32(8).int32(e.hardwareEncoder),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseVideoConfiguration();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.hardwareEncoder=i.int32():i.skipType(7&o)}return n},fromJSON(e){return{hardwareEncoder:isSet$1(e.hardwareEncoder)?clientConfigSettingFromJSON(e.hardwareEncoder):0}},toJSON(e){const t={};return void 0!==e.hardwareEncoder&&(t.hardwareEncoder=clientConfigSettingToJSON(e.hardwareEncoder)),t},fromPartial(e){const t=createBaseVideoConfiguration();return t.hardwareEncoder=null!=(e=e.hardwareEncoder)?e:0,t}};function createBaseDisabledCodecs(){return{codecs:[]}}const DisabledCodecs={encode(e,t=minimal.Writer.create()){for(const i of e.codecs)Codec.encode(i,t.uint32(10).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseDisabledCodecs();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.codecs.push(Codec.decode(i,i.uint32())):i.skipType(7&o)}return n},fromJSON(e){return{codecs:Array.isArray(null==e?void 0:e.codecs)?e.codecs.map(e=>Codec.fromJSON(e)):[]}},toJSON(e){const t={};return e.codecs?t.codecs=e.codecs.map(e=>e?Codec.toJSON(e):void 0):t.codecs=[],t},fromPartial(e){const t=createBaseDisabledCodecs();return t.codecs=(null==(e=e.codecs)?void 0:e.map(e=>Codec.fromPartial(e)))||[],t}};var globalThis$1=(()=>{if(void 0!==globalThis$1)return globalThis$1;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})(),SignalTarget,StreamState,CandidateProtocol,MediaDeviceFailure,RoomEvent,ParticipantEvent,EngineEvent,TrackEvent;const atob$1=globalThis$1.atob||(e=>globalThis$1.Buffer.from(e,"base64").toString("binary"));function bytesFromBase64(e){const t=atob$1(e),i=new Uint8Array(t.length);for(let e=0;e<t.length;++e)i[e]=t.charCodeAt(e);return i}const btoa=globalThis$1.btoa||(e=>globalThis$1.Buffer.from(e,"binary").toString("base64"));function base64FromBytes(e){const t=[];for(const i of e)t.push(String.fromCharCode(i));return btoa(t.join(""))}function longToNumber(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function isSet$1(e){return null!=e}function signalTargetFromJSON(e){switch(e){case 0:case"PUBLISHER":return SignalTarget.PUBLISHER;case 1:case"SUBSCRIBER":return SignalTarget.SUBSCRIBER;default:return SignalTarget.UNRECOGNIZED}}function signalTargetToJSON(e){switch(e){case SignalTarget.PUBLISHER:return"PUBLISHER";case SignalTarget.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}function streamStateFromJSON(e){switch(e){case 0:case"ACTIVE":return StreamState.ACTIVE;case 1:case"PAUSED":return StreamState.PAUSED;default:return StreamState.UNRECOGNIZED}}function streamStateToJSON(e){switch(e){case StreamState.ACTIVE:return"ACTIVE";case StreamState.PAUSED:return"PAUSED";default:return"UNKNOWN"}}function candidateProtocolFromJSON(e){switch(e){case 0:case"UDP":return CandidateProtocol.UDP;case 1:case"TCP":return CandidateProtocol.TCP;default:return CandidateProtocol.UNRECOGNIZED}}function candidateProtocolToJSON(e){switch(e){case CandidateProtocol.UDP:return"UDP";case CandidateProtocol.TCP:return"TCP";default:return"UNKNOWN"}}function createBaseSignalRequest(){return{offer:void 0,answer:void 0,trickle:void 0,addTrack:void 0,mute:void 0,subscription:void 0,trackSetting:void 0,leave:void 0,updateLayers:void 0,subscriptionPermission:void 0,syncState:void 0,simulate:void 0}}minimal.util.Long!==long&&(minimal.util.Long=long,minimal.configure()),!function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(SignalTarget=SignalTarget||{}),!function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(StreamState=StreamState||{}),!function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(CandidateProtocol=CandidateProtocol||{});const SignalRequest={encode(e,t=minimal.Writer.create()){return void 0!==e.offer&&SessionDescription.encode(e.offer,t.uint32(10).fork()).ldelim(),void 0!==e.answer&&SessionDescription.encode(e.answer,t.uint32(18).fork()).ldelim(),void 0!==e.trickle&&TrickleRequest.encode(e.trickle,t.uint32(26).fork()).ldelim(),void 0!==e.addTrack&&AddTrackRequest.encode(e.addTrack,t.uint32(34).fork()).ldelim(),void 0!==e.mute&&MuteTrackRequest.encode(e.mute,t.uint32(42).fork()).ldelim(),void 0!==e.subscription&&UpdateSubscription.encode(e.subscription,t.uint32(50).fork()).ldelim(),void 0!==e.trackSetting&&UpdateTrackSettings.encode(e.trackSetting,t.uint32(58).fork()).ldelim(),void 0!==e.leave&&LeaveRequest.encode(e.leave,t.uint32(66).fork()).ldelim(),void 0!==e.updateLayers&&UpdateVideoLayers.encode(e.updateLayers,t.uint32(82).fork()).ldelim(),void 0!==e.subscriptionPermission&&SubscriptionPermission.encode(e.subscriptionPermission,t.uint32(90).fork()).ldelim(),void 0!==e.syncState&&SyncState.encode(e.syncState,t.uint32(98).fork()).ldelim(),void 0!==e.simulate&&SimulateScenario.encode(e.simulate,t.uint32(106).fork()).ldelim(),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSignalRequest();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.offer=SessionDescription.decode(i,i.uint32());break;case 2:n.answer=SessionDescription.decode(i,i.uint32());break;case 3:n.trickle=TrickleRequest.decode(i,i.uint32());break;case 4:n.addTrack=AddTrackRequest.decode(i,i.uint32());break;case 5:n.mute=MuteTrackRequest.decode(i,i.uint32());break;case 6:n.subscription=UpdateSubscription.decode(i,i.uint32());break;case 7:n.trackSetting=UpdateTrackSettings.decode(i,i.uint32());break;case 8:n.leave=LeaveRequest.decode(i,i.uint32());break;case 10:n.updateLayers=UpdateVideoLayers.decode(i,i.uint32());break;case 11:n.subscriptionPermission=SubscriptionPermission.decode(i,i.uint32());break;case 12:n.syncState=SyncState.decode(i,i.uint32());break;case 13:n.simulate=SimulateScenario.decode(i,i.uint32());break;default:i.skipType(7&o)}}return n},fromJSON(e){return{offer:isSet(e.offer)?SessionDescription.fromJSON(e.offer):void 0,answer:isSet(e.answer)?SessionDescription.fromJSON(e.answer):void 0,trickle:isSet(e.trickle)?TrickleRequest.fromJSON(e.trickle):void 0,addTrack:isSet(e.addTrack)?AddTrackRequest.fromJSON(e.addTrack):void 0,mute:isSet(e.mute)?MuteTrackRequest.fromJSON(e.mute):void 0,subscription:isSet(e.subscription)?UpdateSubscription.fromJSON(e.subscription):void 0,trackSetting:isSet(e.trackSetting)?UpdateTrackSettings.fromJSON(e.trackSetting):void 0,leave:isSet(e.leave)?LeaveRequest.fromJSON(e.leave):void 0,updateLayers:isSet(e.updateLayers)?UpdateVideoLayers.fromJSON(e.updateLayers):void 0,subscriptionPermission:isSet(e.subscriptionPermission)?SubscriptionPermission.fromJSON(e.subscriptionPermission):void 0,syncState:isSet(e.syncState)?SyncState.fromJSON(e.syncState):void 0,simulate:isSet(e.simulate)?SimulateScenario.fromJSON(e.simulate):void 0}},toJSON(e){const t={};return void 0!==e.offer&&(t.offer=e.offer?SessionDescription.toJSON(e.offer):void 0),void 0!==e.answer&&(t.answer=e.answer?SessionDescription.toJSON(e.answer):void 0),void 0!==e.trickle&&(t.trickle=e.trickle?TrickleRequest.toJSON(e.trickle):void 0),void 0!==e.addTrack&&(t.addTrack=e.addTrack?AddTrackRequest.toJSON(e.addTrack):void 0),void 0!==e.mute&&(t.mute=e.mute?MuteTrackRequest.toJSON(e.mute):void 0),void 0!==e.subscription&&(t.subscription=e.subscription?UpdateSubscription.toJSON(e.subscription):void 0),void 0!==e.trackSetting&&(t.trackSetting=e.trackSetting?UpdateTrackSettings.toJSON(e.trackSetting):void 0),void 0!==e.leave&&(t.leave=e.leave?LeaveRequest.toJSON(e.leave):void 0),void 0!==e.updateLayers&&(t.updateLayers=e.updateLayers?UpdateVideoLayers.toJSON(e.updateLayers):void 0),void 0!==e.subscriptionPermission&&(t.subscriptionPermission=e.subscriptionPermission?SubscriptionPermission.toJSON(e.subscriptionPermission):void 0),void 0!==e.syncState&&(t.syncState=e.syncState?SyncState.toJSON(e.syncState):void 0),void 0!==e.simulate&&(t.simulate=e.simulate?SimulateScenario.toJSON(e.simulate):void 0),t},fromPartial(e){const t=createBaseSignalRequest();return t.offer=void 0!==e.offer&&null!==e.offer?SessionDescription.fromPartial(e.offer):void 0,t.answer=void 0!==e.answer&&null!==e.answer?SessionDescription.fromPartial(e.answer):void 0,t.trickle=void 0!==e.trickle&&null!==e.trickle?TrickleRequest.fromPartial(e.trickle):void 0,t.addTrack=void 0!==e.addTrack&&null!==e.addTrack?AddTrackRequest.fromPartial(e.addTrack):void 0,t.mute=void 0!==e.mute&&null!==e.mute?MuteTrackRequest.fromPartial(e.mute):void 0,t.subscription=void 0!==e.subscription&&null!==e.subscription?UpdateSubscription.fromPartial(e.subscription):void 0,t.trackSetting=void 0!==e.trackSetting&&null!==e.trackSetting?UpdateTrackSettings.fromPartial(e.trackSetting):void 0,t.leave=void 0!==e.leave&&null!==e.leave?LeaveRequest.fromPartial(e.leave):void 0,t.updateLayers=void 0!==e.updateLayers&&null!==e.updateLayers?UpdateVideoLayers.fromPartial(e.updateLayers):void 0,t.subscriptionPermission=void 0!==e.subscriptionPermission&&null!==e.subscriptionPermission?SubscriptionPermission.fromPartial(e.subscriptionPermission):void 0,t.syncState=void 0!==e.syncState&&null!==e.syncState?SyncState.fromPartial(e.syncState):void 0,t.simulate=void 0!==e.simulate&&null!==e.simulate?SimulateScenario.fromPartial(e.simulate):void 0,t}};function createBaseSignalResponse(){return{join:void 0,answer:void 0,offer:void 0,trickle:void 0,update:void 0,trackPublished:void 0,leave:void 0,mute:void 0,speakersChanged:void 0,roomUpdate:void 0,connectionQuality:void 0,streamStateUpdate:void 0,subscribedQualityUpdate:void 0,subscriptionPermissionUpdate:void 0,refreshToken:void 0,trackUnpublished:void 0}}const SignalResponse={encode(e,t=minimal.Writer.create()){return void 0!==e.join&&JoinResponse.encode(e.join,t.uint32(10).fork()).ldelim(),void 0!==e.answer&&SessionDescription.encode(e.answer,t.uint32(18).fork()).ldelim(),void 0!==e.offer&&SessionDescription.encode(e.offer,t.uint32(26).fork()).ldelim(),void 0!==e.trickle&&TrickleRequest.encode(e.trickle,t.uint32(34).fork()).ldelim(),void 0!==e.update&&ParticipantUpdate.encode(e.update,t.uint32(42).fork()).ldelim(),void 0!==e.trackPublished&&TrackPublishedResponse.encode(e.trackPublished,t.uint32(50).fork()).ldelim(),void 0!==e.leave&&LeaveRequest.encode(e.leave,t.uint32(66).fork()).ldelim(),void 0!==e.mute&&MuteTrackRequest.encode(e.mute,t.uint32(74).fork()).ldelim(),void 0!==e.speakersChanged&&SpeakersChanged.encode(e.speakersChanged,t.uint32(82).fork()).ldelim(),void 0!==e.roomUpdate&&RoomUpdate.encode(e.roomUpdate,t.uint32(90).fork()).ldelim(),void 0!==e.connectionQuality&&ConnectionQualityUpdate.encode(e.connectionQuality,t.uint32(98).fork()).ldelim(),void 0!==e.streamStateUpdate&&StreamStateUpdate.encode(e.streamStateUpdate,t.uint32(106).fork()).ldelim(),void 0!==e.subscribedQualityUpdate&&SubscribedQualityUpdate.encode(e.subscribedQualityUpdate,t.uint32(114).fork()).ldelim(),void 0!==e.subscriptionPermissionUpdate&&SubscriptionPermissionUpdate.encode(e.subscriptionPermissionUpdate,t.uint32(122).fork()).ldelim(),void 0!==e.refreshToken&&t.uint32(130).string(e.refreshToken),void 0!==e.trackUnpublished&&TrackUnpublishedResponse.encode(e.trackUnpublished,t.uint32(138).fork()).ldelim(),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSignalResponse();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.join=JoinResponse.decode(i,i.uint32());break;case 2:n.answer=SessionDescription.decode(i,i.uint32());break;case 3:n.offer=SessionDescription.decode(i,i.uint32());break;case 4:n.trickle=TrickleRequest.decode(i,i.uint32());break;case 5:n.update=ParticipantUpdate.decode(i,i.uint32());break;case 6:n.trackPublished=TrackPublishedResponse.decode(i,i.uint32());break;case 8:n.leave=LeaveRequest.decode(i,i.uint32());break;case 9:n.mute=MuteTrackRequest.decode(i,i.uint32());break;case 10:n.speakersChanged=SpeakersChanged.decode(i,i.uint32());break;case 11:n.roomUpdate=RoomUpdate.decode(i,i.uint32());break;case 12:n.connectionQuality=ConnectionQualityUpdate.decode(i,i.uint32());break;case 13:n.streamStateUpdate=StreamStateUpdate.decode(i,i.uint32());break;case 14:n.subscribedQualityUpdate=SubscribedQualityUpdate.decode(i,i.uint32());break;case 15:n.subscriptionPermissionUpdate=SubscriptionPermissionUpdate.decode(i,i.uint32());break;case 16:n.refreshToken=i.string();break;case 17:n.trackUnpublished=TrackUnpublishedResponse.decode(i,i.uint32());break;default:i.skipType(7&o)}}return n},fromJSON(e){return{join:isSet(e.join)?JoinResponse.fromJSON(e.join):void 0,answer:isSet(e.answer)?SessionDescription.fromJSON(e.answer):void 0,offer:isSet(e.offer)?SessionDescription.fromJSON(e.offer):void 0,trickle:isSet(e.trickle)?TrickleRequest.fromJSON(e.trickle):void 0,update:isSet(e.update)?ParticipantUpdate.fromJSON(e.update):void 0,trackPublished:isSet(e.trackPublished)?TrackPublishedResponse.fromJSON(e.trackPublished):void 0,leave:isSet(e.leave)?LeaveRequest.fromJSON(e.leave):void 0,mute:isSet(e.mute)?MuteTrackRequest.fromJSON(e.mute):void 0,speakersChanged:isSet(e.speakersChanged)?SpeakersChanged.fromJSON(e.speakersChanged):void 0,roomUpdate:isSet(e.roomUpdate)?RoomUpdate.fromJSON(e.roomUpdate):void 0,connectionQuality:isSet(e.connectionQuality)?ConnectionQualityUpdate.fromJSON(e.connectionQuality):void 0,streamStateUpdate:isSet(e.streamStateUpdate)?StreamStateUpdate.fromJSON(e.streamStateUpdate):void 0,subscribedQualityUpdate:isSet(e.subscribedQualityUpdate)?SubscribedQualityUpdate.fromJSON(e.subscribedQualityUpdate):void 0,subscriptionPermissionUpdate:isSet(e.subscriptionPermissionUpdate)?SubscriptionPermissionUpdate.fromJSON(e.subscriptionPermissionUpdate):void 0,refreshToken:isSet(e.refreshToken)?String(e.refreshToken):void 0,trackUnpublished:isSet(e.trackUnpublished)?TrackUnpublishedResponse.fromJSON(e.trackUnpublished):void 0}},toJSON(e){const t={};return void 0!==e.join&&(t.join=e.join?JoinResponse.toJSON(e.join):void 0),void 0!==e.answer&&(t.answer=e.answer?SessionDescription.toJSON(e.answer):void 0),void 0!==e.offer&&(t.offer=e.offer?SessionDescription.toJSON(e.offer):void 0),void 0!==e.trickle&&(t.trickle=e.trickle?TrickleRequest.toJSON(e.trickle):void 0),void 0!==e.update&&(t.update=e.update?ParticipantUpdate.toJSON(e.update):void 0),void 0!==e.trackPublished&&(t.trackPublished=e.trackPublished?TrackPublishedResponse.toJSON(e.trackPublished):void 0),void 0!==e.leave&&(t.leave=e.leave?LeaveRequest.toJSON(e.leave):void 0),void 0!==e.mute&&(t.mute=e.mute?MuteTrackRequest.toJSON(e.mute):void 0),void 0!==e.speakersChanged&&(t.speakersChanged=e.speakersChanged?SpeakersChanged.toJSON(e.speakersChanged):void 0),void 0!==e.roomUpdate&&(t.roomUpdate=e.roomUpdate?RoomUpdate.toJSON(e.roomUpdate):void 0),void 0!==e.connectionQuality&&(t.connectionQuality=e.connectionQuality?ConnectionQualityUpdate.toJSON(e.connectionQuality):void 0),void 0!==e.streamStateUpdate&&(t.streamStateUpdate=e.streamStateUpdate?StreamStateUpdate.toJSON(e.streamStateUpdate):void 0),void 0!==e.subscribedQualityUpdate&&(t.subscribedQualityUpdate=e.subscribedQualityUpdate?SubscribedQualityUpdate.toJSON(e.subscribedQualityUpdate):void 0),void 0!==e.subscriptionPermissionUpdate&&(t.subscriptionPermissionUpdate=e.subscriptionPermissionUpdate?SubscriptionPermissionUpdate.toJSON(e.subscriptionPermissionUpdate):void 0),void 0!==e.refreshToken&&(t.refreshToken=e.refreshToken),void 0!==e.trackUnpublished&&(t.trackUnpublished=e.trackUnpublished?TrackUnpublishedResponse.toJSON(e.trackUnpublished):void 0),t},fromPartial(e){var t;const i=createBaseSignalResponse();return i.join=void 0!==e.join&&null!==e.join?JoinResponse.fromPartial(e.join):void 0,i.answer=void 0!==e.answer&&null!==e.answer?SessionDescription.fromPartial(e.answer):void 0,i.offer=void 0!==e.offer&&null!==e.offer?SessionDescription.fromPartial(e.offer):void 0,i.trickle=void 0!==e.trickle&&null!==e.trickle?TrickleRequest.fromPartial(e.trickle):void 0,i.update=void 0!==e.update&&null!==e.update?ParticipantUpdate.fromPartial(e.update):void 0,i.trackPublished=void 0!==e.trackPublished&&null!==e.trackPublished?TrackPublishedResponse.fromPartial(e.trackPublished):void 0,i.leave=void 0!==e.leave&&null!==e.leave?LeaveRequest.fromPartial(e.leave):void 0,i.mute=void 0!==e.mute&&null!==e.mute?MuteTrackRequest.fromPartial(e.mute):void 0,i.speakersChanged=void 0!==e.speakersChanged&&null!==e.speakersChanged?SpeakersChanged.fromPartial(e.speakersChanged):void 0,i.roomUpdate=void 0!==e.roomUpdate&&null!==e.roomUpdate?RoomUpdate.fromPartial(e.roomUpdate):void 0,i.connectionQuality=void 0!==e.connectionQuality&&null!==e.connectionQuality?ConnectionQualityUpdate.fromPartial(e.connectionQuality):void 0,i.streamStateUpdate=void 0!==e.streamStateUpdate&&null!==e.streamStateUpdate?StreamStateUpdate.fromPartial(e.streamStateUpdate):void 0,i.subscribedQualityUpdate=void 0!==e.subscribedQualityUpdate&&null!==e.subscribedQualityUpdate?SubscribedQualityUpdate.fromPartial(e.subscribedQualityUpdate):void 0,i.subscriptionPermissionUpdate=void 0!==e.subscriptionPermissionUpdate&&null!==e.subscriptionPermissionUpdate?SubscriptionPermissionUpdate.fromPartial(e.subscriptionPermissionUpdate):void 0,i.refreshToken=null!=(t=e.refreshToken)?t:void 0,i.trackUnpublished=void 0!==e.trackUnpublished&&null!==e.trackUnpublished?TrackUnpublishedResponse.fromPartial(e.trackUnpublished):void 0,i}};function createBaseSimulcastCodec(){return{codec:"",cid:"",enableSimulcastLayers:!1}}const SimulcastCodec={encode(e,t=minimal.Writer.create()){return""!==e.codec&&t.uint32(10).string(e.codec),""!==e.cid&&t.uint32(18).string(e.cid),!0===e.enableSimulcastLayers&&t.uint32(24).bool(e.enableSimulcastLayers),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSimulcastCodec();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.codec=i.string();break;case 2:n.cid=i.string();break;case 3:n.enableSimulcastLayers=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",cid:isSet(e.cid)?String(e.cid):"",enableSimulcastLayers:!!isSet(e.enableSimulcastLayers)&&Boolean(e.enableSimulcastLayers)}},toJSON(e){const t={};return void 0!==e.codec&&(t.codec=e.codec),void 0!==e.cid&&(t.cid=e.cid),void 0!==e.enableSimulcastLayers&&(t.enableSimulcastLayers=e.enableSimulcastLayers),t},fromPartial(e){var t;const i=createBaseSimulcastCodec();return i.codec=null!=(t=e.codec)?t:"",i.cid=null!=(t=e.cid)?t:"",i.enableSimulcastLayers=null!=(t=e.enableSimulcastLayers)&&t,i}};function createBaseAddTrackRequest(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:""}}const AddTrackRequest={encode(e,t=minimal.Writer.create()){""!==e.cid&&t.uint32(10).string(e.cid),""!==e.name&&t.uint32(18).string(e.name),0!==e.type&&t.uint32(24).int32(e.type),0!==e.width&&t.uint32(32).uint32(e.width),0!==e.height&&t.uint32(40).uint32(e.height),!0===e.muted&&t.uint32(48).bool(e.muted),!0===e.disableDtx&&t.uint32(56).bool(e.disableDtx),0!==e.source&&t.uint32(64).int32(e.source);for(const i of e.layers)VideoLayer.encode(i,t.uint32(74).fork()).ldelim();for(const r of e.simulcastCodecs)SimulcastCodec.encode(r,t.uint32(82).fork()).ldelim();return""!==e.sid&&t.uint32(90).string(e.sid),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseAddTrackRequest();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.cid=i.string();break;case 2:n.name=i.string();break;case 3:n.type=i.int32();break;case 4:n.width=i.uint32();break;case 5:n.height=i.uint32();break;case 6:n.muted=i.bool();break;case 7:n.disableDtx=i.bool();break;case 8:n.source=i.int32();break;case 9:n.layers.push(VideoLayer.decode(i,i.uint32()));break;case 10:n.simulcastCodecs.push(SimulcastCodec.decode(i,i.uint32()));break;case 11:n.sid=i.string();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",name:isSet(e.name)?String(e.name):"",type:isSet(e.type)?trackTypeFromJSON(e.type):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,muted:!!isSet(e.muted)&&Boolean(e.muted),disableDtx:!!isSet(e.disableDtx)&&Boolean(e.disableDtx),source:isSet(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(null==e?void 0:e.layers)?e.layers.map(e=>VideoLayer.fromJSON(e)):[],simulcastCodecs:Array.isArray(null==e?void 0:e.simulcastCodecs)?e.simulcastCodecs.map(e=>SimulcastCodec.fromJSON(e)):[],sid:isSet(e.sid)?String(e.sid):""}},toJSON(e){const t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.name&&(t.name=e.name),void 0!==e.type&&(t.type=trackTypeToJSON(e.type)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.disableDtx&&(t.disableDtx=e.disableDtx),void 0!==e.source&&(t.source=trackSourceToJSON(e.source)),e.layers?t.layers=e.layers.map(e=>e?VideoLayer.toJSON(e):void 0):t.layers=[],e.simulcastCodecs?t.simulcastCodecs=e.simulcastCodecs.map(e=>e?SimulcastCodec.toJSON(e):void 0):t.simulcastCodecs=[],void 0!==e.sid&&(t.sid=e.sid),t},fromPartial(e){var t;const i=createBaseAddTrackRequest();return i.cid=null!=(t=e.cid)?t:"",i.name=null!=(t=e.name)?t:"",i.type=null!=(t=e.type)?t:0,i.width=null!=(t=e.width)?t:0,i.height=null!=(t=e.height)?t:0,i.muted=null!=(t=e.muted)&&t,i.disableDtx=null!=(t=e.disableDtx)&&t,i.source=null!=(t=e.source)?t:0,i.layers=(null==(t=e.layers)?void 0:t.map(e=>VideoLayer.fromPartial(e)))||[],i.simulcastCodecs=(null==(t=e.simulcastCodecs)?void 0:t.map(e=>SimulcastCodec.fromPartial(e)))||[],i.sid=null!=(t=e.sid)?t:"",i}};function createBaseTrickleRequest(){return{candidateInit:"",target:0}}const TrickleRequest={encode(e,t=minimal.Writer.create()){return""!==e.candidateInit&&t.uint32(10).string(e.candidateInit),0!==e.target&&t.uint32(16).int32(e.target),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseTrickleRequest();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.candidateInit=i.string();break;case 2:n.target=i.int32();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{candidateInit:isSet(e.candidateInit)?String(e.candidateInit):"",target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const t={};return void 0!==e.candidateInit&&(t.candidateInit=e.candidateInit),void 0!==e.target&&(t.target=signalTargetToJSON(e.target)),t},fromPartial(e){var t;const i=createBaseTrickleRequest();return i.candidateInit=null!=(t=e.candidateInit)?t:"",i.target=null!=(t=e.target)?t:0,i}};function createBaseMuteTrackRequest(){return{sid:"",muted:!1}}const MuteTrackRequest={encode(e,t=minimal.Writer.create()){return""!==e.sid&&t.uint32(10).string(e.sid),!0===e.muted&&t.uint32(16).bool(e.muted),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseMuteTrackRequest();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.sid=i.string();break;case 2:n.muted=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{sid:isSet(e.sid)?String(e.sid):"",muted:!!isSet(e.muted)&&Boolean(e.muted)}},toJSON(e){const t={};return void 0!==e.sid&&(t.sid=e.sid),void 0!==e.muted&&(t.muted=e.muted),t},fromPartial(e){var t;const i=createBaseMuteTrackRequest();return i.sid=null!=(t=e.sid)?t:"",i.muted=null!=(t=e.muted)&&t,i}};function createBaseJoinResponse(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:""}}const JoinResponse={encode(e,t=minimal.Writer.create()){void 0!==e.room&&Room$1.encode(e.room,t.uint32(10).fork()).ldelim(),void 0!==e.participant&&ParticipantInfo.encode(e.participant,t.uint32(18).fork()).ldelim();for(const i of e.otherParticipants)ParticipantInfo.encode(i,t.uint32(26).fork()).ldelim();""!==e.serverVersion&&t.uint32(34).string(e.serverVersion);for(const r of e.iceServers)ICEServer.encode(r,t.uint32(42).fork()).ldelim();return!0===e.subscriberPrimary&&t.uint32(48).bool(e.subscriberPrimary),""!==e.alternativeUrl&&t.uint32(58).string(e.alternativeUrl),void 0!==e.clientConfiguration&&ClientConfiguration.encode(e.clientConfiguration,t.uint32(66).fork()).ldelim(),""!==e.serverRegion&&t.uint32(74).string(e.serverRegion),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseJoinResponse();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.room=Room$1.decode(i,i.uint32());break;case 2:n.participant=ParticipantInfo.decode(i,i.uint32());break;case 3:n.otherParticipants.push(ParticipantInfo.decode(i,i.uint32()));break;case 4:n.serverVersion=i.string();break;case 5:n.iceServers.push(ICEServer.decode(i,i.uint32()));break;case 6:n.subscriberPrimary=i.bool();break;case 7:n.alternativeUrl=i.string();break;case 8:n.clientConfiguration=ClientConfiguration.decode(i,i.uint32());break;case 9:n.serverRegion=i.string();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0,participant:isSet(e.participant)?ParticipantInfo.fromJSON(e.participant):void 0,otherParticipants:Array.isArray(null==e?void 0:e.otherParticipants)?e.otherParticipants.map(e=>ParticipantInfo.fromJSON(e)):[],serverVersion:isSet(e.serverVersion)?String(e.serverVersion):"",iceServers:Array.isArray(null==e?void 0:e.iceServers)?e.iceServers.map(e=>ICEServer.fromJSON(e)):[],subscriberPrimary:!!isSet(e.subscriberPrimary)&&Boolean(e.subscriberPrimary),alternativeUrl:isSet(e.alternativeUrl)?String(e.alternativeUrl):"",clientConfiguration:isSet(e.clientConfiguration)?ClientConfiguration.fromJSON(e.clientConfiguration):void 0,serverRegion:isSet(e.serverRegion)?String(e.serverRegion):""}},toJSON(e){const t={};return void 0!==e.room&&(t.room=e.room?Room$1.toJSON(e.room):void 0),void 0!==e.participant&&(t.participant=e.participant?ParticipantInfo.toJSON(e.participant):void 0),e.otherParticipants?t.otherParticipants=e.otherParticipants.map(e=>e?ParticipantInfo.toJSON(e):void 0):t.otherParticipants=[],void 0!==e.serverVersion&&(t.serverVersion=e.serverVersion),e.iceServers?t.iceServers=e.iceServers.map(e=>e?ICEServer.toJSON(e):void 0):t.iceServers=[],void 0!==e.subscriberPrimary&&(t.subscriberPrimary=e.subscriberPrimary),void 0!==e.alternativeUrl&&(t.alternativeUrl=e.alternativeUrl),void 0!==e.clientConfiguration&&(t.clientConfiguration=e.clientConfiguration?ClientConfiguration.toJSON(e.clientConfiguration):void 0),void 0!==e.serverRegion&&(t.serverRegion=e.serverRegion),t},fromPartial(e){var t;const i=createBaseJoinResponse();return i.room=void 0!==e.room&&null!==e.room?Room$1.fromPartial(e.room):void 0,i.participant=void 0!==e.participant&&null!==e.participant?ParticipantInfo.fromPartial(e.participant):void 0,i.otherParticipants=(null==(t=e.otherParticipants)?void 0:t.map(e=>ParticipantInfo.fromPartial(e)))||[],i.serverVersion=null!=(t=e.serverVersion)?t:"",i.iceServers=(null==(t=e.iceServers)?void 0:t.map(e=>ICEServer.fromPartial(e)))||[],i.subscriberPrimary=null!=(t=e.subscriberPrimary)&&t,i.alternativeUrl=null!=(t=e.alternativeUrl)?t:"",i.clientConfiguration=void 0!==e.clientConfiguration&&null!==e.clientConfiguration?ClientConfiguration.fromPartial(e.clientConfiguration):void 0,i.serverRegion=null!=(t=e.serverRegion)?t:"",i}};function createBaseTrackPublishedResponse(){return{cid:"",track:void 0}}const TrackPublishedResponse={encode(e,t=minimal.Writer.create()){return""!==e.cid&&t.uint32(10).string(e.cid),void 0!==e.track&&TrackInfo.encode(e.track,t.uint32(18).fork()).ldelim(),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseTrackPublishedResponse();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.cid=i.string();break;case 2:n.track=TrackInfo.decode(i,i.uint32());break;default:i.skipType(7&o)}}return n},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",track:isSet(e.track)?TrackInfo.fromJSON(e.track):void 0}},toJSON(e){const t={};return void 0!==e.cid&&(t.cid=e.cid),void 0!==e.track&&(t.track=e.track?TrackInfo.toJSON(e.track):void 0),t},fromPartial(e){var t;const i=createBaseTrackPublishedResponse();return i.cid=null!=(t=e.cid)?t:"",i.track=void 0!==e.track&&null!==e.track?TrackInfo.fromPartial(e.track):void 0,i}};function createBaseTrackUnpublishedResponse(){return{trackSid:""}}const TrackUnpublishedResponse={encode(e,t=minimal.Writer.create()){return""!==e.trackSid&&t.uint32(10).string(e.trackSid),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseTrackUnpublishedResponse();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.trackSid=i.string():i.skipType(7&o)}return n},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):""}},toJSON(e){const t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),t},fromPartial(e){const t=createBaseTrackUnpublishedResponse();return t.trackSid=null!=(e=e.trackSid)?e:"",t}};function createBaseSessionDescription(){return{type:"",sdp:""}}const SessionDescription={encode(e,t=minimal.Writer.create()){return""!==e.type&&t.uint32(10).string(e.type),""!==e.sdp&&t.uint32(18).string(e.sdp),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSessionDescription();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.type=i.string();break;case 2:n.sdp=i.string();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{type:isSet(e.type)?String(e.type):"",sdp:isSet(e.sdp)?String(e.sdp):""}},toJSON(e){const t={};return void 0!==e.type&&(t.type=e.type),void 0!==e.sdp&&(t.sdp=e.sdp),t},fromPartial(e){var t;const i=createBaseSessionDescription();return i.type=null!=(t=e.type)?t:"",i.sdp=null!=(t=e.sdp)?t:"",i}};function createBaseParticipantUpdate(){return{participants:[]}}const ParticipantUpdate={encode(e,t=minimal.Writer.create()){for(const i of e.participants)ParticipantInfo.encode(i,t.uint32(10).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseParticipantUpdate();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.participants.push(ParticipantInfo.decode(i,i.uint32())):i.skipType(7&o)}return n},fromJSON(e){return{participants:Array.isArray(null==e?void 0:e.participants)?e.participants.map(e=>ParticipantInfo.fromJSON(e)):[]}},toJSON(e){const t={};return e.participants?t.participants=e.participants.map(e=>e?ParticipantInfo.toJSON(e):void 0):t.participants=[],t},fromPartial(e){const t=createBaseParticipantUpdate();return t.participants=(null==(e=e.participants)?void 0:e.map(e=>ParticipantInfo.fromPartial(e)))||[],t}};function createBaseUpdateSubscription(){return{trackSids:[],subscribe:!1,participantTracks:[]}}const UpdateSubscription={encode(e,t=minimal.Writer.create()){for(const i of e.trackSids)t.uint32(10).string(i);!0===e.subscribe&&t.uint32(16).bool(e.subscribe);for(const r of e.participantTracks)ParticipantTracks.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseUpdateSubscription();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.trackSids.push(i.string());break;case 2:n.subscribe=i.bool();break;case 3:n.participantTracks.push(ParticipantTracks.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map(e=>String(e)):[],subscribe:!!isSet(e.subscribe)&&Boolean(e.subscribe),participantTracks:Array.isArray(null==e?void 0:e.participantTracks)?e.participantTracks.map(e=>ParticipantTracks.fromJSON(e)):[]}},toJSON(e){const t={};return e.trackSids?t.trackSids=e.trackSids.map(e=>e):t.trackSids=[],void 0!==e.subscribe&&(t.subscribe=e.subscribe),e.participantTracks?t.participantTracks=e.participantTracks.map(e=>e?ParticipantTracks.toJSON(e):void 0):t.participantTracks=[],t},fromPartial(e){var t;const i=createBaseUpdateSubscription();return i.trackSids=(null==(t=e.trackSids)?void 0:t.map(e=>e))||[],i.subscribe=null!=(t=e.subscribe)&&t,i.participantTracks=(null==(t=e.participantTracks)?void 0:t.map(e=>ParticipantTracks.fromPartial(e)))||[],i}};function createBaseUpdateTrackSettings(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0}}const UpdateTrackSettings={encode(e,t=minimal.Writer.create()){for(const i of e.trackSids)t.uint32(10).string(i);return!0===e.disabled&&t.uint32(24).bool(e.disabled),0!==e.quality&&t.uint32(32).int32(e.quality),0!==e.width&&t.uint32(40).uint32(e.width),0!==e.height&&t.uint32(48).uint32(e.height),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseUpdateTrackSettings();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.trackSids.push(i.string());break;case 3:n.disabled=i.bool();break;case 4:n.quality=i.int32();break;case 5:n.width=i.uint32();break;case 6:n.height=i.uint32();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map(e=>String(e)):[],disabled:!!isSet(e.disabled)&&Boolean(e.disabled),quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0}},toJSON(e){const t={};return e.trackSids?t.trackSids=e.trackSids.map(e=>e):t.trackSids=[],void 0!==e.disabled&&(t.disabled=e.disabled),void 0!==e.quality&&(t.quality=videoQualityToJSON(e.quality)),void 0!==e.width&&(t.width=Math.round(e.width)),void 0!==e.height&&(t.height=Math.round(e.height)),t},fromPartial(e){var t;const i=createBaseUpdateTrackSettings();return i.trackSids=(null==(t=e.trackSids)?void 0:t.map(e=>e))||[],i.disabled=null!=(t=e.disabled)&&t,i.quality=null!=(t=e.quality)?t:0,i.width=null!=(t=e.width)?t:0,i.height=null!=(t=e.height)?t:0,i}};function createBaseLeaveRequest(){return{canReconnect:!1,reason:0}}const LeaveRequest={encode(e,t=minimal.Writer.create()){return!0===e.canReconnect&&t.uint32(8).bool(e.canReconnect),0!==e.reason&&t.uint32(16).int32(e.reason),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseLeaveRequest();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.canReconnect=i.bool();break;case 2:n.reason=i.int32();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{canReconnect:!!isSet(e.canReconnect)&&Boolean(e.canReconnect),reason:isSet(e.reason)?disconnectReasonFromJSON(e.reason):0}},toJSON(e){const t={};return void 0!==e.canReconnect&&(t.canReconnect=e.canReconnect),void 0!==e.reason&&(t.reason=disconnectReasonToJSON(e.reason)),t},fromPartial(e){var t;const i=createBaseLeaveRequest();return i.canReconnect=null!=(t=e.canReconnect)&&t,i.reason=null!=(t=e.reason)?t:0,i}};function createBaseUpdateVideoLayers(){return{trackSid:"",layers:[]}}const UpdateVideoLayers={encode(e,t=minimal.Writer.create()){""!==e.trackSid&&t.uint32(10).string(e.trackSid);for(const i of e.layers)VideoLayer.encode(i,t.uint32(18).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseUpdateVideoLayers();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.trackSid=i.string();break;case 2:n.layers.push(VideoLayer.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",layers:Array.isArray(null==e?void 0:e.layers)?e.layers.map(e=>VideoLayer.fromJSON(e)):[]}},toJSON(e){const t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),e.layers?t.layers=e.layers.map(e=>e?VideoLayer.toJSON(e):void 0):t.layers=[],t},fromPartial(e){var t;const i=createBaseUpdateVideoLayers();return i.trackSid=null!=(t=e.trackSid)?t:"",i.layers=(null==(t=e.layers)?void 0:t.map(e=>VideoLayer.fromPartial(e)))||[],i}};function createBaseICEServer(){return{urls:[],username:"",credential:""}}const ICEServer={encode(e,t=minimal.Writer.create()){for(const i of e.urls)t.uint32(10).string(i);return""!==e.username&&t.uint32(18).string(e.username),""!==e.credential&&t.uint32(26).string(e.credential),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseICEServer();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.urls.push(i.string());break;case 2:n.username=i.string();break;case 3:n.credential=i.string();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{urls:Array.isArray(null==e?void 0:e.urls)?e.urls.map(e=>String(e)):[],username:isSet(e.username)?String(e.username):"",credential:isSet(e.credential)?String(e.credential):""}},toJSON(e){const t={};return e.urls?t.urls=e.urls.map(e=>e):t.urls=[],void 0!==e.username&&(t.username=e.username),void 0!==e.credential&&(t.credential=e.credential),t},fromPartial(e){var t;const i=createBaseICEServer();return i.urls=(null==(t=e.urls)?void 0:t.map(e=>e))||[],i.username=null!=(t=e.username)?t:"",i.credential=null!=(t=e.credential)?t:"",i}};function createBaseSpeakersChanged(){return{speakers:[]}}const SpeakersChanged={encode(e,t=minimal.Writer.create()){for(const i of e.speakers)SpeakerInfo.encode(i,t.uint32(10).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSpeakersChanged();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.speakers.push(SpeakerInfo.decode(i,i.uint32())):i.skipType(7&o)}return n},fromJSON(e){return{speakers:Array.isArray(null==e?void 0:e.speakers)?e.speakers.map(e=>SpeakerInfo.fromJSON(e)):[]}},toJSON(e){const t={};return e.speakers?t.speakers=e.speakers.map(e=>e?SpeakerInfo.toJSON(e):void 0):t.speakers=[],t},fromPartial(e){const t=createBaseSpeakersChanged();return t.speakers=(null==(e=e.speakers)?void 0:e.map(e=>SpeakerInfo.fromPartial(e)))||[],t}};function createBaseRoomUpdate(){return{room:void 0}}const RoomUpdate={encode(e,t=minimal.Writer.create()){return void 0!==e.room&&Room$1.encode(e.room,t.uint32(10).fork()).ldelim(),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseRoomUpdate();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.room=Room$1.decode(i,i.uint32()):i.skipType(7&o)}return n},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0}},toJSON(e){const t={};return void 0!==e.room&&(t.room=e.room?Room$1.toJSON(e.room):void 0),t},fromPartial(e){const t=createBaseRoomUpdate();return t.room=void 0!==e.room&&null!==e.room?Room$1.fromPartial(e.room):void 0,t}};function createBaseConnectionQualityInfo(){return{participantSid:"",quality:0,score:0}}const ConnectionQualityInfo={encode(e,t=minimal.Writer.create()){return""!==e.participantSid&&t.uint32(10).string(e.participantSid),0!==e.quality&&t.uint32(16).int32(e.quality),0!==e.score&&t.uint32(29).float(e.score),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseConnectionQualityInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.participantSid=i.string();break;case 2:n.quality=i.int32();break;case 3:n.score=i.float();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",quality:isSet(e.quality)?connectionQualityFromJSON(e.quality):0,score:isSet(e.score)?Number(e.score):0}},toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.quality&&(t.quality=connectionQualityToJSON(e.quality)),void 0!==e.score&&(t.score=e.score),t},fromPartial(e){var t;const i=createBaseConnectionQualityInfo();return i.participantSid=null!=(t=e.participantSid)?t:"",i.quality=null!=(t=e.quality)?t:0,i.score=null!=(t=e.score)?t:0,i}};function createBaseConnectionQualityUpdate(){return{updates:[]}}const ConnectionQualityUpdate={encode(e,t=minimal.Writer.create()){for(const i of e.updates)ConnectionQualityInfo.encode(i,t.uint32(10).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseConnectionQualityUpdate();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.updates.push(ConnectionQualityInfo.decode(i,i.uint32())):i.skipType(7&o)}return n},fromJSON(e){return{updates:Array.isArray(null==e?void 0:e.updates)?e.updates.map(e=>ConnectionQualityInfo.fromJSON(e)):[]}},toJSON(e){const t={};return e.updates?t.updates=e.updates.map(e=>e?ConnectionQualityInfo.toJSON(e):void 0):t.updates=[],t},fromPartial(e){const t=createBaseConnectionQualityUpdate();return t.updates=(null==(e=e.updates)?void 0:e.map(e=>ConnectionQualityInfo.fromPartial(e)))||[],t}};function createBaseStreamStateInfo(){return{participantSid:"",trackSid:"",state:0}}const StreamStateInfo={encode(e,t=minimal.Writer.create()){return""!==e.participantSid&&t.uint32(10).string(e.participantSid),""!==e.trackSid&&t.uint32(18).string(e.trackSid),0!==e.state&&t.uint32(24).int32(e.state),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseStreamStateInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.participantSid=i.string();break;case 2:n.trackSid=i.string();break;case 3:n.state=i.int32();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",state:isSet(e.state)?streamStateFromJSON(e.state):0}},toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.trackSid&&(t.trackSid=e.trackSid),void 0!==e.state&&(t.state=streamStateToJSON(e.state)),t},fromPartial(e){var t;const i=createBaseStreamStateInfo();return i.participantSid=null!=(t=e.participantSid)?t:"",i.trackSid=null!=(t=e.trackSid)?t:"",i.state=null!=(t=e.state)?t:0,i}};function createBaseStreamStateUpdate(){return{streamStates:[]}}const StreamStateUpdate={encode(e,t=minimal.Writer.create()){for(const i of e.streamStates)StreamStateInfo.encode(i,t.uint32(10).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseStreamStateUpdate();for(;i.pos<r;){var o=i.uint32();o>>>3==1?n.streamStates.push(StreamStateInfo.decode(i,i.uint32())):i.skipType(7&o)}return n},fromJSON(e){return{streamStates:Array.isArray(null==e?void 0:e.streamStates)?e.streamStates.map(e=>StreamStateInfo.fromJSON(e)):[]}},toJSON(e){const t={};return e.streamStates?t.streamStates=e.streamStates.map(e=>e?StreamStateInfo.toJSON(e):void 0):t.streamStates=[],t},fromPartial(e){const t=createBaseStreamStateUpdate();return t.streamStates=(null==(e=e.streamStates)?void 0:e.map(e=>StreamStateInfo.fromPartial(e)))||[],t}};function createBaseSubscribedQuality(){return{quality:0,enabled:!1}}const SubscribedQuality={encode(e,t=minimal.Writer.create()){return 0!==e.quality&&t.uint32(8).int32(e.quality),!0===e.enabled&&t.uint32(16).bool(e.enabled),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSubscribedQuality();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.quality=i.int32();break;case 2:n.enabled=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,enabled:!!isSet(e.enabled)&&Boolean(e.enabled)}},toJSON(e){const t={};return void 0!==e.quality&&(t.quality=videoQualityToJSON(e.quality)),void 0!==e.enabled&&(t.enabled=e.enabled),t},fromPartial(e){var t;const i=createBaseSubscribedQuality();return i.quality=null!=(t=e.quality)?t:0,i.enabled=null!=(t=e.enabled)&&t,i}};function createBaseSubscribedCodec(){return{codec:"",qualities:[]}}const SubscribedCodec={encode(e,t=minimal.Writer.create()){""!==e.codec&&t.uint32(10).string(e.codec);for(const i of e.qualities)SubscribedQuality.encode(i,t.uint32(18).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSubscribedCodec();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.codec=i.string();break;case 2:n.qualities.push(SubscribedQuality.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",qualities:Array.isArray(null==e?void 0:e.qualities)?e.qualities.map(e=>SubscribedQuality.fromJSON(e)):[]}},toJSON(e){const t={};return void 0!==e.codec&&(t.codec=e.codec),e.qualities?t.qualities=e.qualities.map(e=>e?SubscribedQuality.toJSON(e):void 0):t.qualities=[],t},fromPartial(e){var t;const i=createBaseSubscribedCodec();return i.codec=null!=(t=e.codec)?t:"",i.qualities=(null==(t=e.qualities)?void 0:t.map(e=>SubscribedQuality.fromPartial(e)))||[],i}};function createBaseSubscribedQualityUpdate(){return{trackSid:"",subscribedQualities:[],subscribedCodecs:[]}}const SubscribedQualityUpdate={encode(e,t=minimal.Writer.create()){""!==e.trackSid&&t.uint32(10).string(e.trackSid);for(const i of e.subscribedQualities)SubscribedQuality.encode(i,t.uint32(18).fork()).ldelim();for(const r of e.subscribedCodecs)SubscribedCodec.encode(r,t.uint32(26).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSubscribedQualityUpdate();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.trackSid=i.string();break;case 2:n.subscribedQualities.push(SubscribedQuality.decode(i,i.uint32()));break;case 3:n.subscribedCodecs.push(SubscribedCodec.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",subscribedQualities:Array.isArray(null==e?void 0:e.subscribedQualities)?e.subscribedQualities.map(e=>SubscribedQuality.fromJSON(e)):[],subscribedCodecs:Array.isArray(null==e?void 0:e.subscribedCodecs)?e.subscribedCodecs.map(e=>SubscribedCodec.fromJSON(e)):[]}},toJSON(e){const t={};return void 0!==e.trackSid&&(t.trackSid=e.trackSid),e.subscribedQualities?t.subscribedQualities=e.subscribedQualities.map(e=>e?SubscribedQuality.toJSON(e):void 0):t.subscribedQualities=[],e.subscribedCodecs?t.subscribedCodecs=e.subscribedCodecs.map(e=>e?SubscribedCodec.toJSON(e):void 0):t.subscribedCodecs=[],t},fromPartial(e){var t;const i=createBaseSubscribedQualityUpdate();return i.trackSid=null!=(t=e.trackSid)?t:"",i.subscribedQualities=(null==(t=e.subscribedQualities)?void 0:t.map(e=>SubscribedQuality.fromPartial(e)))||[],i.subscribedCodecs=(null==(t=e.subscribedCodecs)?void 0:t.map(e=>SubscribedCodec.fromPartial(e)))||[],i}};function createBaseTrackPermission(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}const TrackPermission={encode(e,t=minimal.Writer.create()){""!==e.participantSid&&t.uint32(10).string(e.participantSid),!0===e.allTracks&&t.uint32(16).bool(e.allTracks);for(const i of e.trackSids)t.uint32(26).string(i);return""!==e.participantIdentity&&t.uint32(34).string(e.participantIdentity),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseTrackPermission();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.participantSid=i.string();break;case 2:n.allTracks=i.bool();break;case 3:n.trackSids.push(i.string());break;case 4:n.participantIdentity=i.string();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",allTracks:!!isSet(e.allTracks)&&Boolean(e.allTracks),trackSids:Array.isArray(null==e?void 0:e.trackSids)?e.trackSids.map(e=>String(e)):[],participantIdentity:isSet(e.participantIdentity)?String(e.participantIdentity):""}},toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.allTracks&&(t.allTracks=e.allTracks),e.trackSids?t.trackSids=e.trackSids.map(e=>e):t.trackSids=[],void 0!==e.participantIdentity&&(t.participantIdentity=e.participantIdentity),t},fromPartial(e){var t;const i=createBaseTrackPermission();return i.participantSid=null!=(t=e.participantSid)?t:"",i.allTracks=null!=(t=e.allTracks)&&t,i.trackSids=(null==(t=e.trackSids)?void 0:t.map(e=>e))||[],i.participantIdentity=null!=(t=e.participantIdentity)?t:"",i}};function createBaseSubscriptionPermission(){return{allParticipants:!1,trackPermissions:[]}}const SubscriptionPermission={encode(e,t=minimal.Writer.create()){!0===e.allParticipants&&t.uint32(8).bool(e.allParticipants);for(const i of e.trackPermissions)TrackPermission.encode(i,t.uint32(18).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSubscriptionPermission();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.allParticipants=i.bool();break;case 2:n.trackPermissions.push(TrackPermission.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{allParticipants:!!isSet(e.allParticipants)&&Boolean(e.allParticipants),trackPermissions:Array.isArray(null==e?void 0:e.trackPermissions)?e.trackPermissions.map(e=>TrackPermission.fromJSON(e)):[]}},toJSON(e){const t={};return void 0!==e.allParticipants&&(t.allParticipants=e.allParticipants),e.trackPermissions?t.trackPermissions=e.trackPermissions.map(e=>e?TrackPermission.toJSON(e):void 0):t.trackPermissions=[],t},fromPartial(e){var t;const i=createBaseSubscriptionPermission();return i.allParticipants=null!=(t=e.allParticipants)&&t,i.trackPermissions=(null==(t=e.trackPermissions)?void 0:t.map(e=>TrackPermission.fromPartial(e)))||[],i}};function createBaseSubscriptionPermissionUpdate(){return{participantSid:"",trackSid:"",allowed:!1}}const SubscriptionPermissionUpdate={encode(e,t=minimal.Writer.create()){return""!==e.participantSid&&t.uint32(10).string(e.participantSid),""!==e.trackSid&&t.uint32(18).string(e.trackSid),!0===e.allowed&&t.uint32(24).bool(e.allowed),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSubscriptionPermissionUpdate();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.participantSid=i.string();break;case 2:n.trackSid=i.string();break;case 3:n.allowed=i.bool();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",allowed:!!isSet(e.allowed)&&Boolean(e.allowed)}},toJSON(e){const t={};return void 0!==e.participantSid&&(t.participantSid=e.participantSid),void 0!==e.trackSid&&(t.trackSid=e.trackSid),void 0!==e.allowed&&(t.allowed=e.allowed),t},fromPartial(e){var t;const i=createBaseSubscriptionPermissionUpdate();return i.participantSid=null!=(t=e.participantSid)?t:"",i.trackSid=null!=(t=e.trackSid)?t:"",i.allowed=null!=(t=e.allowed)&&t,i}};function createBaseSyncState(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[]}}const SyncState={encode(e,t=minimal.Writer.create()){void 0!==e.answer&&SessionDescription.encode(e.answer,t.uint32(10).fork()).ldelim(),void 0!==e.subscription&&UpdateSubscription.encode(e.subscription,t.uint32(18).fork()).ldelim();for(const i of e.publishTracks)TrackPublishedResponse.encode(i,t.uint32(26).fork()).ldelim();for(const r of e.dataChannels)DataChannelInfo.encode(r,t.uint32(34).fork()).ldelim();return t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSyncState();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.answer=SessionDescription.decode(i,i.uint32());break;case 2:n.subscription=UpdateSubscription.decode(i,i.uint32());break;case 3:n.publishTracks.push(TrackPublishedResponse.decode(i,i.uint32()));break;case 4:n.dataChannels.push(DataChannelInfo.decode(i,i.uint32()));break;default:i.skipType(7&o)}}return n},fromJSON(e){return{answer:isSet(e.answer)?SessionDescription.fromJSON(e.answer):void 0,subscription:isSet(e.subscription)?UpdateSubscription.fromJSON(e.subscription):void 0,publishTracks:Array.isArray(null==e?void 0:e.publishTracks)?e.publishTracks.map(e=>TrackPublishedResponse.fromJSON(e)):[],dataChannels:Array.isArray(null==e?void 0:e.dataChannels)?e.dataChannels.map(e=>DataChannelInfo.fromJSON(e)):[]}},toJSON(e){const t={};return void 0!==e.answer&&(t.answer=e.answer?SessionDescription.toJSON(e.answer):void 0),void 0!==e.subscription&&(t.subscription=e.subscription?UpdateSubscription.toJSON(e.subscription):void 0),e.publishTracks?t.publishTracks=e.publishTracks.map(e=>e?TrackPublishedResponse.toJSON(e):void 0):t.publishTracks=[],e.dataChannels?t.dataChannels=e.dataChannels.map(e=>e?DataChannelInfo.toJSON(e):void 0):t.dataChannels=[],t},fromPartial(e){var t;const i=createBaseSyncState();return i.answer=void 0!==e.answer&&null!==e.answer?SessionDescription.fromPartial(e.answer):void 0,i.subscription=void 0!==e.subscription&&null!==e.subscription?UpdateSubscription.fromPartial(e.subscription):void 0,i.publishTracks=(null==(t=e.publishTracks)?void 0:t.map(e=>TrackPublishedResponse.fromPartial(e)))||[],i.dataChannels=(null==(t=e.dataChannels)?void 0:t.map(e=>DataChannelInfo.fromPartial(e)))||[],i}};function createBaseDataChannelInfo(){return{label:"",id:0,target:0}}const DataChannelInfo={encode(e,t=minimal.Writer.create()){return""!==e.label&&t.uint32(10).string(e.label),0!==e.id&&t.uint32(16).uint32(e.id),0!==e.target&&t.uint32(24).int32(e.target),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseDataChannelInfo();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.label=i.string();break;case 2:n.id=i.uint32();break;case 3:n.target=i.int32();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{label:isSet(e.label)?String(e.label):"",id:isSet(e.id)?Number(e.id):0,target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const t={};return void 0!==e.label&&(t.label=e.label),void 0!==e.id&&(t.id=Math.round(e.id)),void 0!==e.target&&(t.target=signalTargetToJSON(e.target)),t},fromPartial(e){var t;const i=createBaseDataChannelInfo();return i.label=null!=(t=e.label)?t:"",i.id=null!=(t=e.id)?t:0,i.target=null!=(t=e.target)?t:0,i}};function createBaseSimulateScenario(){return{speakerUpdate:void 0,nodeFailure:void 0,migration:void 0,serverLeave:void 0,switchCandidateProtocol:void 0}}const SimulateScenario={encode(e,t=minimal.Writer.create()){return void 0!==e.speakerUpdate&&t.uint32(8).int32(e.speakerUpdate),void 0!==e.nodeFailure&&t.uint32(16).bool(e.nodeFailure),void 0!==e.migration&&t.uint32(24).bool(e.migration),void 0!==e.serverLeave&&t.uint32(32).bool(e.serverLeave),void 0!==e.switchCandidateProtocol&&t.uint32(40).int32(e.switchCandidateProtocol),t},decode(e,t){const i=e instanceof minimal.Reader?e:new minimal.Reader(e);var r=void 0===t?i.len:i.pos+t;const n=createBaseSimulateScenario();for(;i.pos<r;){var o=i.uint32();switch(o>>>3){case 1:n.speakerUpdate=i.int32();break;case 2:n.nodeFailure=i.bool();break;case 3:n.migration=i.bool();break;case 4:n.serverLeave=i.bool();break;case 5:n.switchCandidateProtocol=i.int32();break;default:i.skipType(7&o)}}return n},fromJSON(e){return{speakerUpdate:isSet(e.speakerUpdate)?Number(e.speakerUpdate):void 0,nodeFailure:isSet(e.nodeFailure)?Boolean(e.nodeFailure):void 0,migration:isSet(e.migration)?Boolean(e.migration):void 0,serverLeave:isSet(e.serverLeave)?Boolean(e.serverLeave):void 0,switchCandidateProtocol:isSet(e.switchCandidateProtocol)?candidateProtocolFromJSON(e.switchCandidateProtocol):void 0}},toJSON(e){const t={};return void 0!==e.speakerUpdate&&(t.speakerUpdate=Math.round(e.speakerUpdate)),void 0!==e.nodeFailure&&(t.nodeFailure=e.nodeFailure),void 0!==e.migration&&(t.migration=e.migration),void 0!==e.serverLeave&&(t.serverLeave=e.serverLeave),void 0!==e.switchCandidateProtocol&&(t.switchCandidateProtocol=void 0!==e.switchCandidateProtocol?candidateProtocolToJSON(e.switchCandidateProtocol):void 0),t},fromPartial(e){var t;const i=createBaseSimulateScenario();return i.speakerUpdate=null!=(t=e.speakerUpdate)?t:void 0,i.nodeFailure=null!=(t=e.nodeFailure)?t:void 0,i.migration=null!=(t=e.migration)?t:void 0,i.serverLeave=null!=(t=e.serverLeave)?t:void 0,i.switchCandidateProtocol=null!=(t=e.switchCandidateProtocol)?t:void 0,i}};function isSet(e){return null!=e}minimal.util.Long!==long&&(minimal.util.Long=long,minimal.configure());class LivekitError extends Error{constructor(e,t){super(t||"an error has occured"),this.code=e}}class ConnectionError extends LivekitError{constructor(e){super(1,e)}}class TrackInvalidError extends LivekitError{constructor(e){super(20,e||"Track is invalid")}}class UnsupportedServer extends LivekitError{constructor(e){super(10,e||"Unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(e){super(12,e||"Unexpected connection state")}}!function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"}(MediaDeviceFailure=MediaDeviceFailure||{}),!function(t){t.getFailure=function(e){if(e&&"name"in e)return"NotFoundError"===e.name||"DevicesNotFoundError"===e.name?t.NotFound:"NotAllowedError"===e.name||"PermissionDeniedError"===e.name?t.PermissionDenied:"NotReadableError"===e.name||"TrackStartError"===e.name?t.DeviceInUse:t.Other}}(MediaDeviceFailure=MediaDeviceFailure||{}),!function(e){e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.StateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected"}(RoomEvent=RoomEvent||{}),!function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged"}(ParticipantEvent=ParticipantEvent||{}),!function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived"}(EngineEvent=EngineEvent||{}),!function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged"}(TrackEvent=TrackEvent||{});const monitorFrequency=2e3;function computeBitrate(e,t){if(!t)return 0;let i,r;return"bytesReceived"in e?(i=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(i=e.bytesSent,r=t.bytesSent),void 0===i||void 0===r||void 0===e.timestamp||void 0===t.timestamp?0:8*(i-r)*1e3/(e.timestamp-t.timestamp)}var version$2="1.1.9";const version$1=version$2,protocolVersion=8,separator="|";function unpackStreamId(e){var t=e.split(separator);return 1<t.length?[t[0],e.substr(t[0].length+1)]:[e,""]}function sleep(t){return __awaiter(this,void 0,void 0,function*(){return new Promise(e=>setTimeout(e,t))})}function isFireFox(){return!!isWeb()&&-1!==navigator.userAgent.indexOf("Firefox")}function isSafari(){return!!isWeb()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function isMobile$1(){return!!isWeb()&&/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent)}function isWeb(){return"undefined"!=typeof document}function roDispatchCallback(e){for(const t of e)t.target.handleResize(t)}function ioDispatchCallback(e){for(const t of e)t.target.handleVisibilityChanged(t)}let resizeObserver=null;const getResizeObserver=()=>resizeObserver=resizeObserver||new ResizeObserver(roDispatchCallback);let intersectionObserver=null;const getIntersectionObserver=()=>intersectionObserver=intersectionObserver||new IntersectionObserver(ioDispatchCallback,{root:document,rootMargin:"0px"});function getClientInfo(){return ClientInfo.fromPartial({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version:version$1})}let emptyVideoStreamTrack;function getEmptyVideoStreamTrack(){var e;if(!emptyVideoStreamTrack){const t=document.createElement("canvas"),i=(t.width=16,t.height=16,null!=(e=t.getContext("2d"))&&e.fillRect(0,0,t.width,t.height),t.captureStream());if([emptyVideoStreamTrack]=i.getTracks(),!emptyVideoStreamTrack)throw Error("Could not get empty media stream video track");emptyVideoStreamTrack.enabled=!1}return emptyVideoStreamTrack}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const e=new AudioContext,t=e.createOscillator(),i=e.createMediaStreamDestination();if(t.connect(i),t.start(),[emptyAudioStreamTrack]=i.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack}class Future{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Queue{constructor(e,t){this.maxConcurrent=e||1,this.minCycle=t||0,this.queueRunning=[],this.queueWaiting={},this.lastRun=0}dequeue(t){const e=this.queueRunning;var i=e.findIndex(e=>e.hash===t);if(-1==i)throw"queue desync";var r=e[i];return e.splice(i,1),r}getFirstWaiting(){for(var e of Object.keys(this.queueWaiting).sort((e,t)=>e-t))if(void 0!==this.queueWaiting[e]&&0<this.queueWaiting[e].length)return this.queueWaiting[e]}end(e){const t=this.dequeue(e),i=(t.resolve(),this.getFirstWaiting());if(void 0!==i){const r=i.shift();r.resolve()}}async wait(e,t){t=void 0===t?0:t;let i={hash:e,priority:t};for(null==this.queueWaiting[t]&&(this.queueWaiting[t]=[]),this.queueRunning.length>=this.maxConcurrent&&(i.promise=new Promise(e=>{i.resolve=e}),this.queueWaiting[t].push(i),await i.promise),this.queueRunning.push(i),i.promise=new Promise(e=>{i.resolve=e});Date.now()-this.lastRun<this.minCycle;)await new Promise(e=>setTimeout(e,this.minCycle-Date.now()+this.lastRun));this.lastRun=Date.now()}run(e,t){t=void 0===t?0:t;const i=Symbol();return this.wait(i,t).then(()=>e()).finally(()=>{this.end(i)})}stat(){return{running:this.queueRunning.length,waiting:Object.keys(this.queueWaiting).reduce((e,t)=>e+=this.queueWaiting[t].length,0),last:this.lastRun}}async flush(){for(;0<this.stat().waiting;)for(var e of Object.keys(this.queueWaiting).sort((e,t)=>t-e)){e=this.queueWaiting[e];void 0!==e&&0<e.length&&await e[e.length-1].promise}for(;0<this.queueRunning.length;)await Promise.allSettled(this.queueRunning.map(e=>e.promise))}}const defaultId="default";class DeviceManager{static getInstance(){return void 0===this.instance&&(this.instance=new DeviceManager),this.instance}getDevices(n,o=!0){return __awaiter(this,void 0,void 0,function*(){let t=yield navigator.mediaDevices.enumerateDevices();if(o&&(0===t.length||t.some(e=>{var t=""===e.label,e=!n||e.kind===n;return t&&e}))){const e=yield navigator.mediaDevices.getUserMedia({video:"audioinput"!==n&&"audiooutput"!==n,audio:"videoinput"!==n});t=yield navigator.mediaDevices.enumerateDevices(),e.getTracks().forEach(e=>{e.stop()})}if(1<(t=n?t.filter(e=>e.kind===n):t).length&&t[0].deviceId===defaultId){const r=t[0];for(let e=1;e<t.length;e+=1)if(t[e].groupId===r.groupId){var i=t[0];t[0]=t[e],t[e]=i;break}return t.filter(e=>e!==r)}return t})}normalizeDeviceId(i,r,n){return __awaiter(this,void 0,void 0,function*(){if(r!==defaultId)return r;const e=yield this.getDevices(i);var t=e.find(e=>e.groupId===n&&e.deviceId!==defaultId);return null==t?void 0:t.deviceId})}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];var events$1={exports:{}},R="object"==typeof Reflect?Reflect:null,ReflectApply=R&&"function"==typeof R.apply?R.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},ReflectOwnKeys;function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var ReflectOwnKeys=R&&"function"==typeof R.ownKeys?R.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},NumberIsNaN=Number.isNaN||function(e){return e!=e};function EventEmitter(){EventEmitter.init.call(this)}events$1.exports=EventEmitter,events$1.exports.once=once,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10,AudioPresets,ConnectionQuality;function checkListener(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,i,r){var n,o;return checkListener(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener||i),n=e._events),o=n[t]),void 0===o?(o=n[t]=i,++e._eventsCount):("function"==typeof o?o=n[t]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),0<(n=_getMaxListeners(e))&&o.length>n&&!o.warned&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=o.length,ProcessEmitWarning(r))),e}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,i){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},t=onceWrapper.bind(e);return t.listener=i,e.wrapFn=t}function _listeners(e,t,i){e=e._events;if(void 0===e)return[];e=e[t];return void 0===e?[]:"function"==typeof e?i?[e.listener||e]:[e]:i?unwrapListeners(e):arrayClone(e,e.length)}function listenerCount(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function arrayClone(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function unwrapListeners(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function once(n,o){return new Promise(function(e,t){function i(e){n.removeListener(o,r),t(e)}function r(){"function"==typeof n.removeListener&&n.removeListener("error",i),e([].slice.call(arguments))}eventTargetAgnosticAddListener(n,o,r,{once:!0}),"error"!==o&&addErrorHandlerIfEventEmitter(n,i,{once:!0})})}function addErrorHandlerIfEventEmitter(e,t,i){"function"==typeof e.on&&eventTargetAgnosticAddListener(e,"error",t,i)}function eventTargetAgnosticAddListener(i,r,n,o){if("function"==typeof i.on)o.once?i.once(r,n):i.on(r,n);else{if("function"!=typeof i.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i);i.addEventListener(r,function e(t){o.once&&i.removeEventListener(r,e),n(t)})}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){if((o=0<t.length?t[0]:o)instanceof Error)throw o;r=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw r.context=o,r}var o=n[e];if(void 0===o)return!1;if("function"==typeof o)ReflectApply(o,this,t);else for(var a=o.length,s=arrayClone(o,a),i=0;i<a;++i)ReflectApply(s[i],this,t);return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var i,r,n,o,a;if(checkListener(t),void 0!==(r=this._events)&&void 0!==(i=r[e]))if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,o=i.length-1;0<=o;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():spliceOne(i,n),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(e){var t,i=this._events;if(void 0!==i){if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){for(var r,n=Object.keys(i),o=0;o<n.length;++o)"removeListener"!==(r=n[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o])}return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return 0<this._eventsCount?ReflectOwnKeys(this._events):[]};const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];class Track extends events$1.exports.EventEmitter{constructor(e,t){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),"hidden"===document.visibilityState?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.kind=t,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Track.Source.Unknown,isWeb()?(this.isInBackground="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let e="audio";return this.kind===Track.Kind.Video&&(e="video"),t||("audio"===e&&(recycledElements.forEach(e=>{null!==e.parentElement||t||(t=e)}),t&&recycledElements.splice(recycledElements.indexOf(t),1)),t=t||document.createElement(e)),this.attachedElements.includes(t)||this.attachedElements.push(t),attachToElement(this._mediaStreamTrack,t),t instanceof HTMLAudioElement&&t.play().then(()=>{this.emit(TrackEvent.AudioPlaybackStarted)}).catch(e=>{this.emit(TrackEvent.AudioPlaybackFailed,e)}),this.emit(TrackEvent.ElementAttached,t),t}detach(e){var t;if(e)return detachTrack(this._mediaStreamTrack,e),0<=(t=this.attachedElements.indexOf(e))&&(this.attachedElements.splice(t,1),this.recycleElement(e),this.emit(TrackEvent.ElementDetached,e)),e;const i=[];return this.attachedElements.forEach(e=>{detachTrack(this._mediaStreamTrack,e),i.push(e),this.recycleElement(e),this.emit(TrackEvent.ElementDetached,e)}),this.attachedElements=[],i}stop(){this._mediaStreamTrack.stop(),isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}recycleElement(e){if(e instanceof HTMLAudioElement){let t=!0;e.pause(),recycledElements.forEach(e=>{e.parentElement||(t=!1)}),t&&recycledElements.push(e)}}handleAppVisibilityChanged(){return __awaiter(this,void 0,void 0,function*(){this.isInBackground="hidden"===document.visibilityState})}}function attachToElement(e,t){let i;i=t.srcObject instanceof MediaStream?t.srcObject:new MediaStream;let r;(r="audio"===e.kind?i.getAudioTracks():i.getVideoTracks()).includes(e)||(r.forEach(e=>{i.removeTrack(e)}),i.addTrack(e)),t.srcObject!==i&&(t.srcObject=i,(isSafari()||isFireFox())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=i,t.play().catch(()=>{})},0)),t.autoplay=!0,t instanceof HTMLVideoElement&&(t.playsInline=!0)}function detachTrack(e,t){if(t.srcObject instanceof MediaStream){const i=t.srcObject;i.removeTrack(e),0<i.getTracks().length?t.srcObject=i:t.srcObject=null}}!function(e){let t;var i;(i=t=e.Kind||(e.Kind={})).Audio="audio",i.Video="video",i.Unknown="unknown";let r;(i=r=e.Source||(e.Source={})).Camera="camera",i.Microphone="microphone",i.ScreenShare="screen_share",i.ScreenShareAudio="screen_share_audio",i.Unknown="unknown";let n;(i=n=e.StreamState||(e.StreamState={})).Active="active",i.Paused="paused",i.Unknown="unknown",e.kindToProto=function(e){switch(e){case t.Audio:return TrackType.AUDIO;case t.Video:return TrackType.VIDEO;default:return TrackType.UNRECOGNIZED}},e.kindFromProto=function(e){switch(e){case TrackType.AUDIO:return t.Audio;case TrackType.VIDEO:return t.Video;default:return t.Unknown}},e.sourceToProto=function(e){switch(e){case r.Camera:return TrackSource.CAMERA;case r.Microphone:return TrackSource.MICROPHONE;case r.ScreenShare:return TrackSource.SCREEN_SHARE;case r.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNRECOGNIZED}},e.sourceFromProto=function(e){switch(e){case TrackSource.CAMERA:return r.Camera;case TrackSource.MICROPHONE:return r.Microphone;case TrackSource.SCREEN_SHARE:return r.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return r.ScreenShareAudio;default:return r.Unknown}},e.streamStateFromProto=function(e){switch(e){case StreamState.ACTIVE:return n.Active;case StreamState.PAUSED:return n.Paused;default:return n.Unknown}}}(Track=Track||{});class LocalTrack extends Track{constructor(e,t,i,r=!1){super(e,t),this._isUpstreamPaused=!1,this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this.emit(TrackEvent.Ended,this)},this._mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=null!=i?i:e.getConstraints(),this.reacquireTrack=!1,this.wasMuted=!1,this.providedByUser=r,this.muteQueue=new Queue}get id(){return this._mediaStreamTrack.id}get dimensions(){var e,t;if(this.kind===Track.Kind.Video)return{width:e,height:t}=this._mediaStreamTrack.getSettings(),e&&t?{width:e,height:t}:void 0}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}getDeviceId(){return __awaiter(this,void 0,void 0,function*(){var e,t,i;if(this.source!==Track.Source.ScreenShare)return{deviceId:e,groupId:t}=this._mediaStreamTrack.getSettings(),i=this.kind===Track.Kind.Audio?"audioinput":"videoinput",DeviceManager.getInstance().normalizeDeviceId(i,e,t)})}mute(){return __awaiter(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return __awaiter(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,e=!0){return __awaiter(this,void 0,void 0,function*(){if(this.sender)return this.attachedElements.forEach(e=>{detachTrack(this._mediaStreamTrack,e)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.providedByUser||this._mediaStreamTrack.stop(),t.addEventListener("ended",this.handleEnded),livekitLogger.debug("replace MediaStreamTrack"),this.sender&&(yield this.sender.replaceTrack(t)),this._mediaStreamTrack=t,this.attachedElements.forEach(e=>{attachToElement(t,e)}),this.mediaStream=new MediaStream([t]),this.providedByUser=e,this;throw new TrackInvalidError("unable to replace an unpublished track")})}restart(r){return __awaiter(this,void 0,void 0,function*(){r=r||this.constraints,livekitLogger.debug("restarting track with constraints",r);const e={audio:!1,video:!1},t=(this.kind===Track.Kind.Video?e.video=r:e.audio=r,this.attachedElements.forEach(e=>{detachTrack(this._mediaStreamTrack,e)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop(),yield navigator.mediaDevices.getUserMedia(e)),i=t.getTracks()[0];return i.addEventListener("ended",this.handleEnded),livekitLogger.debug("re-acquired MediaStreamTrack"),this.sender&&(yield this.sender.replaceTrack(i)),this._mediaStreamTrack=i,this.attachedElements.forEach(e=>{attachToElement(i,e)}),this.mediaStream=t,this.constraints=r,this})}setTrackMuted(e){livekitLogger.debug(`setting ${this.kind} track `+(e?"muted":"unmuted")),this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return"live"!==this._mediaStreamTrack.readyState||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),isMobile$1()&&(livekitLogger.debug("visibility changed, is in Background: "+this.isInBackground),this.isInBackground||!this.needsReAcquisition||this.isUserProvided||(livekitLogger.debug("track needs to be reaquired, restarting "+this.source),yield this.restart(),this.reacquireTrack=!1,this.setTrackMuted(this.wasMuted)),this.isInBackground&&(this.wasMuted=this.isMuted))})}pauseUpstream(){return __awaiter(this,void 0,void 0,function*(){this.muteQueue.run(()=>__awaiter(this,void 0,void 0,function*(){var e;!0!==this._isUpstreamPaused&&(this.sender?(this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this),e=(this.kind===Track.Kind.Audio?getEmptyAudioStreamTrack:getEmptyVideoStreamTrack)(),yield this.sender.replaceTrack(e)):livekitLogger.warn("unable to pause upstream for an unpublished track"))}))})}resumeUpstream(){return __awaiter(this,void 0,void 0,function*(){this.muteQueue.run(()=>__awaiter(this,void 0,void 0,function*(){!1!==this._isUpstreamPaused&&(this.sender?(this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)):livekitLogger.warn("unable to resume upstream for an unpublished track"))}))})}}function mergeDefaultOptions(e,t,i){const r=Object.assign({},e);return!0===r.audio&&(r.audio={}),!0===r.video&&(r.video={}),r.audio&&mergeObjectWithoutOverwriting(r.audio,t),r.video&&mergeObjectWithoutOverwriting(r.video,i),r}function mergeObjectWithoutOverwriting(t,i){return Object.keys(i).forEach(e=>{void 0===t[e]&&(t[e]=i[e])}),t}function constraintsForOptions(e){const t={};if(e.video)if("object"==typeof e.video){var i={};const r=i,n=e.video;Object.keys(n).forEach(e=>{"resolution"===e?mergeObjectWithoutOverwriting(r,n.resolution):r[e]=n[e]}),t.video=i}else t.video=e.video;else t.video=!1;return e.audio?"object"==typeof e.audio?t.audio=e.audio:t.audio=!0:t.audio=!1,t}function detectSilence(o,a=200){return __awaiter(this,void 0,void 0,function*(){const e=getNewAudioContext();if(e){const i=e.createAnalyser();i.fftSize=2048;var t=i.frequencyBinCount;const r=new Uint8Array(t),n=e.createMediaStreamSource(new MediaStream([o.mediaStreamTrack]));n.connect(i),yield sleep(a),i.getByteTimeDomainData(r);t=r.some(e=>128!==e&&0!==e);return e.close(),!t}return!1})}function getNewAudioContext(){const e=window.AudioContext||window.webkitAudioContext;if(e)return new e}class LocalAudioTrack extends LocalTrack{constructor(e,t,i=!0){super(e,Track.Kind.Audio,t,i),this.stopOnMute=!1,this.monitorSender=()=>__awaiter(this,void 0,void 0,function*(){if(this.sender){let e;try{e=yield this.getSenderStats()}catch(e){return void livekitLogger.error("could not get audio sender stats",{error:e})}e&&this.prevStats&&(this._currentBitrate=computeBitrate(e,this.prevStats)),this.prevStats=e,setTimeout(()=>{this.monitorSender()},monitorFrequency)}else this._currentBitrate=0}),this.checkForSilence()}setDeviceId(e){return __awaiter(this,void 0,void 0,function*(){this.constraints.deviceId!==e&&(this.constraints.deviceId=e,this.isMuted||(yield this.restartTrack()))})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter(this,void 0,void 0,function*(){return yield this.muteQueue.run(()=>__awaiter(this,void 0,void 0,function*(){this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(livekitLogger.debug("stopping mic track"),this._mediaStreamTrack.stop()),yield e.mute.call(this)})),this})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter(this,void 0,void 0,function*(){return yield this.muteQueue.run(()=>__awaiter(this,void 0,void 0,function*(){this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(livekitLogger.debug("reacquiring mic track"),yield this.restartTrack()),yield e.unmute.call(this)})),this})}restartTrack(i){return __awaiter(this,void 0,void 0,function*(){let e;var t;i&&"boolean"!=typeof(t=constraintsForOptions({audio:i})).audio&&(e=t.audio),yield this.restart(e)})}restart(t){const i=Object.create(null,{restart:{get:()=>super.restart}});return __awaiter(this,void 0,void 0,function*(){var e=yield i.restart.call(this,t);return this.checkForSilence(),e})}startMonitor(){isWeb()&&setTimeout(()=>{this.monitorSender()},monitorFrequency)}getSenderStats(){return __awaiter(this,void 0,void 0,function*(){if(this.sender){const e=yield this.sender.getStats();let t;return e.forEach(e=>{"outbound-rtp"===e.type&&(t={type:"audio",streamId:e.id,packetsSent:e.packetsSent,packetsLost:e.packetsLost,bytesSent:e.bytesSent,timestamp:e.timestamp,roundTripTime:e.roundTripTime,jitter:e.jitter})}),t}})}checkForSilence(){return __awaiter(this,void 0,void 0,function*(){(yield detectSilence(this))&&(this.isMuted||livekitLogger.warn("silence detected on local audio track"),this.emit(TrackEvent.AudioSilenceDetected))})}}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{constructor(e,t,i=!0){super(e,Track.Kind.Video,t,i),this.simulcastCodecs=new Map,this.monitorSender=()=>__awaiter(this,void 0,void 0,function*(){if(this.sender){let e;try{e=yield this.getSenderStats()}catch(e){return void livekitLogger.error("could not get audio sender stats",{error:e})}const t=new Map(e.map(e=>[e.rid,e]));if(this.prevStats){let r=0;t.forEach((e,t)=>{var i=null==(i=this.prevStats)?void 0:i.get(t);r+=computeBitrate(e,i)}),this._currentBitrate=r}this.prevStats=t,setTimeout(()=>{this.monitorSender()},monitorFrequency)}else this._currentBitrate=0})}get isSimulcast(){return!!(this.sender&&1<this.sender.getParameters().encodings.length)}startMonitor(e){this.signalClient=e,isWeb()&&((e=null==(e=this.sender)?void 0:e.getParameters())&&(this.encodings=e.encodings),setTimeout(()=>{this.monitorSender()},monitorFrequency))}stop(){this.sender=void 0,this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop(),e.sender=void 0}),this.simulcastCodecs.clear(),super.stop()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter(this,void 0,void 0,function*(){return yield this.muteQueue.run(()=>__awaiter(this,void 0,void 0,function*(){this.source!==Track.Source.Camera||this.isUserProvided||(livekitLogger.debug("stopping camera track"),this._mediaStreamTrack.stop()),yield e.mute.call(this)})),this})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter(this,void 0,void 0,function*(){return yield this.muteQueue.run(()=>__awaiter(this,void 0,void 0,function*(){this.source!==Track.Source.Camera||this.isUserProvided||(livekitLogger.debug("reacquiring camera track"),yield this.restartTrack()),yield e.unmute.call(this)})),this})}getSenderStats(){return __awaiter(this,void 0,void 0,function*(){if(!this.sender)return[];const r=[],n=yield this.sender.getStats();return n.forEach(e=>{if("outbound-rtp"===e.type){const i={type:"video",streamId:e.id,frameHeight:e.frameHeight,frameWidth:e.frameWidth,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount,packetsSent:e.packetsSent,bytesSent:e.bytesSent,framesSent:e.framesSent,timestamp:e.timestamp,rid:null!=(t=e.rid)?t:e.id,retransmittedPacketsSent:e.retransmittedPacketsSent,qualityLimitationReason:e.qualityLimitationReason,qualityLimitationResolutionChanges:e.qualityLimitationResolutionChanges};var t=n.get(e.remoteId);t&&(i.jitter=t.jitter,i.packetsLost=t.packetsLost,i.roundTripTime=t.roundTripTime),r.push(i)}}),r})}setPublishingQuality(t){const i=[];for(let e=VideoQuality.LOW;e<=VideoQuality.HIGH;e+=1)i.push({quality:e,enabled:e<=t});livekitLogger.debug("setting publishing quality. max quality "+t),this.setPublishingLayers(i)}setDeviceId(e){return __awaiter(this,void 0,void 0,function*(){this.constraints.deviceId!==e&&(this.constraints.deviceId=e,this.isMuted||(yield this.restartTrack()))})}restartTrack(i){return __awaiter(this,void 0,void 0,function*(){let e;var t;i&&"boolean"!=typeof(t=constraintsForOptions({video:i})).video&&(e=t.video),yield this.restart(e)})}addSimulcastTrack(e,t){if(this.simulcastCodecs.has(e))throw new Error(e+" already added");t={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(e,t),t}setSimulcastTrackSender(e,t){const i=this.simulcastCodecs.get(e);i&&(i.sender=t,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}setPublishingCodecs(n){var o,a,s,c;return __awaiter(this,void 0,void 0,function*(){if(livekitLogger.debug("setting publishing codecs",{codecs:n,currentCodec:this.codec}),!this.codec&&0<n.length)return yield this.setPublishingLayers(n[0].qualities),[];this.subscribedCodecs=n;const e=[];try{for(o=__asyncValues(n);!(a=yield o.next()).done;){var t=a.value;if(this.codec&&this.codec!==t.codec){var i=this.simulcastCodecs.get(t.codec);if(livekitLogger.debug("try setPublishingCodec for "+t.codec,i),i&&i.sender)i.encodings&&(livekitLogger.debug("try setPublishingLayersForSender "+t.codec),yield setPublishingLayersForSender(i.sender,i.encodings,t.qualities));else for(const r of t.qualities)if(r.enabled){e.push(t.codec);break}}else yield this.setPublishingLayers(t.qualities)}}catch(e){s={error:e}}finally{try{a&&!a.done&&(c=o.return)&&(yield c.call(o))}finally{if(s)throw s.error}}return e})}setPublishingLayers(e){return __awaiter(this,void 0,void 0,function*(){livekitLogger.debug("setting publishing layers",e),this.sender&&this.encodings&&(yield setPublishingLayersForSender(this.sender,this.encodings,e))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),isMobile$1()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function setPublishingLayersForSender(i,a,s){return __awaiter(this,void 0,void 0,function*(){livekitLogger.debug("setPublishingLayersForSender",{sender:i,qualities:s,senderEncodings:a});const e=i.getParameters(),t=e["encodings"];if(t)if(t.length!==a.length)livekitLogger.warn("cannot set publishing layers, encodings mismatch");else{let o=!1;t.forEach((e,t)=>{let i=null!=(n=e.rid)?n:"";const r=videoQualityForRid(i=""===i?"q":i);var n=s.find(e=>e.quality===r);n&&e.active!==n.enabled&&(o=!0,e.active=n.enabled,livekitLogger.debug(`setting layer ${n.quality} to `+(e.active?"enabled":"disabled")),isFireFox()&&(n.enabled?(e.scaleResolutionDownBy=a[t].scaleResolutionDownBy,e.maxBitrate=a[t].maxBitrate,e.maxFrameRate=a[t].maxFrameRate):(e.scaleResolutionDownBy=4,e.maxBitrate=10,e.maxFrameRate=2)))}),o&&(e.encodings=t,yield i.setParameters(e))}})}function videoQualityForRid(e){switch(e){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.UNRECOGNIZED}}function videoLayersFromEncodings(n,o,a){return a?a.map(e=>{var t,i=null!=(i=e.scaleResolutionDownBy)?i:1;let r=videoQualityForRid(null!=(t=e.rid)?t:"");return{quality:r=r===VideoQuality.UNRECOGNIZED&&1===a.length?VideoQuality.HIGH:r,width:n/i,height:o/i,bitrate:null!=(t=e.maxBitrate)?t:0,ssrc:0}}):[{quality:VideoQuality.HIGH,width:n,height:o,bitrate:0,ssrc:0}]}class RemoteTrack extends Track{constructor(e,t,i,r){super(e,i),this.sid=t,this.receiver=r}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(e){(this.mediaStream=e).onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){super.disable()}startMonitor(){setTimeout(()=>{this.monitorReceiver()},monitorFrequency)}}class RemoteAudioTrack extends RemoteTrack{constructor(e,t,i){super(e,t,Track.Kind.Audio,i),this.monitorReceiver=()=>__awaiter(this,void 0,void 0,function*(){var e;this.receiver?((e=yield this.getReceiverStats())&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(e,this.prevStats)),this.prevStats=e,setTimeout(()=>{this.monitorReceiver()},monitorFrequency)):this._currentBitrate=0}),this.elementVolume=1}setVolume(e){for(const t of this.attachedElements)t.volume=e;this.elementVolume=e}getVolume(){return this.elementVolume}attach(e){return e?super.attach(e):e=super.attach(),e.volume=this.elementVolume,e}getReceiverStats(){return __awaiter(this,void 0,void 0,function*(){if(this.receiver){const e=yield this.receiver.getStats();let t;return e.forEach(e=>{"inbound-rtp"===e.type&&(t={type:"audio",timestamp:e.timestamp,jitter:e.jitter,bytesReceived:e.bytesReceived,concealedSamples:e.concealedSamples,concealmentEvents:e.concealmentEvents,silentConcealedSamples:e.silentConcealedSamples,silentConcealmentEvents:e.silentConcealmentEvents,totalAudioEnergy:e.totalAudioEnergy,totalSamplesDuration:e.totalSamplesDuration})}),t}})}}function r(o,a,e){void 0===a&&(a=50);var t,s,c=null!=(t=(e=void 0===e?{}:e).isImmediate)&&t,l=null!=(t=e.callback)&&t,d=e.maxWait,u=Date.now(),p=[];function i(){var r=[].slice.call(arguments),n=this;return new Promise(function(e,t){var i=c&&void 0===s;if(void 0!==s&&clearTimeout(s),s=setTimeout(function(){var t;s=void 0,u=Date.now(),c||(t=o.apply(n,r),l&&l(t),p.forEach(function(e){return(0,e.resolve)(t)}),p=[])},function(){if(void 0!==d){var e=Date.now()-u;if(d<=e+a)return d-e}return a}()),i)return i=o.apply(n,r),l&&l(i),e(i);p.push({resolve:e,reject:t})})}return i.cancel=function(t){void 0!==s&&clearTimeout(s),p.forEach(function(e){return(0,e.reject)(t)}),p=[]},i}const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(e,t,i,n){super(e,t,Track.Kind.Video,i),this.elementInfos=[],this.hasUsedAttach=!1,this.monitorReceiver=()=>__awaiter(this,void 0,void 0,function*(){var e;this.receiver?((e=yield this.getReceiverStats())&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(e,this.prevStats)),this.prevStats=e,setTimeout(()=>{this.monitorReceiver()},monitorFrequency)):this._currentBitrate=0}),this.debouncedHandleResize=r(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=n,this.isAdaptiveStream&&(this.streamState=Track.StreamState.Paused)}get isAdaptiveStream(){return void 0!==this.adaptiveStreamSettings}get mediaStreamTrack(){return this.isAdaptiveStream&&!this.hasUsedAttach&&livekitLogger.warn("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start"),this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(e=>{(t?detachTrack:attachToElement)(this._mediaStreamTrack,e)})}attach(t){var e;return t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&void 0===this.elementInfos.find(e=>e.element===t)&&(e=new HTMLElementInfo(t),this.observeElementInfo(e)),this.hasUsedAttach=!0,t}observeElementInfo(t){this.adaptiveStreamSettings&&void 0===this.elementInfos.find(e=>e===t)?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):livekitLogger.warn("visibility resize observer not triggered")}stopObservingElementInfo(t){for(const e of this.elementInfos.filter(e=>e===t))e.stopObserving();this.elementInfos=this.elementInfos.filter(e=>e!==t),this.updateVisibility()}detach(e){if(e)return this.stopObservingElement(e),super.detach(e);for(const t of e=super.detach())this.stopObservingElement(t);return e}getDecoderImplementation(){var e;return null==(e=this.prevStats)?void 0:e.decoderImplementation}getReceiverStats(){return __awaiter(this,void 0,void 0,function*(){if(this.receiver){const e=yield this.receiver.getStats();let t;return e.forEach(e=>{"inbound-rtp"===e.type&&(t={type:"video",framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesReceived:e.framesReceived,packetsReceived:e.packetsReceived,packetsLost:e.packetsLost,frameWidth:e.frameWidth,frameHeight:e.frameHeight,pliCount:e.pliCount,firCount:e.firCount,nackCount:e.nackCount,jitter:e.jitter,timestamp:e.timestamp,bytesReceived:e.bytesReceived,decoderImplementation:e.decoderImplementation})}),t}})}stopObservingElement(t){for(const e of this.elementInfos.filter(e=>e.element===t))e.stopObserving();this.elementInfos=this.elementInfos.filter(e=>e.element!==t)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e=this.elementInfos.reduce((e,t)=>Math.max(e,t.visibilityChangedAt||0),0),t=!(null!=(t=null==(t=this.adaptiveStreamSettings)?void 0:t.pauseVideoInBackground)&&!t)&&this.isInBackground,t=this.elementInfos.some(e=>e.visible)&&!t;this.lastVisible!==t&&(!t&&Date.now()-e<REACTION_DELAY?setTimeout(()=>{this.updateVisibility()},REACTION_DELAY):(this.lastVisible=t,this.emit(TrackEvent.VisibilityChanged,t,this)))}updateDimensions(){var e;let t=0,i=0;for(const o of this.elementInfos){var r=null!=(r=null==(r=this.adaptiveStreamSettings)?void 0:r.pixelDensity)?r:1,r="screen"===r?window.devicePixelRatio:r,n=o.width()*r,r=o.height()*r;n+r>t+i&&(t=n,i=r)}(null==(e=this.lastDimensions)?void 0:e.width)===t&&(null==(e=this.lastDimensions)?void 0:e.height)===i||(this.lastDimensions={width:t,height:i},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}class HTMLElementInfo{constructor(e,t){this.onVisibilityChanged=e=>{var{target:e,isIntersecting:t}=e;e===this.element&&(this.visible=t,this.visibilityChangedAt=Date.now(),null!=(e=this.handleVisibilityChanged)&&e.call(this))},this.element=e,this.visible=null!=t?t:isElementInViewport(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.element.handleResize=()=>{var e;null!=(e=this.handleResize)&&e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element)}stopObserving(){var e;null!=(e=getIntersectionObserver())&&e.unobserve(this.element),null!=(e=getResizeObserver())&&e.unobserve(this.element)}}function isElementInViewport(e){let t=e.offsetTop,i=e.offsetLeft;for(var r=e.offsetWidth,n=e.offsetHeight,o=e["hidden"],{opacity:a,display:s}=getComputedStyle(e);e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+n>window.pageYOffset&&i+r>window.pageXOffset&&!o&&(""===a||0<parseFloat(a))&&"none"!==s}class TrackPublication extends events$1.exports.EventEmitter{constructor(e,t,i){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.kind=e,this.trackSid=t,this.trackName=i,this.source=Track.Source.Unknown}setTrack(e){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),(this.track=e)&&(e.on(TrackEvent.Muted,this.handleMuted),e.on(TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return void 0!==this.track}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Track.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Track.Kind.Video&&0<e.width&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.trackInfo=e,livekitLogger.trace("update publication info",{info:e})}}!function(e){(e=e.SubscriptionStatus||(e.SubscriptionStatus={})).Subscribed="subscribed",e.NotAllowed="not_allowed",e.Unsubscribed="unsubscribed"}(TrackPublication=TrackPublication||{});class LocalTrackPublication extends TrackPublication{constructor(e,t,i){super(e,t.sid,t.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(t),this.setTrack(i)}get isUpstreamPaused(){var e;return null==(e=this.track)?void 0:e.isUpstreamPaused}setTrack(e){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var e;return __awaiter(this,void 0,void 0,function*(){return null==(e=this.track)?void 0:e.mute()})}unmute(){var e;return __awaiter(this,void 0,void 0,function*(){return null==(e=this.track)?void 0:e.unmute()})}pauseUpstream(){var e;return __awaiter(this,void 0,void 0,function*(){yield null==(e=this.track)?void 0:e.pauseUpstream()})}resumeUpstream(){var e;return __awaiter(this,void 0,void 0,function*(){yield null==(e=this.track)?void 0:e.resumeUpstream()})}}class VideoPreset{constructor(e,t,i,r){this.width=e,this.height=t,this.encoding={maxBitrate:i,maxFramerate:r}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}!function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3}}(AudioPresets=AudioPresets||{});const VideoPresets={h90:new VideoPreset(160,90,6e4,15),h180:new VideoPreset(320,180,12e4,15),h216:new VideoPreset(384,216,18e4,15),h360:new VideoPreset(640,360,3e5,20),h540:new VideoPreset(960,540,6e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,8e4,15),h180:new VideoPreset(240,180,1e5,15),h240:new VideoPreset(320,240,15e4,15),h360:new VideoPreset(480,360,225e3,20),h480:new VideoPreset(640,480,3e5,20),h540:new VideoPreset(720,540,45e4,25),h720:new VideoPreset(960,720,15e5,30),h1080:new VideoPreset(1440,1080,25e5,30),h1440:new VideoPreset(1920,1440,35e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3),h720fps5:new VideoPreset(1280,720,4e5,5),h720fps15:new VideoPreset(1280,720,1e6,15),h1080fps15:new VideoPreset(1920,1080,15e5,15),h1080fps30:new VideoPreset(1920,1080,3e6,30)};function qualityFromProto(e){switch(e){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;default:return ConnectionQuality.Unknown}}!function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Unknown="unknown"}(ConnectionQuality=ConnectionQuality||{});class Participant extends events$1.exports.EventEmitter{constructor(e,t){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.sid=e,this.identity=t,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){if(e!==Track.Source.Unknown)for(var[,t]of this.tracks){if(t.source===e)return t;if(t.source===Track.Source.Unknown){if(e===Track.Source.Microphone&&t.kind===Track.Kind.Audio&&"screen"!==t.trackName)return t;if(e===Track.Source.Camera&&t.kind===Track.Kind.Video&&"screen"!==t.trackName)return t;if(e===Track.Source.ScreenShare&&t.kind===Track.Kind.Video&&"screen"===t.trackName)return t;if(e===Track.Source.ScreenShareAudio&&t.kind===Track.Kind.Audio&&"screen"===t.trackName)return t}}}getTrackByName(e){for(var[,t]of this.tracks)if(t.trackName===e)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e=this.getTrack(Track.Source.Camera);return!(null==(e=null==e?void 0:e.isMuted)||e)}get isMicrophoneEnabled(){var e=this.getTrack(Track.Source.Microphone);return!(null==(e=null==e?void 0:e.isMuted)||e)}get isScreenShareEnabled(){return!!this.getTrack(Track.Source.ScreenShare)}get joinedAt(){return this.participantInfo?new Date(1e3*this.participantInfo.joinedAt):new Date}updateInfo(e){this.identity=e.identity,this.sid=e.sid,this.name=e.name,this.setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,livekitLogger.trace("update participant info",{info:e})}setMetadata(e){var t=this.metadata!==e,i=this.metadata;this.metadata=e,t&&this.emit(ParticipantEvent.ParticipantMetadataChanged,i)}setPermissions(e){var t=e.canPublish!==(null==(t=this.permissions)?void 0:t.canPublish)||e.canSubscribe!==(null==(t=this.permissions)?void 0:t.canSubscribe)||e.canPublishData!==(null==(t=this.permissions)?void 0:t.canPublishData)||e.hidden!==(null==(t=this.permissions)?void 0:t.hidden)||e.recorder!==(null==(t=this.permissions)?void 0:t.recorder);return this.permissions=e,t}setIsSpeaking(e){e!==this.isSpeaking&&((this.isSpeaking=e)&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,e))}setConnectionQuality(e){var t=this._connectionQuality;this._connectionQuality=qualityFromProto(e),t!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(e){e.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,e)}),e.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,e)});const t=e;switch(t.track&&(t.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case Track.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case Track.Kind.Video:this.videoTracks.set(e.trackSid,e)}}}function trackPermissionToProto(e){var t;if(e.participantSid||e.participantIdentity)return{participantIdentity:null!=(t=e.participantIdentity)?t:"",participantSid:null!=(t=e.participantSid)?t:"",allTracks:null!=(t=e.allowAll)&&t,trackSids:e.allowedTrackSids||[]};throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid")}function mediaTrackToLocalTrack(e,t){switch(e.kind){case"audio":return new LocalAudioTrack(e,t,!1);case"video":return new LocalVideoTrack(e,t,!1);default:throw new TrackInvalidError("unsupported track type: "+e.kind)}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=i=>{return[{scaleResolutionDownBy:2,fps:3}].map(e=>{var t;return new VideoPreset(Math.floor(i.width/e.scaleResolutionDownBy),Math.floor(i.height/e.scaleResolutionDownBy),Math.max(15e4,Math.floor(i.encoding.maxBitrate/(Math.pow(e.scaleResolutionDownBy,2)*((null!=(t=i.encoding.maxFramerate)?t:30)/e.fps)))),e.fps)})},videoRids=["q","h","f"];function computeVideoEncodings(e,t,i,r){let n=null==r?void 0:r.videoEncoding;e&&(n=null==r?void 0:r.screenShareEncoding);var o=null==r?void 0:r.simulcast,a=null==r?void 0:r.scalabilityMode;if(!n&&!o&&!a||!t||!i)return[{}];n||(n=determineAppropriateEncoding(e,t,i),livekitLogger.debug("using video encoding",n));var s=new VideoPreset(t,i,n.maxBitrate,n.maxFramerate);if(livekitLogger.debug("scalabilityMode "+a),a){const d=[];if("L3T3"!==a)throw new Error("unsupported scalabilityMode: "+a);for(let e=0;e<3;e+=1)d.push({rid:videoRids[2-e],scaleResolutionDownBy:Math.pow(2,e),maxBitrate:n?n.maxBitrate/Math.pow(2,e):0,maxFramerate:s.encoding.maxFramerate,scalabilityMode:"L3T3"});return livekitLogger.debug("encodings",d),d}if(!o)return[n];let c=[],l;a=(c=e?null!=(a=sortPresets(null==r?void 0:r.screenShareSimulcastLayers))?a:defaultSimulcastLayers(e,s):null!=(o=sortPresets(null==r?void 0:r.videoSimulcastLayers))?o:defaultSimulcastLayers(e,s))[0],1<c.length&&([,l]=c),r=Math.max(t,i);return 960<=r&&l?encodingsFromPresets(t,i,[a,l,s]):encodingsFromPresets(t,i,480<=r?[a,s]:[s])}function determineAppropriateEncoding(e,t,i){var r=presetsForResolution(e,t,i);let n=r[0]["encoding"];var o=Math.max(t,i);for(let e=0;e<r.length;e+=1){var a=r[e];if(n=a.encoding,a.width>=o)break}return n}function presetsForResolution(e,t,i){if(e)return presetsScreenShare;e=i<t?t/i:i/t;return Math.abs(e-16/9)<Math.abs(e-4/3)?presets169:presets43}function defaultSimulcastLayers(e,t){if(e)return computeDefaultScreenShareSimulcastPresets(t);var{width:e,height:t}=t,t=t<e?e/t:t/e;return Math.abs(t-16/9)<Math.abs(t-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(r,n,e){const o=[];return e.forEach((e,t)=>{var i;t>=videoRids.length||(i=Math.min(r,n),t=videoRids[t],o.push({rid:t,scaleResolutionDownBy:i/Math.min(e.width,e.height),maxBitrate:e.encoding.maxBitrate,maxFramerate:e.encoding.maxFramerate}))}),o}function sortPresets(e){if(e)return e.sort((e,t)=>{e=e.encoding,t=t.encoding;return e.maxBitrate>t.maxBitrate?1:e.maxBitrate<t.maxBitrate?-1:e.maxBitrate===t.maxBitrate&&e.maxFramerate&&t.maxFramerate?e.maxFramerate>t.maxFramerate?1:-1:0})}class RemoteTrackPublication extends TrackPublication{constructor(){super(...arguments),this.allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=e=>{this.emit(TrackEvent.Ended,e),this.setTrack(void 0)},this.handleVisibilityChange=e=>{livekitLogger.debug(`adaptivestream video visibility ${this.trackSid}, visible=`+e,{trackSid:this.trackSid}),this.disabled=!e,this.emitTrackUpdate()},this.handleVideoDimensionsChange=e=>{livekitLogger.debug(`adaptivestream video dimensions ${e.width}x`+e.height,{trackSid:this.trackSid}),this.videoDimensions=e,this.emitTrackUpdate()}}setSubscribed(e){this.subscribed=e,this.allowed=!0;e={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(TrackEvent.UpdateSubscription,e)}get subscriptionStatus(){return!1!==this.subscribed&&super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:this.allowed?TrackPublication.SubscriptionStatus.Unsubscribed:TrackPublication.SubscriptionStatus.NotAllowed}get isSubscribed(){return!1!==this.subscribed&&super.isSubscribed}get isEnabled(){return!this.disabled}setEnabled(e){this.isManualOperationAllowed()&&this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){this.isManualOperationAllowed()&&this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var t;!this.isManualOperationAllowed()||(null==(t=this.videoDimensions)?void 0:t.width)===e.width&&(null==(t=this.videoDimensions)?void 0:t.height)===e.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){var t=this.subscriptionStatus;const i=this.track;i&&(i.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),i.off(TrackEvent.Ended,this.handleEnded)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),e.on(TrackEvent.Ended,this.handleEnded)),this.emitSubscriptionUpdateIfChanged(t),!!e!=!!i&&(e?this.emit(TrackEvent.Subscribed,e):this.emit(TrackEvent.Unsubscribed,i))}setAllowed(e){var t=this.subscriptionStatus;this.allowed=e,this.emitSubscriptionUpdateIfChanged(t)}updateInfo(e){var t;super.updateInfo(e),this.metadataMuted=e.muted,null!=(t=this.track)&&t.setMuted(e.muted)}emitSubscriptionUpdateIfChanged(e){var t=this.subscriptionStatus;e!==t&&this.emit(TrackEvent.SubscriptionPermissionChanged,t,e)}isManualOperationAllowed(){return this.isAdaptiveStream?(livekitLogger.warn("adaptive stream is enabled, cannot change track settings",{trackSid:this.trackSid}),!1):!!this.isSubscribed||(livekitLogger.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled});this.videoDimensions?(e.width=this.videoDimensions.width,e.height=this.videoDimensions.height):void 0!==this.currentVideoQuality?e.quality=this.currentVideoQuality:e.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,e)}}class RemoteParticipant extends Participant{constructor(e,t,i){super(t,i||""),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}static fromParticipantInfo(e,t){return new RemoteParticipant(e,t.sid,t.identity)}addTrackPublication(t){super.addTrackPublication(t),t.on(TrackEvent.UpdateSettings,e=>{livekitLogger.debug("send update settings",e),this.signalClient.sendUpdateTrackSettings(e)}),t.on(TrackEvent.UpdateSubscription,e=>{e.participantTracks.forEach(e=>{e.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(e)}),t.on(TrackEvent.SubscriptionPermissionChanged,e=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,t,e)}),t.on(TrackEvent.Subscribed,e=>{this.emit(ParticipantEvent.TrackSubscribed,e,t)}),t.on(TrackEvent.Unsubscribed,e=>{this.emit(ParticipantEvent.TrackUnsubscribed,e,t)})}getTrack(e){e=super.getTrack(e);if(e)return e}getTrackByName(e){e=super.getTrackByName(e);if(e)return e}setVolume(e){this.volume=e;const t=this.getTrack(Track.Source.Microphone);t&&t.track&&t.track.setVolume(e)}getVolume(){const e=this.getTrack(Track.Source.Microphone);return e&&e.track?e.track.getVolume():this.volume}addSubscribedMediaTrack(t,e,i,r,n,o){let a=this.getTrackPublication(e);if(a||e.startsWith("TR")||this.tracks.forEach(e=>{a||t.kind!==e.kind.toString()||(a=e)}),!a)return 0===o?(livekitLogger.error("could not find published track",{participant:this.sid,trackSid:e}),void this.emit(ParticipantEvent.TrackSubscriptionFailed,e)):(void 0===o&&(o=20),void setTimeout(()=>{this.addSubscribedMediaTrack(t,e,i,r,n,o-1)},150));var s="video"===t.kind;let c;return(c=s?new RemoteVideoTrack(t,e,r,n):new RemoteAudioTrack(t,e,r)).source=a.source,c.isMuted=a.isMuted,c.setMediaStream(i),c.start(),a.setTrack(c),void 0!==this.volume&&c instanceof RemoteAudioTrack&&c.source===Track.Source.Microphone&&c.setVolume(this.volume),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){super.updateInfo(e);const r=new Map,n=new Map;e.tracks.forEach(e=>{let t=this.getTrackPublication(e.sid);if(t)t.updateInfo(e);else{var i=Track.kindFromProto(e.type);if(!i)return;(t=new RemoteTrackPublication(i,e.sid,e.name)).updateInfo(e),n.set(e.sid,t),this.addTrackPublication(t)}r.set(e.sid,t)}),n.forEach(e=>{this.emit(ParticipantEvent.TrackPublished,e)}),this.tracks.forEach(e=>{r.has(e.trackSid)||(livekitLogger.trace("detected removed track on remote participant, unpublishing",{publication:e,participantSid:this.sid}),this.unpublishTrack(e.trackSid,!0))})}unpublishTrack(e,t){const i=this.tracks.get(e);if(i){switch(this.tracks.delete(e),i.kind){case Track.Kind.Audio:this.audioTracks.delete(e);break;case Track.Kind.Video:this.videoTracks.delete(e)}const r=i["track"];r&&(r.stop(),i.setTrack(void 0)),t&&this.emit(ParticipantEvent.TrackUnpublished,i)}}emit(e,...t){return livekitLogger.trace("participant event",{participant:this.sid,event:e,args:t}),super.emit(e,...t)}}const compatibleCodec="vp8";class LocalParticipant extends Participant{constructor(e,t,i,r){super(e,t),this.pendingPublishing=new Set,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.updateTrackSubscriptionPermissions=()=>{livekitLogger.debug("updating track subscription permissions",{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions}),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(e=>trackPermissionToProto(e)))},this.onTrackUnmuted=e=>{this.onTrackMuted(e,e.isUpstreamPaused)},this.onTrackMuted=(e,t)=>{void 0===t&&(t=!0),e.sid?this.engine.updateMuteStatus(e.sid,t):livekitLogger.error("could not update mute status for unpublished track",e)},this.onTrackUpstreamPaused=e=>{livekitLogger.debug("upstream paused"),this.onTrackMuted(e,!0)},this.onTrackUpstreamResumed=e=>{livekitLogger.debug("upstream resumed"),this.onTrackMuted(e,e.isMuted)},this.handleSubscribedQualityUpdate=s=>__awaiter(this,void 0,void 0,function*(){var t,e;if(null!=(i=this.roomOptions)&&i.dynacast){const a=this.videoTracks.get(s.trackSid);if(a)if(0<s.subscribedCodecs.length){if(a.videoTrack){var i=yield a.videoTrack.setPublishingCodecs(s.subscribedCodecs);try{for(var r,n=__asyncValues(i);!(r=yield n.next()).done;){var o=r.value;livekitLogger.debug(`publish ${o} for `+a.videoTrack.sid),yield this.publishAdditionalCodecForTrack(a.videoTrack,o,a.options)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&(yield e.call(n))}finally{if(t)throw t.error}}}}else 0<s.subscribedQualities.length&&null!=(i=a.videoTrack)&&i.setPublishingLayers(s.subscribedQualities);else livekitLogger.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:s.trackSid})}}),this.handleLocalTrackUnpublished=e=>{var t=this.tracks.get(e.trackSid);t?this.unpublishTrack(t.track):livekitLogger.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:e.trackSid})},this.handleTrackEnded=e=>{livekitLogger.debug("unpublishing local track due to TrackEnded",{track:e.sid}),this.unpublishTrack(e)},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=i,this.roomOptions=r,this.engine.client.onRemoteMuteChanged=(e,t)=>{const i=this.tracks.get(e);i&&i.track&&(t?i.mute():i.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished,this.engine.on(EngineEvent.Connected,this.updateTrackSubscriptionPermissions).on(EngineEvent.Restarted,this.updateTrackSubscriptionPermissions).on(EngineEvent.Resumed,this.updateTrackSubscriptionPermissions)}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(e){e=super.getTrack(e);if(e)return e}getTrackByName(e){e=super.getTrackByName(e);if(e)return e}setCameraEnabled(e,t){return this.setTrackEnabled(Track.Source.Camera,e,t)}setMicrophoneEnabled(e,t){return this.setTrackEnabled(Track.Source.Microphone,e,t)}setScreenShareEnabled(e,t){return this.setTrackEnabled(Track.Source.ScreenShare,e,t)}setPermissions(e){var t=this.permissions,e=super.setPermissions(e);return e&&t&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,t),e}setTrackEnabled(o,e,a){var s,c;return __awaiter(this,void 0,void 0,function*(){livekitLogger.debug("setTrackEnabled",{source:o,enabled:e});let t=this.getTrack(o);if(e)if(t)yield t.unmute();else{let e;if(this.pendingPublishing.has(o))return void livekitLogger.info("skipping duplicate published source",{source:o});this.pendingPublishing.add(o);try{switch(o){case Track.Source.Camera:e=yield this.createTracks({video:null==(s=a)||s});break;case Track.Source.Microphone:e=yield this.createTracks({audio:null==(c=a)||c});break;case Track.Source.ScreenShare:e=yield this.createScreenTracks(Object.assign({},a));break;default:throw new TrackInvalidError(o)}const r=[];for(const n of e)r.push(this.publishTrack(n));var i=yield Promise.all(r);[t]=i}catch(e){throw e instanceof Error&&!(e instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,e),e}finally{this.pendingPublishing.delete(o)}}else t&&t.track&&(o===Track.Source.ScreenShare?(t=this.unpublishTrack(t.track),(i=this.getTrack(Track.Source.ScreenShareAudio))&&i.track&&this.unpublishTrack(i.track)):yield t.mute());return t})}enableCameraAndMicrophone(){return __awaiter(this,void 0,void 0,function*(){if(!this.pendingPublishing.has(Track.Source.Camera)&&!this.pendingPublishing.has(Track.Source.Microphone)){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(e=>this.publishTrack(e)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}})}createTracks(a){var e;return __awaiter(this,void 0,void 0,function*(){const n=constraintsForOptions(mergeDefaultOptions(a,null==(e=this.roomOptions)?void 0:e.audioCaptureDefaults,null==(e=this.roomOptions)?void 0:e.videoCaptureDefaults));let o;try{o=yield navigator.mediaDevices.getUserMedia(n)}catch(e){throw e instanceof Error&&(n.audio&&(this.microphoneError=e),n.video&&(this.cameraError=e)),e}return n.audio&&(this.microphoneError=void 0),n.video&&(this.cameraError=void 0),o.getTracks().map(e=>{var t="audio"===e.kind;t?a.audio:a.video;let i;t=t?n.audio:n.video;const r=mediaTrackToLocalTrack(e,i="boolean"!=typeof t?t:i);return r.kind===Track.Kind.Video?r.source=Track.Source.Camera:r.kind===Track.Kind.Audio&&(r.source=Track.Source.Microphone),r.mediaStream=o,r})})}createScreenTracks(a){var s;return __awaiter(this,void 0,void 0,function*(){void 0===(a=void 0===a?{}:a).resolution&&(a.resolution=ScreenSharePresets.h1080fps15.resolution);let e=!0;a.resolution&&(e={width:a.resolution.width,height:a.resolution.height,frameRate:a.resolution.frameRate});const t=yield navigator.mediaDevices.getDisplayMedia({audio:null!=(s=a.audio)&&s,video:e});var i=t.getVideoTracks();if(0===i.length)throw new TrackInvalidError("no video track found");const r=new LocalVideoTrack(i[0],void 0,!1),n=(r.source=Track.Source.ScreenShare,[r]);if(0<t.getAudioTracks().length){const o=new LocalAudioTrack(t.getAudioTracks()[0],void 0,!1);o.source=Track.Source.ScreenShareAudio,n.push(o)}return n})}publishTrack(d,u){var p;return __awaiter(this,void 0,void 0,function*(){const e=Object.assign(Object.assign({},null==(p=this.roomOptions)?void 0:p.publishDefaults),u);if(d instanceof MediaStreamTrack)switch(d.kind){case"audio":d=new LocalAudioTrack(d,void 0,!0);break;case"video":d=new LocalVideoTrack(d,void 0,!0);break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind "+d.kind)}let t;if(this.tracks.forEach(e=>{e.track&&e.track===d&&(t=e)}),t)return t;e.source&&(d.source=e.source),e.stopMicTrackOnMute&&d instanceof LocalAudioTrack&&(d.stopOnMute=!0),d.source===Track.Source.ScreenShare&&isFireFox()&&(e.simulcast=!1),d.on(TrackEvent.Muted,this.onTrackMuted),d.on(TrackEvent.Unmuted,this.onTrackUnmuted),d.on(TrackEvent.Ended,this.handleTrackEnded),d.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),d.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const i=AddTrackRequest.fromPartial({cid:d.mediaStreamTrack.id,name:null==u?void 0:u.name,type:Track.kindToProto(d.kind),muted:d.isMuted,source:Track.sourceToProto(d.source),disableDtx:!(null==(p=null===e||void 0===e?void 0:e.dtx)||p)});let r,n;if(d.kind===Track.Kind.Video){var o=d.mediaStreamTrack.getSettings(),a=null!=(p=o.width)?p:null==(p=d.dimensions)?void 0:p.width,o=null!=(p=o.height)?p:null==(p=d.dimensions)?void 0:p.height;if(i.width=null!=a?a:0,i.height=null!=o?o:0,d instanceof LocalVideoTrack){if("vp9"===(null===e||void 0===e?void 0:e.videoCodec)||"av1"===(null===e||void 0===e?void 0:e.videoCodec)){e.scalabilityMode=null!=(p=e.scalabilityMode)?p:"L3T3";const l=Object.assign({},e);l.simulcast=!0,l.scalabilityMode=void 0,n=computeVideoEncodings(d.source===Track.Source.ScreenShare,a,o,l)}e.videoCodec&&"vp8"!==e.videoCodec&&(i.simulcastCodecs=[{codec:e.videoCodec,cid:d.mediaStreamTrack.id,enableSimulcastLayers:!0},{codec:compatibleCodec,cid:"",enableSimulcastLayers:!0}])}r=computeVideoEncodings(d.source===Track.Source.ScreenShare,a,o,e),i.layers=videoLayersFromEncodings(i.width,i.height,null!==n&&void 0!==n?n:r)}else d.kind===Track.Kind.Audio&&e.audioBitrate&&(r=[{maxBitrate:e.audioBitrate}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");a=yield this.engine.addTrack(i);const s=new LocalTrackPublication(d.kind,a,d);if(s.options=e,d.sid=a.sid,!this.engine.publisher)throw new UnexpectedConnectionState("publisher is closed");livekitLogger.debug(`publishing ${d.kind} with encodings`,{encodings:r,trackInfo:a});const c={direction:"sendonly"};r&&(c.sendEncodings=r);o=yield this.engine.publisher.pc.addTransceiver(d.mediaStreamTrack,c);return d.kind===Track.Kind.Video&&e.videoCodec&&(this.setPreferredCodec(o,d.kind,e.videoCodec),d.codec=e.videoCodec),this.engine.negotiate(),d.sender=o.sender,d instanceof LocalVideoTrack?d.startMonitor(this.engine.client):d instanceof LocalAudioTrack&&d.startMonitor(),this.addTrackPublication(s),this.emit(ParticipantEvent.LocalTrackPublished,s),s})}publishAdditionalCodecForTrack(s,c,l){var d;return __awaiter(this,void 0,void 0,function*(){const e=Object.assign(Object.assign({},null==(d=this.roomOptions)?void 0:d.publishDefaults),l);e.scalabilityMode=void 0,e.videoCodec=c;let t;if(this.tracks.forEach(e=>{e.track&&e.track===s&&(t=e)}),!t)throw new TrackInvalidError("track is not published");if(!(s instanceof LocalVideoTrack))throw new TrackInvalidError("track is not a video track");var i=s.mediaStreamTrack.getSettings(),r=null!=(d=i.width)?d:null==(d=s.dimensions)?void 0:d.width,i=null!=(d=i.height)?d:null==(d=s.dimensions)?void 0:d.height,r=computeVideoEncodings(s.source===Track.Source.ScreenShare,r,i,e),i=s.addSimulcastTrack(e.videoCodec,r);const n=AddTrackRequest.fromPartial({cid:i.mediaStreamTrack.id,type:Track.kindToProto(s.kind),muted:s.isMuted,source:Track.sourceToProto(s.source),sid:s.sid,simulcastCodecs:[{codec:e.videoCodec,cid:i.mediaStreamTrack.id,enableSimulcastLayers:e.simulcast}]});if(n.layers=videoLayersFromEncodings(n.width,n.height,r),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");var o=yield this.engine.addTrack(n);if(!this.engine.publisher)throw new UnexpectedConnectionState("publisher is closed");const a={direction:"sendonly"};r&&(a.sendEncodings=r);i=yield this.engine.publisher.pc.addTransceiver(i.mediaStreamTrack,a);this.setPreferredCodec(i,s.kind,e.videoCodec),s.setSimulcastTrackSender(e.videoCodec,i.sender),this.engine.negotiate(),livekitLogger.debug(`published ${e.videoCodec} for track `+s.sid,{encodings:r,trackInfo:o})})}unpublishTrack(e,t){var i;const r=this.getPublicationForTrack(e);if(livekitLogger.debug("unpublishing track",{track:e,method:"unpublishTrack"}),r&&r.track){(e=r.track).sender=void 0,e.off(TrackEvent.Muted,this.onTrackMuted),e.off(TrackEvent.Unmuted,this.onTrackUnmuted),e.off(TrackEvent.Ended,this.handleTrackEnded),e.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),e.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),(t=void 0===t?null==(i=null==(i=this.roomOptions)?void 0:i.stopLocalTrackOnUnpublish)||i:t)&&e.stop();const n=e["mediaStreamTrack"];if(this.engine.publisher&&"closed"!==this.engine.publisher.pc.connectionState){const o=this.engine.publisher.pc.getSenders();o.forEach(e=>{var t;if(e.track===n)try{null!=(t=this.engine.publisher)&&t.pc.removeTrack(e),this.engine.negotiate()}catch(e){livekitLogger.warn("failed to remove track",{error:e,method:"unpublishTrack"})}})}switch(this.tracks.delete(r.trackSid),r.kind){case Track.Kind.Audio:this.audioTracks.delete(r.trackSid);break;case Track.Kind.Video:this.videoTracks.delete(r.trackSid)}return this.emit(ParticipantEvent.LocalTrackUnpublished,r),r.setTrack(void 0),r}livekitLogger.warn("track was not unpublished because no publication was found",{track:e,method:"unpublishTrack"})}unpublishTracks(e){const t=[];return e.forEach(e=>{e=this.unpublishTrack(e);e&&t.push(e)}),t}publishData(i,r,n){return __awaiter(this,void 0,void 0,function*(){const t=[];void 0!==n&&n.forEach(e=>{e instanceof RemoteParticipant?t.push(e.sid):t.push(e)});var e={kind:r,user:{participantSid:this.sid,payload:i,destinationSids:t}};yield this.engine.sendDataPacket(e,r)})}setTrackSubscriptionPermissions(e,t=[]){this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isConnected&&this.updateTrackSubscriptionPermissions()}updateInfo(e){super.updateInfo(e),e.tracks.forEach(e=>{var t=this.tracks.get(e.sid);t&&(t=t.isMuted||null!=(t=null==(t=t.track)?void 0:t.isUpstreamPaused)&&t)!==e.muted&&(livekitLogger.debug("updating server mute state after reconcile",{sid:e.sid,muted:t}),this.engine.client.sendMuteTrack(e.sid,t))})}getPublicationForTrack(i){let r;return this.tracks.forEach(e=>{var t=e.track;t&&(i instanceof MediaStreamTrack?(t instanceof LocalAudioTrack||t instanceof LocalVideoTrack)&&t.mediaStreamTrack===i&&(r=e):i===t&&(r=e))}),r}setPreferredCodec(e,t,i){if("getCapabilities"in RTCRtpSender){const r=RTCRtpSender.getCapabilities(t);if(r){livekitLogger.debug("get capabilities",r);const n=[],o=[],a=[];r.codecs.forEach(e=>{var t=e.mimeType.toLowerCase();("audio/opus"===t?n:t==="video/"+i?"h264"!==i||e.sdpFmtpLine&&e.sdpFmtpLine.includes("profile-level-id=42e01f")?n:o:a).push(e)}),"setCodecPreferences"in e&&e.setCodecPreferences(n.concat(o,a))}}}publishedTracksInfo(){const t=[];return this.tracks.forEach(e=>{void 0!==e.track&&t.push({cid:e.track.mediaStreamID,track:e.trackInfo})}),t}dataChannelsInfo(){const i=[];var e=(e,t)=>{void 0!==(null==e?void 0:e.id)&&null!==e.id&&i.push({label:e.label,id:e.id,target:t})};return e(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),e(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),e(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),e(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),i}}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(e,t,i){e=e.match(t);return e&&e.length>=i&&parseInt(e[i],10)}function wrapPeerConnectionEvent(e,r,n){if(e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype,o=t.addEventListener,a=(t.addEventListener=function(e,t){if(e!==r)return o.apply(this,arguments);var i=e=>{e=n(e);e&&(t.handleEvent?t.handleEvent(e):t(e))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(t,i),o.apply(this,[e,i])},t.removeEventListener);t.removeEventListener=function(e,t){if(e!==r||!this._eventMap||!this._eventMap[r])return a.apply(this,arguments);if(!this._eventMap[r].has(t))return a.apply(this,arguments);var i=this._eventMap[r].get(t);return this._eventMap[r].delete(t),0===this._eventMap[r].size&&delete this._eventMap[r],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,i])},Object.defineProperty(t,"on"+r,{get(){return this["_on"+r]},set(e){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),e&&this.addEventListener(r,this["_on"+r]=e)},enumerable:!0,configurable:!0})}}function disableLog(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(logDisabled_=e)?"adapter.js logging disabled":"adapter.js logging enabled"}function disableWarnings(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(deprecationWarnings_=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function log(){"object"!=typeof window||logDisabled_||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}function deprecated(e,t){deprecationWarnings_&&console.warn(e+" is deprecated, please use "+t+" instead.")}function detectBrowser(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const i=e["navigator"];if(i.mozGetUserMedia)t.browser="firefox",t.version=extractVersion(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=extractVersion(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=extractVersion(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function isObject$g(e){return"[object Object]"===Object.prototype.toString.call(e)}function compactObject(n){return isObject$g(n)?Object.keys(n).reduce(function(e,t){var i=isObject$g(n[t]),r=i?compactObject(n[t]):n[t],i=i&&!Object.keys(r).length;return void 0===r||i?e:Object.assign(e,{[t]:r})},{}):n}function walkStats(t,i,r){i&&!r.has(i.id)&&(r.set(i.id,i),Object.keys(i).forEach(e=>{e.endsWith("Id")?walkStats(t,t.get(i[e]),r):e.endsWith("Ids")&&i[e].forEach(e=>{walkStats(t,t.get(e),r)})}))}function filterStats(i,t,e){const r=e?"outbound-rtp":"inbound-rtp",n=new Map;if(null!==t){const o=[];i.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{i.forEach(e=>{e.type===r&&e.trackId===t.id&&walkStats(i,e,n)})})}return n}const logging=log;function shimGetUserMedia$2(e,t){const a=e&&e.navigator;if(a.mediaDevices){const s=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const n={};return Object.keys(e).forEach(t=>{if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){const i="object"==typeof e[t]?e[t]:{ideal:e[t]},r=(void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact),function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t});if(void 0!==i.ideal){n.optional=n.optional||[];let e={};"number"==typeof i.ideal?(e[r("min",t)]=i.ideal,n.optional.push(e),(e={})[r("max",t)]=i.ideal):e[r("",t)]=i.ideal,n.optional.push(e)}void 0!==i.exact&&"number"!=typeof i.exact?(n.mandatory=n.mandatory||{},n.mandatory[r("",t)]=i.exact):["min","max"].forEach(e=>{void 0!==i[e]&&(n.mandatory=n.mandatory||{},n.mandatory[r(e,t)]=i[e])})}}),e.advanced&&(n.optional=(n.optional||[]).concat(e.advanced)),n},r=function(n,o){if(!(61<=t.version)){if((n=JSON.parse(JSON.stringify(n)))&&"object"==typeof n.audio&&((e=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])})((n=JSON.parse(JSON.stringify(n))).audio,"autoGainControl","googAutoGainControl"),e(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=s(n.audio)),n&&"object"==typeof n.video){let r=n.video.facingMode;r=r&&("object"==typeof r?r:{ideal:r});var e=t.version<66;if(r&&("user"===r.exact||"environment"===r.exact||"user"===r.ideal||"environment"===r.ideal)&&(!a.mediaDevices.getSupportedConstraints||!a.mediaDevices.getSupportedConstraints().facingMode||e)){delete n.video.facingMode;let i;if("environment"===r.exact||"environment"===r.ideal?i=["back","rear"]:"user"!==r.exact&&"user"!==r.ideal||(i=["front"]),i)return a.mediaDevices.enumerateDevices().then(e=>{let t=(e=e.filter(e=>"videoinput"===e.kind)).find(t=>i.some(e=>t.label.toLowerCase().includes(e)));return(t=!t&&e.length&&i.includes("back")?e[e.length-1]:t)&&(n.video.deviceId=r.exact?{exact:t.deviceId}:{ideal:t.deviceId}),n.video=s(n.video),logging("chrome: "+JSON.stringify(n)),o(n)})}n.video=s(n.video)}logging("chrome: "+JSON.stringify(n))}return o(n)},n=function(e){return 64<=t.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(a.getUserMedia=function(e,t,i){r(e,e=>{a.webkitGetUserMedia(e,t,e=>{i&&i(n(e))})})}.bind(a),a.mediaDevices.getUserMedia){const i=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(e){return r(e,t=>i(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(n(e))))}}}}function shimGetDisplayMedia$1(o,e){o.navigator.mediaDevices&&"getDisplayMedia"in o.navigator.mediaDevices||o.navigator.mediaDevices&&("function"!=typeof e?console.error("shimGetDisplayMedia: getSourceId argument is not a function"):o.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then(e=>{var t=n.video&&n.video.width,i=n.video&&n.video.height,r=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:r||3}},t&&(n.video.mandatory.maxWidth=t),i&&(n.video.mandatory.maxHeight=i),o.navigator.mediaDevices.getUserMedia(n)})})}function shimMediaStream(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function shimOnTrack$1(n){if("object"!=typeof n||!n.RTCPeerConnection||"ontrack"in n.RTCPeerConnection.prototype)wrapPeerConnectionEvent(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e));else{Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",t=>{let e;e=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===t.track.id):{track:t.track};const i=new Event("track");i.track=t.track,i.receiver=e,i.transceiver={receiver:e},i.streams=[r.stream],this.dispatchEvent(i)}),r.stream.getTracks().forEach(t=>{let e;e=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===t.id):{track:t};const i=new Event("track");i.track=t,i.receiver=e,i.transceiver={receiver:e},i.streams=[r.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}}function shimGetSendersWithDtmf(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const r=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack,o=(e.RTCPeerConnection.prototype.addTrack=function(e,t){let i=n.apply(this,arguments);return i||(i=r(this,e),this._senders.push(i)),i},e.RTCPeerConnection.prototype.removeTrack);e.RTCPeerConnection.prototype.removeTrack=function(e){o.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const t=e.RTCPeerConnection.prototype.addStream,i=(e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],t.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(r(this,e))})},e.RTCPeerConnection.prototype.removeStream);e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(t=>{var e=this._senders.find(e=>e.track===t);e&&this._senders.splice(this._senders.indexOf(e),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=a.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(e){if(e.RTCPeerConnection){const o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,t,i]=arguments;if(0<arguments.length&&"function"==typeof e)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof e))return o.apply(this,[]);const r=function(e){const r={},t=e.result();return t.forEach(t=>{const i={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(e=>{i[e]=t.stat(e)}),r[i.id]=i}),r},n=function(t){return new Map(Object.keys(t).map(e=>[e,t[e]]))};return 2<=arguments.length?o.apply(this,[function(e){t(n(r(e)))},e]):new Promise((t,e)=>{o.apply(this,[function(e){t(n(r(e)))},e])}).then(t,i)}}}function shimSenderReceiverGetStats(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders,i=(t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),e.RTCPeerConnection.prototype.addTrack);i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const t=this;return this._pc.getStats().then(e=>filterStats(e,t.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=r.apply(this,[]);return e.forEach(e=>e._pc=this),e}),wrapPeerConnectionEvent(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const t=this;return this._pc.getStats().then(e=>filterStats(e,t.track,!1))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){const o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let t,i,r;return this.getSenders().forEach(e=>{e.track===n&&(t?r=!0:t=e)}),this.getReceivers().forEach(e=>(e.track===n&&(i?r=!0:i=e),e.track===n)),r||t&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function shimAddTrackRemoveTrackWithNative(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const r=e.RTCPeerConnection.prototype.addTrack,n=(e.RTCPeerConnection.prototype.addTrack=function(e,t){if(!t)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var i=r.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(i)&&this._shimmedLocalStreams[t.id].push(i):this._shimmedLocalStreams[t.id]=[t,i],i},e.RTCPeerConnection.prototype.addStream),t=(e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(t=>{if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(i)},e.RTCPeerConnection.prototype.removeStream),o=(e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],t.apply(this,arguments)},e.RTCPeerConnection.prototype.removeTrack);e.RTCPeerConnection.prototype.removeTrack=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},i&&Object.keys(this._shimmedLocalStreams).forEach(e=>{var t=this._shimmedLocalStreams[e].indexOf(i);-1!==t&&this._shimmedLocalStreams[e].splice(t,1),1===this._shimmedLocalStreams[e].length&&delete this._shimmedLocalStreams[e]}),o.apply(this,arguments)}}function shimAddTrackRemoveTrack(o,e){if(o.RTCPeerConnection){if(o.RTCPeerConnection.prototype.addTrack&&65<=e.version)return shimAddTrackRemoveTrackWithNative(o);const t=o.RTCPeerConnection.prototype.getLocalStreams,i=(o.RTCPeerConnection.prototype.getLocalStreams=function(){const e=t.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])},o.RTCPeerConnection.prototype.addStream),n=(o.RTCPeerConnection.prototype.addStream=function(e){var t;this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(t=>{if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError")}),this._reverseStreams[e.id]||(t=new o.MediaStream(e.getTracks()),this._streams[e.id]=t,this._reverseStreams[t.id]=e,e=t),i.apply(this,[e])},o.RTCPeerConnection.prototype.removeStream),a=(o.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[(this._streams[e.id]||e).id],delete this._streams[e.id]},o.RTCPeerConnection.prototype.addTrack=function(t,e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var r;if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const n=this._streams[e.id];return n?(n.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))})):(r=new o.MediaStream([t]),this._streams[e.id]=r,this._reverseStreams[r.id]=e,this.addStream(r)),this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach(function(e){const i=o.RTCPeerConnection.prototype[e];o.RTCPeerConnection.prototype[e]={[e](){const t=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[e=>{e=r(this,e);t[0].apply(null,[e])},e=>{t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then(e=>r(this,e))}}[e]}),o.RTCPeerConnection.prototype.setLocalDescription),s=(o.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type&&(arguments[0]=function(i,e){let r=e.sdp;return Object.keys(i._reverseStreams||[]).forEach(e=>{var e=i._reverseStreams[e],t=i._streams[e.id];r=r.replace(new RegExp(e.id,"g"),t.id)}),new RTCSessionDescription({type:e.type,sdp:r})}(this,arguments[0])),a.apply(this,arguments)},Object.getOwnPropertyDescriptor(o.RTCPeerConnection.prototype,"localDescription"));function r(i,e){let r=e.sdp;return Object.keys(i._reverseStreams||[]).forEach(e=>{var e=i._reverseStreams[e],t=i._streams[e.id];r=r.replace(new RegExp(t.id,"g"),e.id)}),new RTCSessionDescription({type:e.type,sdp:r})}Object.defineProperty(o.RTCPeerConnection.prototype,"localDescription",{get(){var e=s.get.apply(this);return""===e.type?e:r(this,e)}}),o.RTCPeerConnection.prototype.removeTrack=function(t){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let i;Object.keys(this._streams).forEach(e=>{this._streams[e].getTracks().find(e=>t.track===e)&&(i=this._streams[e])}),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function shimPeerConnection$1(i,e){!i.RTCPeerConnection&&i.webkitRTCPeerConnection&&(i.RTCPeerConnection=i.webkitRTCPeerConnection),i.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){const t=i.RTCPeerConnection.prototype[e];i.RTCPeerConnection.prototype[e]={[e](){return arguments[0]=new("addIceCandidate"===e?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}}[e]})}function fixNegotiationNeeded(e,i){wrapPeerConnectionEvent(e,"negotiationneeded",e=>{const t=e.target;if(!(i.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}var chromeShim=Object.freeze({__proto__:null,shimMediaStream:shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf:shimGetSendersWithDtmf,shimGetStats:shimGetStats,shimSenderReceiverGetStats:shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative:shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack:shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$1,fixNegotiationNeeded:fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1});function shimGetUserMedia$1(e,t){const r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,i){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,i)},!(55<t.version&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const n=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),n(e.audio,"autoGainControl","mozAutoGainControl"),n(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},i&&i.prototype.getSettings){const a=i.prototype.getSettings;i.prototype.getSettings=function(){var e=a.apply(this,arguments);return n(e,"mozAutoGainControl","autoGainControl"),n(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){const s=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),n(e,"autoGainControl","mozAutoGainControl"),n(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function shimGetDisplayMedia(i,r){i.navigator.mediaDevices&&"getDisplayMedia"in i.navigator.mediaDevices||i.navigator.mediaDevices&&(i.navigator.mediaDevices.getDisplayMedia=function(e){if(e&&e.video)return!0===e.video?e.video={mediaSource:r}:e.video.mediaSource=r,i.navigator.mediaDevices.getUserMedia(e);{const t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}})}function shimOnTrack(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(i,r){if("object"==typeof i&&(i.RTCPeerConnection||i.mozRTCPeerConnection)){!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){const t=i.RTCPeerConnection.prototype[e];i.RTCPeerConnection.prototype[e]={[e](){return arguments[0]=new("addIceCandidate"===e?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}}[e]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){const[e,t,i]=arguments;return o.apply(this,[e||null]).then(i=>{if(r.version<53&&!t)try{i.forEach(e=>{e.type=n[e.type]||e.type})}catch(e){if("TypeError"!==e.name)throw e;i.forEach((e,t)=>{i.set(t,Object.assign({},e,{type:n[e.type]||e.type}))})}return i}).then(t,i)}}}function shimSenderGetStats(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders,i=(t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),e.RTCPeerConnection.prototype.addTrack);i&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function shimReceiverGetStats(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),wrapPeerConnectionEvent(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function shimRemoveStream(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){deprecated("removeStream","removeTrack"),this.getSenders().forEach(e=>{e.track&&t.getTracks().includes(e.track)&&this.removeTrack(e)})})}function shimRTCDataChannel(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function shimAddTransceiver(e){if("object"==typeof e&&e.RTCPeerConnection){const o=e.RTCPeerConnection.prototype.addTransceiver;o&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1];var t=e&&"sendEncodings"in e,i=(t&&e.sendEncodings.forEach(e=>{if("rid"in e){const t=/^[a-z0-9]{0,16}$/i;if(!t.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(1<=parseFloat(e.scaleResolutionDownBy)))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(0<=parseFloat(e.maxFramerate)))throw new RangeError("max_framerate must be >= 0.0")}),o.apply(this,arguments));if(t){const r=i["sender"],n=r.getParameters();"encodings"in n&&(1!==n.encodings.length||0!==Object.keys(n.encodings[0]).length)||(n.encodings=e.sendEncodings,r.sendEncodings=e.sendEncodings,this.setParametersPromises.push(r.setParameters(n).then(()=>{delete r.sendEncodings}).catch(()=>{delete r.sendEncodings})))}return i})}}function shimGetParameters(e){if("object"==typeof e&&e.RTCRtpSender){const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function shimCreateOffer(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}}function shimCreateAnswer(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}}var firefoxShim=Object.freeze({__proto__:null,shimOnTrack:shimOnTrack,shimPeerConnection:shimPeerConnection,shimSenderGetStats:shimSenderGetStats,shimReceiverGetStats:shimReceiverGetStats,shimRemoveStream:shimRemoveStream,shimRTCDataChannel:shimRTCDataChannel,shimAddTransceiver:shimAddTransceiver,shimGetParameters:shimGetParameters,shimCreateOffer:shimCreateOffer,shimCreateAnswer:shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia:shimGetDisplayMedia});function shimLocalStreamsAPI(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(e=>i.call(this,e,t)),t.getVideoTracks().forEach(e=>i.call(this,e,t))},e.RTCPeerConnection.prototype.addTrack=function(e,...t){return t&&t.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),i.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);const i=e.getTracks();this.getSenders().forEach(e=>{i.includes(e.track)&&this.removeTrack(e)})}})}}function shimRemoteStreamsAPI(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams||[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),!this._remoteStreams.includes(e)){this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(e=>{if(i._remoteStreams||(i._remoteStreams=[]),!(0<=i._remoteStreams.indexOf(e))){i._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,i.dispatchEvent(t)}})}),t.apply(i,arguments)}}}function shimCallbacksAPI(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype,n=t.createOffer,o=t.createAnswer,a=t.setLocalDescription,s=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t){var i=2<=arguments.length?arguments[2]:e;const r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var i=2<=arguments.length?arguments[2]:e;const r=o.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r};e=function(e,t,i){const r=a.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r};t.setLocalDescription=e,t.setRemoteDescription=function(e,t,i){const r=s.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r},t.addIceCandidate=function(e,t,i){const r=c.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r}}}function shimGetUserMedia(e){const r=e&&e.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const t=r.mediaDevices,i=t.getUserMedia.bind(t);r.mediaDevices.getUserMedia=e=>i(shimConstraints(e))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(e,t,i){r.mediaDevices.getUserMedia(e).then(t,i)}.bind(r))}function shimConstraints(e){return e&&void 0!==e.video?Object.assign({},e,{video:compactObject(e.video)}):e}function shimRTCIceServerUrls(e){if(e.RTCPeerConnection){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(i,e){if(i&&i.iceServers){const r=[];for(let t=0;t<i.iceServers.length;t++){let e=i.iceServers[t];!e.hasOwnProperty("urls")&&e.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),(e=JSON.parse(JSON.stringify(e))).urls=e.url,delete e.url,r.push(e)):r.push(i.iceServers[t])}i.iceServers=r}return new t(i,e)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}}function shimTrackEventTransceiver(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(e){const r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind),i=(!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),this.getTransceivers().find(e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function shimAudioContext(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimLocalStreamsAPI:shimLocalStreamsAPI,shimRemoteStreamsAPI:shimRemoteStreamsAPI,shimCallbacksAPI:shimCallbacksAPI,shimGetUserMedia:shimGetUserMedia,shimConstraints:shimConstraints,shimRTCIceServerUrls:shimRTCIceServerUrls,shimTrackEventTransceiver:shimTrackEventTransceiver,shimCreateOfferLegacy:shimCreateOfferLegacy,shimAudioContext:shimAudioContext}),sdp$1={exports:{}},SDPUtils=(!function(e){const l={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};l.localCName=l.generateIdentifier(),l.splitLines=function(e){return e.trim().split("\n").map(e=>e.trim())},l.splitSections=function(e){const t=e.split("\nm=");return t.map((e,t)=>(0<t?"m="+e:e).trim()+"\r\n")},l.getDescription=function(e){e=l.splitSections(e);return e&&e[0]},l.getMediaSections=function(e){const t=l.splitSections(e);return t.shift(),t},l.matchPrefix=function(e,t){return l.splitLines(e).filter(e=>0===e.indexOf(t))},l.parseCandidate=function(e){let t;const i={foundation:(t=(0===e.indexOf("a=candidate:")?e.substring(12):e.substring(10)).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":i.relatedAddress=t[e+1];break;case"rport":i.relatedPort=parseInt(t[e+1],10);break;case"tcptype":i.tcpType=t[e+1];break;case"ufrag":i.ufrag=t[e+1],i.usernameFragment=t[e+1];break;default:void 0===i[t[e]]&&(i[t[e]]=t[e+1])}return i},l.writeCandidate=function(e){const t=[];t.push(e.foundation);var i=e.component,i=("rtp"===i?t.push(1):"rtcp"===i?t.push(2):t.push(i),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port),e.type);return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},l.parseIceOptions=function(e){return e.substr(14).split(" ")},l.parseRtpMap=function(e){let t=e.substr(9).split(" ");const i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},l.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},l.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}},l.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},l.parseFmtp=function(e){const t={};let i;const r=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)i=r[e].trim().split("="),t[i[0].trim()]=i[1];return t},l.writeFmtp=function(t){let e="",i=t.payloadType;if(void 0!==t.preferredPayloadType&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const r=[];Object.keys(t.parameters).forEach(e=>{void 0!==t.parameters[e]?r.push(e+"="+t.parameters[e]):r.push(e)}),e+="a=fmtp:"+i+" "+r.join(";")+"\r\n"}return e},l.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},l.writeRtcpFb=function(e){let t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(e=>{t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},l.parseSsrcMedia=function(e){var t=e.indexOf(" ");const i={ssrc:parseInt(e.substr(7,t-7),10)};var r=e.indexOf(":",t);return-1<r?(i.attribute=e.substr(t+1,r-t-1),i.value=e.substr(r+1)):i.attribute=e.substr(t+1),i},l.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(e=>parseInt(e,10))}},l.getMid=function(e){const t=l.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},l.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},l.getDtlsParameters=function(e,t){const i=l.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:i.map(l.parseFingerprint)}},l.writeDtlsParameters=function(e,t){let i="a=setup:"+t+"\r\n";return e.fingerprints.forEach(e=>{i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),i},l.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},l.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?l.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},l.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},l.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},l.getCryptoParameters=function(e,t){const i=l.matchPrefix(e+t,"a=crypto:");return i.map(l.parseCryptoLine)},l.getIceParameters=function(e,t){const i=l.matchPrefix(e+t,"a=ice-ufrag:")[0],r=l.matchPrefix(e+t,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substr(12),password:r.substr(10)}:null},l.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},l.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},e=l.splitLines(t);var r=e[0].split(" ");for(let e=3;e<r.length;e++){var n=r[e],o=l.matchPrefix(t,"a=rtpmap:"+n+" ")[0];if(o){const a=l.parseRtpMap(o);o=l.matchPrefix(t,"a=fmtp:"+n+" ");switch(a.parameters=o.length?l.parseFmtp(o[0]):{},a.rtcpFeedback=l.matchPrefix(t,"a=rtcp-fb:"+n+" ").map(l.parseRtcpFb),i.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(a.name.toUpperCase())}}}return l.matchPrefix(t,"a=extmap:").forEach(e=>{i.headerExtensions.push(l.parseExtmap(e))}),i},l.writeRtpDescription=function(e,t){let i="",r=(i=(i=(i=(i+="m="+e+" ")+(0<t.codecs.length?"9":"0")+" UDP/TLS/RTP/SAVPF ")+(t.codecs.map(e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType).join(" ")+"\r\n"))+"c=IN IP4 0.0.0.0\r\n"+"a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(e=>{i=(i=(i+=l.writeRtpMap(e))+l.writeFmtp(e))+l.writeRtcpFb(e)}),0);return t.codecs.forEach(e=>{e.maxptime>r&&(r=e.maxptime)}),0<r&&(i+="a=maxptime:"+r+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach(e=>{i+=l.writeExtmap(e)}),i},l.parseRtpEncodingParameters=function(e){const i=[],t=l.parseRtpParameters(e),r=-1!==t.fecMechanisms.indexOf("RED"),n=-1!==t.fecMechanisms.indexOf("ULPFEC");var o=l.matchPrefix(e,"a=ssrc:").map(e=>l.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute);const a=0<o.length&&o[0].ssrc;let s;o=l.matchPrefix(e,"a=ssrc-group:FID").map(e=>{const t=e.substr(17).split(" ");return t.map(e=>parseInt(e,10))});0<o.length&&1<o[0].length&&o[0][0]===a&&(s=o[0][1]),t.codecs.forEach(t=>{if("RTX"===t.name.toUpperCase()&&t.parameters.apt){let e={ssrc:a,codecPayloadType:parseInt(t.parameters.apt,10)};a&&s&&(e.rtx={ssrc:s}),i.push(e),r&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:a,mechanism:n?"red+ulpfec":"red"},i.push(e))}}),0===i.length&&a&&i.push({ssrc:a});let c=l.matchPrefix(e,"b=");return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,i.forEach(e=>{e.maxBitrate=c})),i},l.parseRtcpParameters=function(e){const t={};var i=l.matchPrefix(e,"a=ssrc:").map(e=>l.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute)[0],i=(i&&(t.cname=i.value,t.ssrc=i.ssrc),l.matchPrefix(e,"a=rtcp-rsize")),i=(t.reducedSize=0<i.length,t.compound=0===i.length,l.matchPrefix(e,"a=rtcp-mux"));return t.mux=0<i.length,t},l.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},l.parseMsid=function(e){let t;const i=l.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(t=i[0].substr(7).split(" "))[0],track:t[1]};const r=l.matchPrefix(e,"a=ssrc:").map(e=>l.parseSsrcMedia(e)).filter(e=>"msid"===e.attribute);return 0<r.length?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},l.parseSctpDescription=function(e){var t=l.parseMLine(e);const i=l.matchPrefix(e,"a=max-message-size:");let r;0<i.length&&(r=parseInt(i[0].substr(19),10)),isNaN(r)&&(r=65536);const n=l.matchPrefix(e,"a=sctp-port:");if(0<n.length)return{port:parseInt(n[0].substr(12),10),protocol:t.fmt,maxMessageSize:r};const o=l.matchPrefix(e,"a=sctpmap:");return 0<o.length?(t=o[0].substr(10).split(" "),{port:parseInt(t[0],10),protocol:t[1],maxMessageSize:r}):void 0},l.writeSctpDescription=function(e,t){let i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},l.generateSessionId=function(){return Math.random().toString().substr(2,21)},l.writeSessionBoilerplate=function(e,t,i){let r;t=void 0!==t?t:2;return"v=0\r\no="+(i||"thisisadapterortc")+" "+(r=e||l.generateSessionId())+" "+t+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},l.getDirection=function(e,t){const i=l.splitLines(e);for(let e=0;e<i.length;e++)switch(i[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[e].substr(2)}return t?l.getDirection(t):"sendrecv"},l.getKind=function(e){const t=l.splitLines(e),i=t[0].split(" ");return i[0].substr(2)},l.isRejected=function(e){return"0"===e.split(" ",2)[1]},l.parseMLine=function(e){const t=l.splitLines(e),i=t[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},l.parseOLine=function(e){const t=l.matchPrefix(e,"o=")[0];e=t.substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},l.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const t=l.splitLines(e);for(let e=0;e<t.length;e++)if(t[e].length<2||"="!==t[e].charAt(1))return!1;return!0},e.exports=l}(sdp$1),sdp$1.exports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdp$1.exports]);function shimRTCIceCandidate(t){if(t.RTCIceCandidate&&!(t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)){const n=t.RTCIceCandidate;t.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var t=new n(e),i=SDPUtils.parseCandidate(e.candidate);const r=Object.assign(t,i);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new n(e)},t.RTCIceCandidate.prototype=n.prototype,wrapPeerConnectionEvent(t,"icecandidate",e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e))}}function shimMaxMessageSize(e,n){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===n.browser&&76<=n.version&&(t=this.getConfiguration()["sdpSemantics"],"plan-b"===t&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})),function(e){if(!e||!e.sdp)return!1;const t=SDPUtils.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=SDPUtils.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){var t=function(e){e=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===e||e.length<2)return-1;e=parseInt(e[1],10);return e!=e?-1:e}(arguments[0]),i=function(e){let t=65536;return t="firefox"===n.browser?n.version<57?-1===e?16384:2147483637:n.version<60?57===n.version?65535:65536:2147483637:t}(t),t=function(e,t){let i=65536;"firefox"===n.browser&&57===n.version&&(i=65535);const r=SDPUtils.matchPrefix(e.sdp,"a=max-message-size:");return 0<r.length?i=parseInt(r[0].substr(19),10):"firefox"===n.browser&&-1!==t&&(i=2147483637),i}(arguments[0],t);let e;e=0===i&&0===t?Number.POSITIVE_INFINITY:0===i||0===t?Math.max(i,t):Math.min(i,t);i={};Object.defineProperty(i,"maxMessageSize",{get(){return e}}),this._sctp=i}return r.apply(this,arguments)}}}function shimSendThrowTypeError(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){const i=e.RTCPeerConnection.prototype.createDataChannel;function t(t,i){const r=t.send;t.send=function(){var e=arguments[0],e=e.length||e.size||e.byteLength;if("open"===t.readyState&&i.sctp&&e>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return r.apply(t,arguments)}}e.RTCPeerConnection.prototype.createDataChannel=function(){var e=i.apply(this,arguments);return t(e,this),e},wrapPeerConnectionEvent(e,"datachannel",e=>(t(e.channel,e.target),e))}}function shimConnectionState(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){const i=e.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const t=i[e];i[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;var i;return t._lastConnectionState!==t.connectionState&&(t._lastConnectionState=t.connectionState,i=new Event("connectionstatechange",e),t.dispatchEvent(i)),e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}}function removeExtmapAllowMixed(i,e){if(i.RTCPeerConnection&&!("chrome"===e.browser&&71<=e.version||"safari"===e.browser&&605<=e.version)){const r=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t;return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(t=e.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n"),i.RTCSessionDescription&&e instanceof i.RTCSessionDescription?arguments[0]=new i.RTCSessionDescription({type:e.type,sdp:t}):e.sdp=t),r.apply(this,arguments)}}}function shimAddIceCandidateNullOrEmpty(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){const i=e.RTCPeerConnection.prototype.addIceCandidate;i&&0!==i.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function shimParameterlessSetLocalDescription(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){const i=e.RTCPeerConnection.prototype.setLocalDescription;i&&0!==i.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return i.apply(this,arguments);if(!(e={type:e.type,sdp:e.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return i.apply(this,[e]);const t="offer"===e.type?this.createOffer:this.createAnswer;return t.apply(this).then(e=>i.apply(this,[e]))})}}var commonShim=Object.freeze({__proto__:null,shimRTCIceCandidate:shimRTCIceCandidate,shimMaxMessageSize:shimMaxMessageSize,shimSendThrowTypeError:shimSendThrowTypeError,shimConnectionState:shimConnectionState,removeExtmapAllowMixed:removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty:shimAddIceCandidateNullOrEmpty,shimParameterlessSetLocalDescription:shimParameterlessSetLocalDescription}),PCState,ConnectionState;function adapterFactory({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const i=log;var r=detectBrowser(e);const n={browserDetails:r,commonShim:commonShim,extractVersion:extractVersion,disableLog:disableLog,disableWarnings:disableWarnings,sdp:sdp};switch(r.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),n;if(null===r.version)return i("Chrome shim can not determine version, not shimming."),n;i("adapter.js shimming chrome."),n.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(e,r),shimParameterlessSetLocalDescription(e),shimGetUserMedia$2(e,r),shimMediaStream(e),shimPeerConnection$1(e,r),shimOnTrack$1(e),shimAddTrackRemoveTrack(e,r),shimGetSendersWithDtmf(e),shimGetStats(e),shimSenderReceiverGetStats(e),fixNegotiationNeeded(e,r),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,r),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,r);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),n;i("adapter.js shimming firefox."),n.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(e,r),shimParameterlessSetLocalDescription(e),shimGetUserMedia$1(e,r),shimPeerConnection(e,r),shimOnTrack(e),shimRemoveStream(e),shimSenderGetStats(e),shimReceiverGetStats(e),shimRTCDataChannel(e),shimAddTransceiver(e),shimGetParameters(e),shimCreateOffer(e),shimCreateAnswer(e),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,r),shimSendThrowTypeError(e);break;case"safari":if(!safariShim||!t.shimSafari)return i("Safari shim is not included in this adapter release."),n;i("adapter.js shimming safari."),n.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(e,r),shimParameterlessSetLocalDescription(e),shimRTCIceServerUrls(e),shimCreateOfferLegacy(e),shimCallbacksAPI(e),shimLocalStreamsAPI(e),shimRemoteStreamsAPI(e),shimTrackEventTransceiver(e),shimGetUserMedia(e),shimAudioContext(e),shimRTCIceCandidate(e),shimMaxMessageSize(e,r),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,r);break;default:i("Unsupported browser!")}return n}adapterFactory({window:"undefined"==typeof window?void 0:window});const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(e){var t=void 0!==Object.keys(e).find(e=>passThroughQueueSignals.includes(e));return livekitLogger.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}class SignalClient{constructor(e=!1){this.isConnected=!1,this.isReconnecting=!1,this.useJSON=e,this.requestQueue=new Queue,this.queuedRequests=[]}join(e,t,i,r){return __awaiter(this,void 0,void 0,function*(){return this.isConnected=!1,yield this.connect(e,t,{autoSubscribe:null==i?void 0:i.autoSubscribe,publishOnly:null==i?void 0:i.publishOnly,adaptiveStream:null==i?void 0:i.adaptiveStream},r)})}reconnect(e,t){return __awaiter(this,void 0,void 0,function*(){this.isReconnecting=!0,yield this.connect(e,t,{reconnect:!0})})}connect(a,e,i,s){a=(a=a.startsWith("http")?a.replace("http","ws"):a).replace(/\/$/,""),a+="/rtc";const c=createConnectionParams(e,getClientInfo(),i);return new Promise((r,n)=>{const o=()=>{t.close(),this.close(),n(new ConnectionError("room connection has been cancelled"))},t=(null!=s&&s.aborted&&o(),null!=s&&s.addEventListener("abort",o),livekitLogger.debug("connecting to "+(a+c)),this.ws=void 0,new WebSocket(a+c));t.binaryType="arraybuffer",t.onerror=i=>__awaiter(this,void 0,void 0,function*(){if(this.ws)this.handleWSError(i);else try{const t=yield fetch(`http${a.substring(2)}/validate`+c);var e;t.ok?n(new ConnectionError("Internal error")):(e=yield t.text(),n(new ConnectionError(e)))}catch(e){n(new ConnectionError("server was not reachable"))}}),t.onopen=()=>{this.ws=t,i.reconnect&&(this.isConnected=!0,r())},t.onmessage=i=>__awaiter(this,void 0,void 0,function*(){let e;if("string"==typeof i.data){var t=JSON.parse(i.data);e=SignalResponse.fromJSON(t)}else{if(!(i.data instanceof ArrayBuffer))return void livekitLogger.error("could not decode websocket message: "+typeof i.data);e=SignalResponse.decode(new Uint8Array(i.data))}this.isConnected?(this.signalLatency&&(yield sleep(this.signalLatency)),this.handleSignalResponse(e)):e.join?(this.isConnected=!0,null!=s&&s.removeEventListener("abort",o),r(e.join)):n(new ConnectionError("did not receive join response"))}),t.onclose=e=>{this.isConnected&&this.ws===t&&(livekitLogger.debug("websocket connection closed: "+e.reason),this.isConnected=!1,this.onClose&&this.onClose(e.reason),this.ws===t&&(this.ws=void 0))}})}close(){var e;this.isConnected=!1,this.ws&&(this.ws.onclose=null),null!=(e=this.ws)&&e.close(),this.ws=void 0}sendOffer(e){livekitLogger.debug("sending offer",e),this.sendRequest({offer:toProtoSessionDescription(e)})}sendAnswer(e){livekitLogger.debug("sending answer"),this.sendRequest({answer:toProtoSessionDescription(e)})}sendIceCandidate(e,t){livekitLogger.trace("sending ice candidate",e),this.sendRequest({trickle:{candidateInit:JSON.stringify(e),target:t}})}sendMuteTrack(e,t){this.sendRequest({mute:{sid:e,muted:t}})}sendAddTrack(e){this.sendRequest({addTrack:AddTrackRequest.fromPartial(e)})}sendUpdateTrackSettings(e){this.sendRequest({trackSetting:e})}sendUpdateSubscription(e){this.sendRequest({subscription:e})}sendSyncState(e){this.sendRequest({syncState:e})}sendUpdateVideoLayers(e,t){this.sendRequest({updateLayers:{trackSid:e,layers:t}})}sendUpdateSubscriptionPermissions(e,t){this.sendRequest({subscriptionPermission:{allParticipants:e,trackPermissions:t}})}sendSimulateScenario(e){this.sendRequest({simulate:e})}sendLeave(){return __awaiter(this,void 0,void 0,function*(){yield this.sendRequest(SignalRequest.fromPartial({leave:{}}))})}sendRequest(e,t=!1){return __awaiter(this,void 0,void 0,function*(){if(!t&&!canPassThroughQueue(e)&&this.isReconnecting)this.queuedRequests.push(()=>__awaiter(this,void 0,void 0,function*(){yield this.sendRequest(e,!0)}));else if(t||(yield this.requestQueue.flush()),this.signalLatency&&(yield sleep(this.signalLatency)),this.ws)try{this.useJSON?this.ws.send(JSON.stringify(SignalRequest.toJSON(e))):this.ws.send(SignalRequest.encode(e).finish())}catch(e){livekitLogger.error("error sending signal message",{error:e})}else livekitLogger.error("cannot send signal request before connected")})}handleSignalResponse(e){var t;e.answer?(t=fromProtoSessionDescription(e.answer),this.onAnswer&&this.onAnswer(t)):e.offer?(t=fromProtoSessionDescription(e.offer),this.onOffer&&this.onOffer(t)):e.trickle?(t=JSON.parse(e.trickle.candidateInit),this.onTrickle&&this.onTrickle(t,e.trickle.target)):e.update?this.onParticipantUpdate&&this.onParticipantUpdate(e.update.participants):e.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(e.trackPublished):e.speakersChanged?this.onSpeakersChanged&&this.onSpeakersChanged(e.speakersChanged.speakers):e.leave?this.onLeave&&this.onLeave(e.leave):e.mute?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(e.mute.sid,e.mute.muted):e.roomUpdate?this.onRoomUpdate&&this.onRoomUpdate(e.roomUpdate.room):e.connectionQuality?this.onConnectionQuality&&this.onConnectionQuality(e.connectionQuality):e.streamStateUpdate?this.onStreamStateUpdate&&this.onStreamStateUpdate(e.streamStateUpdate):e.subscribedQualityUpdate?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(e.subscribedQualityUpdate):e.subscriptionPermissionUpdate?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(e.subscriptionPermissionUpdate):e.refreshToken?this.onTokenRefresh&&this.onTokenRefresh(e.refreshToken):e.trackUnpublished?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(e.trackUnpublished):livekitLogger.debug("unsupported message",e)}setReconnected(){for(;0<this.queuedRequests.length;){var e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}this.isReconnecting=!1}handleWSError(e){livekitLogger.error("websocket error",e)}}function fromProtoSessionDescription(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type}return t}function toProtoSessionDescription(e){return{sdp:e.sdp,type:e.type}}function createConnectionParams(e,t,i){const r=new URLSearchParams;return r.set("access_token",e),null!=i&&i.reconnect&&r.set("reconnect","1"),void 0!==(null==i?void 0:i.autoSubscribe)&&r.set("auto_subscribe",i.autoSubscribe?"1":"0"),r.set("sdk","js"),r.set("version",t.version),r.set("protocol",t.protocol.toString()),t.deviceModel&&r.set("device_model",t.deviceModel),t.os&&r.set("os",t.os),t.osVersion&&r.set("os_version",t.osVersion),t.browser&&r.set("browser",t.browser),t.browserVersion&&r.set("browser_version",t.browserVersion),void 0!==(null==i?void 0:i.publishOnly)&&r.set("publish",i.publishOnly),null!=i&&i.adaptiveStream&&r.set("adaptive_stream","1"),"?"+r.toString()}class PCTransport{constructor(e){this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.negotiate=r(()=>{this.createAndSendOffer()},100),this.pc=new RTCPeerConnection(e)}get isICEConnected(){return"connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState}addIceCandidate(e){return __awaiter(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){return __awaiter(this,void 0,void 0,function*(){yield this.pc.setRemoteDescription(e),this.pendingCandidates.forEach(e=>{this.pc.addIceCandidate(e)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate&&(this.renegotiate=!1,this.createAndSendOffer())})}createAndSendOffer(t){return __awaiter(this,void 0,void 0,function*(){if(void 0!==this.onOffer){if(null!=t&&t.iceRestart&&(livekitLogger.debug("restarting ICE"),this.restartingIce=!0),"have-local-offer"===this.pc.signalingState){var e=this.pc.remoteDescription;if(null==t||!t.iceRestart||!e)return void(this.renegotiate=!0);yield this.pc.setRemoteDescription(e)}else if("closed"===this.pc.signalingState)return void livekitLogger.warn("could not createOffer with closed peer connection");livekitLogger.debug("starting to negotiate");e=yield this.pc.createOffer(t);yield this.pc.setLocalDescription(e),this.onOffer(e)}})}close(){this.pc.close()}}const lossyDataChannel="_lossy",reliableDataChannel="_reliable",maxReconnectRetries=10,minReconnectWait=2e3,maxReconnectDuration=6e4,maxICEConnectTimeout=15e3;!function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"}(PCState=PCState||{});class RTCEngine extends events$1.exports.EventEmitter{constructor(){super(),this.rtcConfig={},this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.reconnectStart=0,this.fullReconnectOnNext=!1,this.attemptingReconnect=!1,this.handleDataChannel=({channel:e})=>__awaiter(this,void 0,void 0,function*(){if(e){if(e.label===reliableDataChannel)this.reliableDCSub=e;else{if(e.label!==lossyDataChannel)return;this.lossyDCSub=e}livekitLogger.debug(`on data channel ${e.id}, `+e.label),e.onmessage=this.handleDataMessage}}),this.handleDataMessage=i=>__awaiter(this,void 0,void 0,function*(){let e;if(i.data instanceof ArrayBuffer)e=i.data;else{if(!(i.data instanceof Blob))return void livekitLogger.error("unsupported data type",i.data);e=yield i.data.arrayBuffer()}var t=DataPacket.decode(new Uint8Array(e));t.speaker?this.emit(EngineEvent.ActiveSpeakersUpdate,t.speaker.speakers):t.user&&this.emit(EngineEvent.DataPacketReceived,t.user,t.kind)}),this.handleDataError=e=>{var t,i=0===e.currentTarget.maxRetransmits?"lossy":"reliable";e instanceof ErrorEvent?(t=e.error["error"],livekitLogger.error(`DataChannel error on ${i}: `+e.message,t)):livekitLogger.error("Unknown DataChannel Error on "+i,e)},this.handleDisconnect=e=>{this._isClosed||(livekitLogger.debug(e+" disconnected"),0===this.reconnectAttempts&&(this.reconnectStart=Date.now()),e=this.reconnectAttempts*this.reconnectAttempts*300,setTimeout(()=>__awaiter(this,void 0,void 0,function*(){var e;if(!this._isClosed&&!this.attemptingReconnect){!isFireFox()&&(null==(e=this.clientConfiguration)?void 0:e.resumeConnection)!==ClientConfigSetting.DISABLED&&"closed"!==(null!=(e=null==(e=this.primaryPC)?void 0:e.signalingState)?e:"closed")||(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(),this.reconnectAttempts=0,this.fullReconnectOnNext=!1}catch(e){this.reconnectAttempts+=1;let t=!1,i=!0;e instanceof UnexpectedConnectionState?(livekitLogger.debug("received unrecoverable error",{error:e}),i=!1):e instanceof SignalReconnectError||(t=!0),t&&!this.fullReconnectOnNext&&(this.fullReconnectOnNext=!0,this.reconnectAttempts=0);var r=Date.now()-this.reconnectStart;(i=this.reconnectAttempts>=maxReconnectRetries||r>maxReconnectDuration?!1:i)?this.handleDisconnect("reconnect"):(livekitLogger.info(`could not recover connection after ${maxReconnectRetries} attempts, ${r}ms. giving up`),this.emit(EngineEvent.Disconnected),this.close())}finally{this.attemptingReconnect=!1}}}),e))},this.client=new SignalClient}get isClosed(){return this._isClosed}join(t,i,r,n){return __awaiter(this,void 0,void 0,function*(){this.url=t,this.token=i,this.signalOpts=r;var e=yield this.client.join(t,i,r,n);return this._isClosed=!1,this.subscriberPrimary=e.subscriberPrimary,this.publisher||this.configure(e),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=e.clientConfiguration,e})}close(){this._isClosed=!0,this.removeAllListeners(),this.publisher&&"closed"!==this.publisher.pc.signalingState&&(this.publisher.pc.getSenders().forEach(e=>{var t,i;try{null!=(t=this.publisher)&&t.pc.removeTrack&&null!=(i=this.publisher)&&i.pc.removeTrack(e)}catch(e){livekitLogger.warn("could not removeTrack",{error:e})}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise(e=>{this.pendingTrackResolvers[t.cid]=e,this.client.sendAddTrack(t)})}updateMuteStatus(e,t){this.client.sendMuteTrack(e,t)}get dataSubscriberReadyState(){var e;return null==(e=this.reliableDCSub)?void 0:e.readyState}get connectedServerAddress(){return this.connectedServerAddr}configure(i){if(!this.publisher&&!this.subscriber){if(i.iceServers&&!this.rtcConfig.iceServers){const r=[];i.iceServers.forEach(e=>{const t={urls:e.urls};e.username&&(t.username=e.username),e.credential&&(t.credential=e.credential),r.push(t)}),this.rtcConfig.iceServers=r}this.rtcConfig.sdpSemantics="unified-plan",this.rtcConfig.continualGatheringPolicy="gather_continually",this.publisher=new PCTransport(this.rtcConfig),this.subscriber=new PCTransport(this.rtcConfig),this.emit(EngineEvent.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=e=>{e.candidate&&(livekitLogger.trace("adding ICE candidate for peer",e.candidate),this.client.sendIceCandidate(e.candidate,SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=e=>{e.candidate&&this.client.sendIceCandidate(e.candidate,SignalTarget.SUBSCRIBER)},this.publisher.onOffer=e=>{this.client.sendOffer(e)};let t=this.publisher.pc,e=this.subscriber.pc;i.subscriberPrimary&&(t=this.subscriber.pc,e=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),(this.primaryPC=t).onconnectionstatechange=()=>__awaiter(this,void 0,void 0,function*(){if(livekitLogger.debug("primary PC state changed",{state:t.connectionState}),"connected"===t.connectionState){try{this.connectedServerAddr=yield getConnectedAddress(t)}catch(e){livekitLogger.warn("could not get connected server address",{error:e})}var e=this.pcState===PCState.New;this.pcState=PCState.Connected,e&&this.emit(EngineEvent.Connected)}else"failed"===t.connectionState&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("primary peerconnection"))}),e.onconnectionstatechange=()=>__awaiter(this,void 0,void 0,function*(){livekitLogger.debug("secondary PC state changed",{state:e.connectionState}),"failed"===e.connectionState&&this.handleDisconnect("secondary peerconnection")}),isWeb()?this.subscriber.pc.ontrack=e=>{this.emit(EngineEvent.MediaTrackAdded,e.track,e.streams[0],e.receiver)}:this.subscriber.pc.onaddstream=e=>{var t=e.stream.getTracks()[0];this.emit(EngineEvent.MediaTrackAdded,t,e.stream)},this.lossyDC=this.publisher.pc.createDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.client.onAnswer=e=>__awaiter(this,void 0,void 0,function*(){this.publisher&&(livekitLogger.debug("received server answer",{RTCSdpType:e.type,signalingState:this.publisher.pc.signalingState}),yield this.publisher.setRemoteDescription(e))}),this.client.onTrickle=(e,t)=>{this.publisher&&this.subscriber&&(livekitLogger.trace("got ICE candidate from peer",{candidate:e,target:t}),(t===SignalTarget.PUBLISHER?this.publisher:this.subscriber).addIceCandidate(e))},this.client.onOffer=t=>__awaiter(this,void 0,void 0,function*(){var e;this.subscriber&&(livekitLogger.debug("received server offer",{RTCSdpType:t.type,signalingState:this.subscriber.pc.signalingState}),yield this.subscriber.setRemoteDescription(t),e=yield this.subscriber.pc.createAnswer(),yield this.subscriber.pc.setLocalDescription(e),this.client.sendAnswer(e))}),this.client.onLocalTrackPublished=e=>{livekitLogger.debug("received trackPublishedResponse",e);const t=this.pendingTrackResolvers[e.cid];t?(delete this.pendingTrackResolvers[e.cid],t(e.track)):livekitLogger.error("missing track resolver for "+e.cid)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onClose=()=>{this.handleDisconnect("signal")},this.client.onLeave=e=>{null!=e&&e.canReconnect?(this.fullReconnectOnNext=!0,this.primaryPC=void 0):(this.emit(EngineEvent.Disconnected,null==e?void 0:e.reason),this.close()),livekitLogger.trace("leave request",{leave:e})}}}restartConnection(){var t;return __awaiter(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");livekitLogger.info("reconnecting, attempt: "+this.reconnectAttempts),0===this.reconnectAttempts&&this.emit(EngineEvent.Restarting),this.client.isConnected&&this.client.sendLeave(),this.client.close(),this.primaryPC=void 0,null!=(t=this.publisher)&&t.close(),this.publisher=void 0,null!=(t=this.subscriber)&&t.close(),this.subscriber=void 0;let e;try{e=yield this.join(this.url,this.token,this.signalOpts)}catch(e){throw new SignalReconnectError}yield this.waitForPCConnected(),this.client.setReconnected(),this.emit(EngineEvent.Restarted,e)})}resumeConnection(){return __awaiter(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.publisher||!this.subscriber)throw new UnexpectedConnectionState("publisher and subscriber connections unset");livekitLogger.info("resuming signal connection, attempt "+this.reconnectAttempts),0===this.reconnectAttempts&&this.emit(EngineEvent.Resuming);try{yield this.client.reconnect(this.url,this.token)}catch(e){throw new SignalReconnectError}this.emit(EngineEvent.SignalResumed),this.subscriber.restartingIce=!0,this.hasPublished&&(yield this.publisher.createAndSendOffer({iceRestart:!0})),yield this.waitForPCConnected(),this.client.setReconnected(),this.emit(EngineEvent.Resumed)})}waitForPCConnected(){var i;return __awaiter(this,void 0,void 0,function*(){var e=Date.now();let t=e;for(this.pcState=PCState.Reconnecting,livekitLogger.debug("waiting for peer connection to reconnect");t-e<maxICEConnectTimeout&&void 0!==this.primaryPC;){if(t-e>minReconnectWait&&"connected"===(null==(i=this.primaryPC)?void 0:i.connectionState)){this.pcState=PCState.Connected;try{this.connectedServerAddr=yield getConnectedAddress(this.primaryPC)}catch(e){livekitLogger.warn("could not get connected server address",{error:e})}}if(this.pcState===PCState.Connected)return;yield sleep(100),t=Date.now()}throw new ConnectionError("could not establish PC connection")})}sendDataPacket(t,i){return __awaiter(this,void 0,void 0,function*(){var e=DataPacket.encode(t).finish();yield this.ensurePublisherConnected(i),i===DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send(e):i===DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send(e)})}ensurePublisherConnected(i){var r,n;return __awaiter(this,void 0,void 0,function*(){if(this.subscriberPrimary){if(!this.publisher)throw new ConnectionError("publisher connection not set");this.publisher.isICEConnected||"checking"===this.publisher.pc.iceConnectionState||this.negotiate();var e=this.dataChannelForKind(i);if("open"!==(null==e?void 0:e.readyState)){for(var t=(new Date).getTime()+maxICEConnectTimeout;(new Date).getTime()<t;){if(this.publisher.isICEConnected&&"open"===(null==(r=this.dataChannelForKind(i))?void 0:r.readyState))return;yield sleep(50)}throw new ConnectionError("could not establish publisher connection, state "+(null==(n=this.publisher)?void 0:n.pc.iceConnectionState))}}})}negotiate(){this.publisher&&(this.hasPublished=!0,this.publisher.negotiate())}dataChannelForKind(e,t){return t?e===DataPacket_Kind.LOSSY?this.lossyDCSub:e===DataPacket_Kind.RELIABLE?this.reliableDCSub:void 0:e===DataPacket_Kind.LOSSY?this.lossyDC:e===DataPacket_Kind.RELIABLE?this.reliableDC:void 0}}function getConnectedAddress(o){var a;return __awaiter(this,void 0,void 0,function*(){let t="";const i=new Map,r=new Map,e=yield o.getStats();if(e.forEach(e=>{switch(e.type){case"transport":t=e.selectedCandidatePairId;break;case"candidate-pair":""===t&&e.selected&&(t=e.id),i.set(e.id,e);break;case"remote-candidate":r.set(e.id,e.address+":"+e.port)}}),""!==t){var n=null==(a=i.get(t))?void 0:a.remoteCandidateId;if(void 0!==n)return r.get(n)}})}class SignalReconnectError extends Error{}const publishDefaults={audioBitrate:AudioPresets.speech.maxBitrate,dtx:!0,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8"},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution};!function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting"}(ConnectionState=ConnectionState||{});class Room extends events$1.exports.EventEmitter{constructor(e){super(),this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.sid="",this.name="",this.metadata=void 0,this.audioEnabled=!0,this.connect=(a,s,c)=>__awaiter(this,void 0,void 0,function*(){var e,t;if(this.state!==ConnectionState.Connected){if(this.connectFuture)return this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting),this.abortController&&!this.abortController.signal.aborted||(this.abortController=new AbortController),this.createEngine(),this.acquireAudioContext(),null!=c&&c.rtcConfig&&(this.engine.rtcConfig=c.rtcConfig),this.connOptions=c;try{const o=yield this.engine.join(a,s,{autoSubscribe:null==c?void 0:c.autoSubscribe,publishOnly:null==c?void 0:c.publishOnly,adaptiveStream:"object"==typeof(null==(e=this.options)?void 0:e.adaptiveStream)||(null==(t=this.options)?void 0:t.adaptiveStream)},this.abortController.signal);if(livekitLogger.debug(`connected to server version: ${o.serverVersion}, region: `+o.serverRegion),!o.serverVersion)throw new UnsupportedServer("unknown server version");"0.15.1"===o.serverVersion&&this.options.dynacast&&(livekitLogger.debug("disabling dynacast due to server version"),this.options.dynacast=!1);var i=o.participant;this.localParticipant.sid=i.sid,this.localParticipant.identity=i.identity,this.localParticipant.updateInfo(i),this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,e=>{this.emit(RoomEvent.ParticipantMetadataChanged,e,this.localParticipant)}).on(ParticipantEvent.TrackMuted,e=>{this.emit(RoomEvent.TrackMuted,e,this.localParticipant)}).on(ParticipantEvent.TrackUnmuted,e=>{this.emit(RoomEvent.TrackUnmuted,e,this.localParticipant)}).on(ParticipantEvent.LocalTrackPublished,e=>{this.emit(RoomEvent.LocalTrackPublished,e,this.localParticipant)}).on(ParticipantEvent.LocalTrackUnpublished,e=>{this.emit(RoomEvent.LocalTrackUnpublished,e,this.localParticipant)}).on(ParticipantEvent.ConnectionQualityChanged,e=>{this.emit(RoomEvent.ConnectionQualityChanged,e,this.localParticipant)}).on(ParticipantEvent.MediaDevicesError,e=>{this.emit(RoomEvent.MediaDevicesError,e)}).on(ParticipantEvent.ParticipantPermissionsChanged,e=>{this.emit(RoomEvent.ParticipantPermissionsChanged,e,this.localParticipant)}),o.otherParticipants.forEach(e=>{e.sid!==this.localParticipant.sid&&e.identity!==this.localParticipant.identity?this.getOrCreateParticipant(e.sid,e):livekitLogger.warn("received info to create local participant as remote participant",{info:e,localParticipant:this.localParticipant})}),this.name=o.room.name,this.sid=o.room.sid,this.metadata=o.room.metadata,this.emit(RoomEvent.SignalConnected)}catch(e){throw this.recreateEngine(),this.setAndEmitConnectionState(ConnectionState.Disconnected,new ConnectionError("could not establish signal connection")),e}const r=setTimeout(()=>{this.recreateEngine(),this.setAndEmitConnectionState(ConnectionState.Disconnected,new ConnectionError("could not connect PeerConnection after timeout"))},maxICEConnectTimeout),n=()=>{livekitLogger.warn("closing engine"),clearTimeout(r),this.recreateEngine(),this.setAndEmitConnectionState(ConnectionState.Disconnected,new ConnectionError("room connection has been cancelled"))};return null!=(e=this.abortController)&&e.signal.aborted&&n(),null!=(t=this.abortController)&&t.signal.addEventListener("abort",n),this.engine.once(EngineEvent.Connected,()=>{var e;clearTimeout(r),null!=(e=this.abortController)&&e.signal.removeEventListener("abort",n),isWeb()&&(window.addEventListener("beforeunload",this.onBeforeUnload),null!=(e=navigator.mediaDevices)&&e.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Connected)}),this.connectFuture?this.connectFuture.promise:void 0}livekitLogger.warn("already connected to room "+this.name)}),this.disconnect=(t=!0)=>__awaiter(this,void 0,void 0,function*(){var e;if(livekitLogger.info("disconnect from room",{identity:this.localParticipant.identity}),this.state===ConnectionState.Connecting)return livekitLogger.warn("abort connection attempt"),void(null!=(e=this.abortController)&&e.abort());null!=(e=this.engine)&&e.client.isConnected&&(yield this.engine.client.sendLeave()),this.engine&&this.engine.close(),this.handleDisconnect(t,DisconnectReason.CLIENT_INITIATED),this.engine=void 0}),this.onBeforeUnload=()=>{this.disconnect()},this.handleRestarting=()=>{for(const e of this.participants.values())this.handleParticipantDisconnected(e.sid,e);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleRestarted=e=>__awaiter(this,void 0,void 0,function*(){livekitLogger.debug("reconnected to server",{region:e.serverRegion}),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),e.participant&&(this.localParticipant.sid=e.participant.sid,this.handleParticipantUpdates([e.participant])),this.handleParticipantUpdates(e.otherParticipants);const t=[];this.localParticipant.tracks.forEach(e=>{e.track&&t.push(e)}),yield Promise.all(t.map(t=>__awaiter(this,void 0,void 0,function*(){const e=t.track;this.localParticipant.unpublishTrack(e,!1),e.isMuted||((e instanceof LocalAudioTrack||e instanceof LocalVideoTrack)&&!e.isUserProvided&&(livekitLogger.debug("restarting existing track",{track:t.trackSid}),yield e.restartTrack()),yield this.localParticipant.publishTrack(e,t.options))})))}),this.handleParticipantUpdates=e=>{e.forEach(t=>{if(t.sid===this.localParticipant.sid||t.identity===this.localParticipant.identity)this.localParticipant.updateInfo(t);else{var i=this.identityToSid.get(t.identity);i&&i!==t.sid&&this.handleParticipantDisconnected(i,this.participants.get(i));let e=this.participants.get(t.sid);i=!e;e=this.getOrCreateParticipant(t.sid,t),t.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(t.sid,e):i?this.emitWhenConnected(RoomEvent.ParticipantConnected,e):e.updateInfo(t)}})},this.handleActiveSpeakersUpdate=e=>{const i=[],r={};e.forEach(e=>{if(r[e.sid]=!0,e.sid===this.localParticipant.sid)this.localParticipant.audioLevel=e.level,this.localParticipant.setIsSpeaking(!0),i.push(this.localParticipant);else{const t=this.participants.get(e.sid);t&&(t.audioLevel=e.level,t.setIsSpeaking(!0),i.push(t))}}),r[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(e=>{r[e.sid]||(e.audioLevel=0,e.setIsSpeaking(!1))}),this.activeSpeakers=i,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,i)},this.handleSpeakersChanged=e=>{const i=new Map,t=(this.activeSpeakers.forEach(e=>{i.set(e.sid,e)}),e.forEach(e=>{let t=this.participants.get(e.sid);(t=e.sid===this.localParticipant.sid?this.localParticipant:t)&&(t.audioLevel=e.level,t.setIsSpeaking(e.active),e.active?i.set(e.sid,t):i.delete(e.sid))}),Array.from(i.values()));t.sort((e,t)=>t.audioLevel-e.audioLevel),this.activeSpeakers=t,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,t)},this.handleStreamStateUpdate=e=>{e.streamStates.forEach(e=>{const t=this.participants.get(e.participantSid);if(t){const i=t.getTrackPublication(e.trackSid);i&&i.track&&(i.track.streamState=Track.streamStateFromProto(e.state),t.emit(ParticipantEvent.TrackStreamStateChanged,i,i.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,i,i.track.streamState,t))}})},this.handleSubscriptionPermissionUpdate=e=>{const t=this.participants.get(e.participantSid);if(t){const i=t.getTrackPublication(e.trackSid);i&&i.setAllowed(e.allowed)}},this.handleDataPacket=(e,t)=>{const i=this.participants.get(e.participantSid);this.emit(RoomEvent.DataReceived,e.payload,i,t),null!==i&&void 0!==i&&i.emit(ParticipantEvent.DataReceived,e.payload,t)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=e=>{livekitLogger.warn("could not playback audio",e),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>__awaiter(this,void 0,void 0,function*(){this.emit(RoomEvent.MediaDevicesChanged)}),this.handleRoomUpdate=e=>{this.metadata=e.metadata,this.emitWhenConnected(RoomEvent.RoomMetadataChanged,e.metadata)},this.handleConnectionQualityUpdate=e=>{e.updates.forEach(e=>{if(e.participantSid===this.localParticipant.sid)this.localParticipant.setConnectionQuality(e.quality);else{const t=this.participants.get(e.participantSid);t&&t.setConnectionQuality(e.quality)}})},this.participants=new Map,this.identityToSid=new Map,this.options=e||{},this.options.audioCaptureDefaults=Object.assign(Object.assign({},audioDefaults),null==e?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},videoDefaults),null==e?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},publishDefaults),null==e?void 0:e.publishDefaults),this.createEngine(),this.localParticipant=new LocalParticipant("","",this.engine,this.options)}createEngine(){this.engine||(this.engine=new RTCEngine,this.engine.client.signalLatency=this.options.expSignalLatency,this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(EngineEvent.MediaTrackAdded,(e,t,i)=>{this.onTrackAdded(e,t,i)}).on(EngineEvent.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)}).on(EngineEvent.Resumed,()=>{this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.updateSubscriptions()}).on(EngineEvent.SignalResumed,()=>{this.state===ConnectionState.Reconnecting&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.Restarted,this.handleRestarted),this.localParticipant&&(this.localParticipant.engine=this.engine))}static getLocalDevices(e,t=!0){return DeviceManager.getInstance().getDevices(e,t)}getParticipantByIdentity(e){if(this.localParticipant.identity===e)return this.localParticipant;e=this.identityToSid.get(e);return e?this.participants.get(e):void 0}simulateScenario(e){let t=()=>{},i;switch(e){case"signal-reconnect":this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate disconnect");break;case"speaker":i=SimulateScenario.fromPartial({speakerUpdate:3});break;case"node-failure":i=SimulateScenario.fromPartial({nodeFailure:!0});break;case"server-leave":i=SimulateScenario.fromPartial({serverLeave:!0});break;case"migration":i=SimulateScenario.fromPartial({migration:!0});break;case"switch-candidate":i=SimulateScenario.fromPartial({switchCandidateProtocol:1}),t=()=>{var e;null!=(e=this.engine.publisher)&&e.createAndSendOffer({iceRestart:!0})}}i&&(this.engine.client.sendSimulateScenario(i),t())}startAudio(){return __awaiter(this,void 0,void 0,function*(){this.acquireAudioContext();const t=[];this.participants.forEach(e=>{e.audioTracks.forEach(e=>{e.track&&e.track.attachedElements.forEach(e=>{t.push(e)})})});try{yield Promise.all(t.map(e=>e.play())),this.handleAudioPlaybackStarted()}catch(e){throw this.handleAudioPlaybackFailed(e),e}})}get canPlaybackAudio(){return this.audioEnabled}switchActiveDevice(r,n){return __awaiter(this,void 0,void 0,function*(){if("audioinput"===r){const e=Array.from(this.localParticipant.audioTracks.values()).filter(e=>e.source===Track.Source.Microphone);yield Promise.all(e.map(e=>{return null==(e=e.audioTrack)?void 0:e.setDeviceId(n)})),this.options.audioCaptureDefaults.deviceId=n}else if("videoinput"===r){const t=Array.from(this.localParticipant.videoTracks.values()).filter(e=>e.source===Track.Source.Camera);yield Promise.all(t.map(e=>{return null==(e=e.videoTrack)?void 0:e.setDeviceId(n)})),this.options.videoCaptureDefaults.deviceId=n}else if("audiooutput"===r){const i=[];this.participants.forEach(e=>{e.audioTracks.forEach(e=>{e.isSubscribed&&e.track&&e.track.attachedElements.forEach(e=>{i.push(e)})})}),yield Promise.all(i.map(e=>__awaiter(this,void 0,void 0,function*(){"setSinkId"in e&&(yield e.setSinkId(n))})))}})}recreateEngine(){this.engine.close(),this.engine=void 0,this.participants.clear(),this.createEngine()}onTrackAdded(i,r,n){if(this.connectFuture)this.connectFuture.promise.then(()=>{this.onTrackAdded(i,r,n)});else if(this.state===ConnectionState.Disconnected)livekitLogger.warn("skipping incoming track after Room disconnected");else{var e=unpackStreamId(r.id),o=e[0];let t=e[1];if(t&&""!==t||(t=i.id),o===this.localParticipant.sid)livekitLogger.warn("tried to create RemoteParticipant for local participant");else{const a=this.getOrCreateParticipant(o);let e;this.options.adaptiveStream&&(e="object"==typeof this.options.adaptiveStream?this.options.adaptiveStream:{}),a.addSubscribedMediaTrack(i,t,r,n,e)}}}handleDisconnect(i=!0,e){var t;this.state!==ConnectionState.Disconnected&&(this.participants.forEach(t=>{t.tracks.forEach(e=>{t.unpublishTrack(e.trackSid)})}),this.localParticipant.tracks.forEach(e=>{var t;e.track&&this.localParticipant.unpublishTrack(e.track,i),i&&(null!=(t=e.track)&&t.detach(),null!=(t=e.track)&&t.stop())}),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onBeforeUnload),null!=(t=navigator.mediaDevices)&&t.removeEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,e))}handleParticipantDisconnected(e,t){this.participants.delete(e),t&&(this.identityToSid.delete(t.identity),t.tracks.forEach(e=>{t.unpublishTrack(e.trackSid,!0)}),this.emitWhenConnected(RoomEvent.ParticipantDisconnected,t))}acquireAudioContext(){this.audioContext&&this.audioContext.close();var e=getNewAudioContext();e&&(this.audioContext=e)}createParticipant(e,t){let i;return i=t?RemoteParticipant.fromParticipantInfo(this.engine.client,t):new RemoteParticipant(this.engine.client,e,"")}getOrCreateParticipant(e,t){if(this.participants.has(e))return this.participants.get(e);const i=this.createParticipant(e,t);return this.participants.set(e,i),t&&this.identityToSid.set(t.identity,t.sid),i.on(ParticipantEvent.TrackPublished,e=>{this.emitWhenConnected(RoomEvent.TrackPublished,e,i)}).on(ParticipantEvent.TrackSubscribed,(e,t)=>{e.kind===Track.Kind.Audio&&(e.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),e.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(RoomEvent.TrackSubscribed,e,t,i)}).on(ParticipantEvent.TrackUnpublished,e=>{this.emitWhenConnected(RoomEvent.TrackUnpublished,e,i)}).on(ParticipantEvent.TrackUnsubscribed,(e,t)=>{this.emit(RoomEvent.TrackUnsubscribed,e,t,i)}).on(ParticipantEvent.TrackSubscriptionFailed,e=>{this.emit(RoomEvent.TrackSubscriptionFailed,e,i)}).on(ParticipantEvent.TrackMuted,e=>{this.emitWhenConnected(RoomEvent.TrackMuted,e,i)}).on(ParticipantEvent.TrackUnmuted,e=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,e,i)}).on(ParticipantEvent.ParticipantMetadataChanged,e=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,e,i)}).on(ParticipantEvent.ConnectionQualityChanged,e=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,e,i)}).on(ParticipantEvent.ParticipantPermissionsChanged,e=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,e,i)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,(e,t)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,e,t,i)}),t&&i.updateInfo(t),i}sendSyncState(){var e;if(void 0!==this.engine.subscriber&&null!==this.engine.subscriber.pc.localDescription){var t=this.engine.subscriber.pc.localDescription;const i=(null==(e=this.connOptions)?void 0:e.autoSubscribe)||!1,r=new Array;this.participants.forEach(e=>{e.tracks.forEach(e=>{e.isSubscribed!==i&&r.push(e.trackSid)})}),this.engine.client.sendSyncState({answer:toProtoSessionDescription({sdp:t.sdp,type:t.type}),subscription:{trackSids:r,subscribe:!i,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}}updateSubscriptions(){for(const e of this.participants.values())for(const t of e.videoTracks.values())t.isSubscribed&&t instanceof RemoteTrackPublication&&t.emitTrackUpdate()}setAndEmitConnectionState(e,t){if(e===this.state)return!1;switch(e){case ConnectionState.Connecting:case ConnectionState.Reconnecting:this.connectFuture||(this.connectFuture=new Future);break;case ConnectionState.Connected:this.connectFuture&&(this.connectFuture.resolve(),this.connectFuture=void 0);break;case ConnectionState.Disconnected:this.connectFuture&&(null==t&&(t=new Error("disconnected from Room")),this.connectFuture.reject(t),this.connectFuture=void 0)}return this.state=e,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0}emitWhenConnected(e,...t){return this.state===ConnectionState.Connected&&this.emit(e,...t)}emit(e,...t){return livekitLogger.debug("room event",{event:e,args:t}),super.emit(e,...t)}}var objectExtend=extend;function extend(){var e=[].slice.call(arguments),t=!1,i=("boolean"==typeof e[0]&&(t=e.shift()),e[0]);if(isUnextendable(i))throw new Error("extendee must be an object");for(var r=e.slice(1),n=r.length,o=0;o<n;o++){var a,s,c,l=r[o];for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s=l[a],t&&isCloneable(s)?(c=Array.isArray(s)?[]:{},i[a]=extend(!0,Object.prototype.hasOwnProperty.call(i,a)&&!isUnextendable(i[a])?i[a]:c,s)):i[a]=s)}return i}function isCloneable(e){return Array.isArray(e)||"[object Object]"=={}.toString.call(e)}function isUnextendable(e){return!e||"object"!=typeof e&&"function"!=typeof e}function $parcel$interopDefault(e){return e&&e.__esModule?e.default:e}class $4040acfd8584338d$export$2e2bcd8739ae039{on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}emit(e,...t){this._callbacks=this._callbacks||{};var i=this._callbacks[e];if(i)for(var r of i)r.apply(this,t);return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+e,{args:t})),this}makeEvent(e,t){var i,t={bubbles:!0,cancelable:!0,detail:t};return"function"==typeof window.CustomEvent?new CustomEvent(e,t):((i=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i)}off(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;let i=this._callbacks[e];if(i){if(1===arguments.length)return delete this._callbacks[e],this;for(let e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}}return this}}var $fd6031f88dce2e32$exports={},$fd6031f88dce2e32$exports='<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail=""></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size=""></span></div>\n    <div class="dz-filename"><span data-dz-name=""></span></div>\n  </div>\n  <div class="dz-progress">\n    <span class="dz-upload" data-dz-uploadprogress=""></span>\n  </div>\n  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>\n  <div class="dz-success-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>\n    </svg>\n  </div>\n</div>\n';let $4ca367182776f80b$var$defaultOptions={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(e,t,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept(e,t){return t()},chunksUploaded:function(e,t){t()},binaryBody:!1,fallback(){let e;this.element.className=this.element.className+" dz-browser-not-supported";for(var t of this.element.getElementsByTagName("div"))if(/(^| )dz-message($| )/.test(t.className)){(e=t).className="dz-message";break}e||(e=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));let i=e.getElementsByTagName("span")[0];return i&&(null!=i.textContent?i.textContent=this.options.dictFallbackMessage:null!=i.innerText&&(i.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize(e,t,i,r){let n={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height};var o=e.width/e.height,a=(null==t&&null==i?(t=n.srcWidth,i=n.srcHeight):null==t?t=i*o:null==i&&(i=t/o),(t=Math.min(t,n.srcWidth))/(i=Math.min(i,n.srcHeight)));if(n.srcWidth>t||n.srcHeight>i)if("crop"===r)a<o?(n.srcHeight=e.height,n.srcWidth=n.srcHeight*a):(n.srcWidth=e.width,n.srcHeight=n.srcWidth/a);else{if("contain"!==r)throw new Error(`Unknown resizeMethod '${r}'`);a<o?i=t/o:t=i*o}return n.srcX=(e.width-n.srcWidth)/2,n.srcY=(e.height-n.srcHeight)/2,n.trgWidth=t,n.trgHeight=i,n},transformFile(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:$parcel$interopDefault($fd6031f88dce2e32$exports),drop(e){return this.element.classList.remove("dz-drag-hover")},dragstart(e){},dragend(e){return this.element.classList.remove("dz-drag-hover")},dragenter(e){return this.element.classList.add("dz-drag-hover")},dragover(e){return this.element.classList.add("dz-drag-hover")},dragleave(e){return this.element.classList.remove("dz-drag-hover")},paste(e){},reset(){return this.element.classList.remove("dz-started")},addedfile(t){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){t.previewElement=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement);for(var e of t.previewElement.querySelectorAll("[data-dz-name]"))e.textContent=t.name;for(e of t.previewElement.querySelectorAll("[data-dz-size]"))e.innerHTML=this.filesize(t.size);this.options.addRemoveLinks&&(t._removeLink=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),t.previewElement.appendChild(t._removeLink));var i,r=e=>(e.preventDefault(),e.stopPropagation(),t.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING?$3ed269f2f0fb224b$export$2e2bcd8739ae039.confirm(this.options.dictCancelUploadConfirmation,()=>this.removeFile(t)):this.options.dictRemoveFileConfirmation?$3ed269f2f0fb224b$export$2e2bcd8739ae039.confirm(this.options.dictRemoveFileConfirmation,()=>this.removeFile(t)):this.removeFile(t));for(i of t.previewElement.querySelectorAll("[data-dz-remove]"))i.addEventListener("click",r)}},removedfile(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var i of e.previewElement.querySelectorAll("[data-dz-thumbnail]"))i.alt=e.name,i.src=t;return setTimeout(()=>e.previewElement.classList.add("dz-image-preview"),1)}},error(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);for(var i of e.previewElement.querySelectorAll("[data-dz-errormessage]"))i.textContent=t}},errormultiple(){},processing(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(e,t,i){if(e.previewElement)for(var r of e.previewElement.querySelectorAll("[data-dz-uploadprogress]"))"PROGRESS"===r.nodeName?r.value=t:r.style.width=t+"%"},totaluploadprogress(){},sending(){},sendingmultiple(){},success(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple(){},canceled(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple(){},complete(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}};var $4ca367182776f80b$export$2e2bcd8739ae039=$4ca367182776f80b$var$defaultOptions;class $3ed269f2f0fb224b$export$2e2bcd8739ae039 extends $4040acfd8584338d$export$2e2bcd8739ae039{static initClass(){this.prototype.Emitter=$4040acfd8584338d$export$2e2bcd8739ae039,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}getAcceptedFiles(){return this.files.filter(e=>e.accepted).map(e=>e)}getRejectedFiles(){return this.files.filter(e=>!e.accepted).map(e=>e)}getFilesWithStatus(t){return this.files.filter(e=>e.status===t).map(e=>e)}getQueuedFiles(){return this.getFilesWithStatus($3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus($3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus($3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED)}getActiveFiles(){return this.files.filter(e=>e.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING||e.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED).map(e=>e)}init(){if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild($3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(`<div class="dz-default dz-message"><button class="dz-button" type="button">${this.options.dictDefaultMessage}</button></div>`)),this.clickableElements.length){let i=()=>{this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(null===this.options.maxFiles||1<this.options.maxFiles)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",null!==this.options.acceptedFiles&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),null!==this.options.capture&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex","-1"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",()=>{var e=this.hiddenFileInput["files"];if(e.length)for(var t of e)this.addFile(t);this.emit("addedfiles",e),i()})};i()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var e of this.events)this.on(e,this.options[e]);this.on("uploadprogress",()=>this.updateTotalUploadProgress()),this.on("removedfile",()=>this.updateTotalUploadProgress()),this.on("canceled",e=>this.emit("complete",e)),this.on("complete",e=>{if(0===this.getAddedFiles().length&&0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length)return setTimeout(()=>this.emit("queuecomplete"),0)});const t=function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1};function i(e){if(t(e))e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1}return this.listeners=[{element:this.element,events:{dragstart:e=>this.emit("dragstart",e),dragenter:e=>(i(e),this.emit("dragenter",e)),dragover:e=>{let t;try{t=e.dataTransfer.effectAllowed}catch(e){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",i(e),this.emit("dragover",e)},dragleave:e=>this.emit("dragleave",e),drop:e=>(i(e),this.drop(e)),dragend:e=>this.emit("dragend",e)}}],this.clickableElements.forEach(t=>this.listeners.push({element:t,events:{click:e=>(t===this.element&&e.target!==this.element&&!$3ed269f2f0fb224b$export$2e2bcd8739ae039.elementInside(e.target,this.element.querySelector(".dz-message"))||this.hiddenFileInput.click(),!0)}})),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,$3ed269f2f0fb224b$export$2e2bcd8739ae039.instances.splice($3ed269f2f0fb224b$export$2e2bcd8739ae039.instances.indexOf(this),1)}updateTotalUploadProgress(){let e,t=0,i=0;if(this.getActiveFiles().length){for(var r of this.getActiveFiles())t+=r.upload.bytesSent,i+=r.upload.total;e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}_getParamName(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?`[${e}]`:"")}_renameFile(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}getFallbackForm(){let e,t;if(e=this.getExistingFallback())return e;let i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+=`<p>${this.options.dictFallbackText}</p>`),i+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?'multiple="multiple"':void 0} /><input type="submit" value="Upload!"></div>`;var r=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(i);return"FORM"!==this.element.tagName?(t=$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`)).appendChild(r):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:r}getExistingFallback(){var e,t;for(e of["div","form"])if(t=function(e){for(var t of e)if(/(^| )fallback($| )/.test(t.className))return t}(this.element.getElementsByTagName(e)))return t}setupEventListeners(){return this.listeners.map(t=>{{let e=[];for(var i in t.events){var r=t.events[i];e.push(t.element.addEventListener(i,r,!1))}return e}})}removeEventListeners(){return this.listeners.map(t=>{{let e=[];for(var i in t.events){var r=t.events[i];e.push(t.element.removeEventListener(i,r,!1))}return e}})}disable(){return this.clickableElements.forEach(e=>e.classList.remove("dz-clickable")),this.removeEventListeners(),this.disabled=!0,this.files.map(e=>this.cancelUpload(e))}enable(){return delete this.disabled,this.clickableElements.forEach(e=>e.classList.add("dz-clickable")),this.setupEventListeners()}filesize(t){let i=0,r="b";if(0<t){var n=["tb","gb","mb","kb","b"];for(let e=0;e<n.length;e++){var o=n[e];if(Math.pow(this.options.filesizeBase,4-e)/10<=t){i=t/Math.pow(this.options.filesizeBase,4-e),r=o;break}}i=Math.round(10*i)/10}return`<strong>${i}</strong> `+this.options.dictFileSizeUnits[r]}_updateMaxFilesReachedClass(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(i){if(i.dataTransfer){this.emit("drop",i);let t=[];for(let e=0;e<i.dataTransfer.files.length;e++)t[e]=i.dataTransfer.files[e];var e;t.length&&(e=i.dataTransfer["items"],e&&e.length&&null!=e[0].webkitGetAsEntry?this._addFilesFromItems(e):this.handleFiles(t)),this.emit("addedfiles",t)}}paste(e){if(null!=$3ed269f2f0fb224b$var$__guard__(null!=e?e.clipboardData:void 0,e=>e.items))return this.emit("paste",e),{items:e}=e.clipboardData,e.length?this._addFilesFromItems(e):void 0}handleFiles(e){for(var t of e)this.addFile(t)}_addFilesFromItems(t){{let e=[];for(var i of t){var r;null!=i.webkitGetAsEntry&&(r=i.webkitGetAsEntry())?r.isFile?e.push(this.addFile(i.getAsFile())):r.isDirectory?e.push(this._addFilesFromDirectory(r,r.name)):e.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?e.push(this.addFile(i.getAsFile())):e.push(void 0)}return e}}_addFilesFromDirectory(e,i){let t=e.createReader(),r=t=>$3ed269f2f0fb224b$var$__guardMethod__(console,"log",e=>e.log(t));var n=()=>t.readEntries(e=>{if(0<e.length){for(var t of e)t.isFile?t.file(e=>{if(!this.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=i+"/"+e.name,this.addFile(e)}):t.isDirectory&&this._addFilesFromDirectory(t,i+"/"+t.name);n()}return null},r);return n()}accept(e,t){this.options.maxFilesize&&e.size>1048576*this.options.maxFilesize?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):$3ed269f2f0fb224b$export$2e2bcd8739ae039.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}addFile(t){t.upload={uuid:$3ed269f2f0fb224b$export$2e2bcd8739ae039.uuidv4(),progress:0,total:t.size,bytesSent:0,filename:this._renameFile(t)},this.files.push(t),t.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,e=>{e?(t.accepted=!1,this._errorProcessing([t],e)):(t.accepted=!0,this.options.autoQueue&&this.enqueueFile(t)),this._updateMaxFilesReachedClass()})}enqueueFiles(e){for(var t of e)this.enqueueFile(t);return null}enqueueFile(e){if(e.status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED,this.options.autoProcessQueue)return setTimeout(()=>this.processQueue(),0)}_enqueueThumbnail(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(e),setTimeout(()=>this._processThumbnailQueue(),0)}_processThumbnailQueue(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;let t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,e=>(this.emit("thumbnail",t,e),this._processingThumbnail=!1,this._processThumbnailQueue()))}}removeFile(e){if(e.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING&&this.cancelUpload(e),this.files=$3ed269f2f0fb224b$var$without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}removeAllFiles(e){null==e&&(e=!1);for(var t of this.files.slice())t.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING&&!e||this.removeFile(t);return null}resizeImage(r,e,t,i,n){return this.createThumbnail(r,e,t,i,!0,(e,i)=>{if(null==i)return n(r);{let e=this.options["resizeMimeType"],t=(null==e&&(e=r.type),i.toDataURL(e,this.options.resizeQuality));return"image/jpeg"!==e&&"image/jpg"!==e||(t=$3ed269f2f0fb224b$var$ExifRestore.restore(r.dataURL,t)),n($3ed269f2f0fb224b$export$2e2bcd8739ae039.dataURItoBlob(t))}})}createThumbnail(e,t,i,r,n,o){let a=new FileReader;a.onload=()=>{e.dataURL=a.result,"image/svg+xml"===e.type?null!=o&&o(a.result):this.createThumbnailFromUrl(e,t,i,r,n,o)},a.readAsDataURL(e)}displayExistingFile(t,e,i,r,n=!0){this.emit("addedfile",t),this.emit("complete",t),n?(t.dataURL=e,this.createThumbnailFromUrl(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,e=>{this.emit("thumbnail",t,e),i&&i()},r)):(this.emit("thumbnail",t,e),i&&i())}createThumbnailFromUrl(n,o,a,s,t,c,e){let l=document.createElement("img");return e&&(l.crossOrigin=e),t="from-image"!=getComputedStyle(document.body).imageOrientation&&t,l.onload=()=>{let e=e=>e(1);return(e="undefined"!=typeof EXIF&&null!==EXIF&&t?e=>EXIF.getData(l,function(){return e(EXIF.getTag(this,"Orientation"))}):e)(e=>{n.width=l.width,n.height=l.height;var t=this.options.resize.call(this,n,o,a,s);let i=document.createElement("canvas"),r=i.getContext("2d");switch(i.width=t.trgWidth,i.height=t.trgHeight,4<e&&(i.width=t.trgHeight,i.height=t.trgWidth),e){case 2:r.translate(i.width,0),r.scale(-1,1);break;case 3:r.translate(i.width,i.height),r.rotate(Math.PI);break;case 4:r.translate(0,i.height),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i.width);break;case 7:r.rotate(.5*Math.PI),r.translate(i.height,-i.width),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-i.height,0)}$3ed269f2f0fb224b$var$drawImageIOSFix(r,l,null!=t.srcX?t.srcX:0,null!=t.srcY?t.srcY:0,t.srcWidth,t.srcHeight,null!=t.trgX?t.trgX:0,null!=t.trgY?t.trgY:0,t.trgWidth,t.trgHeight);e=i.toDataURL("image/png");if(null!=c)return c(e,i)})},null!=c&&(l.onerror=c),l.src=n.dataURL}processQueue(){var t=this.options["parallelUploads"],i=this.getUploadingFiles().length;let r=i;if(!(t<=i)){let e=this.getQueuedFiles();if(0<e.length){if(this.options.uploadMultiple)return this.processFiles(e.slice(0,t-i));for(;r<t;){if(!e.length)return;this.processFile(e.shift()),r++}}}}processFile(e){return this.processFiles([e])}processFiles(e){for(var t of e)t.processing=!0,t.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}_getFilesWithXhr(t){return this.files.filter(e=>e.xhr===t).map(e=>e)}cancelUpload(e){if(e.status===$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING){var t,i,r=this._getFilesWithXhr(e.xhr);for(t of r)t.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED;void 0!==e.xhr&&e.xhr.abort();for(i of r)this.emit("canceled",i);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else e.status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED&&e.status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED||(e.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}resolveOption(e,...t){return"function"==typeof e?e.apply(this,t):e}uploadFile(e){return this.uploadFiles([e])}uploadFiles(a){this._transformFiles(a,i=>{var e;if(this.options.chunking&&(e=i[0],a[0].upload.chunked=this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),a[0].upload.totalChunkCount=Math.ceil(e.size/this.options.chunkSize)),a[0].upload.chunked){let r=a[0],n=i[0],o=(r.upload.chunks=[],()=>{let e=0;for(;void 0!==r.upload.chunks[e];)e++;var t,i;e>=r.upload.totalChunkCount||(i=e*this.options.chunkSize,t=Math.min(i+this.options.chunkSize,n.size),i={name:this._getParamName(0),data:n.webkitSlice?n.webkitSlice(i,t):n.slice(i,t),filename:r.upload.filename,chunkIndex:e},r.upload.chunks[e]={file:r,index:e,dataBlock:i,status:$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING,progress:0,retries:0},this._uploadData(a,[i]))});if(r.upload.finishedChunkUpload=(e,t)=>{let i=!0;e.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS,e.dataBlock=null,e.response=e.xhr.responseText,e.responseHeaders=e.xhr.getAllResponseHeaders(),e.xhr=null;for(let e=0;e<r.upload.totalChunkCount;e++){if(void 0===r.upload.chunks[e])return o();r.upload.chunks[e].status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS&&(i=!1)}i&&this.options.chunksUploaded(r,()=>{this._finished(a,t,null)})},this.options.parallelChunkUploads)for(let e=0;e<r.upload.totalChunkCount;e++)o();else o()}else{let t=[];for(let e=0;e<a.length;e++)t[e]={name:this._getParamName(e),data:i[e],filename:a[e].upload.filename};this._uploadData(a,t)}})}_getChunk(t,i){for(let e=0;e<t.upload.totalChunkCount;e++)if(void 0!==t.upload.chunks[e]&&t.upload.chunks[e].xhr===i)return t.upload.chunks[e]}_uploadData(i,r){let n=new XMLHttpRequest;for(var e of i)e.xhr=n;i[0].upload.chunked&&(i[0].upload.chunks[r[0].chunkIndex].xhr=n);var t,o=this.resolveOption(this.options.method,i,r),a=this.resolveOption(this.options.url,i,r),o=(n.open(o,a,!0),this.resolveOption(this.options.timeout,i));o&&(n.timeout=this.resolveOption(this.options.timeout,i)),n.withCredentials=!!this.options.withCredentials,n.onload=e=>{this._finishedUploading(i,n,e)},n.ontimeout=()=>{this._handleUploadError(i,n,`Request timedout after ${this.options.timeout/1e3} seconds`)},n.onerror=()=>{this._handleUploadError(i,n)};let s=null!=n.upload?n.upload:n,c=(s.onprogress=e=>this._updateFilesUploadProgress(i,n,e),this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{});for(t in this.options.binaryBody&&(c["Content-Type"]=i[0].type),this.options.headers&&objectExtend(c,this.options.headers),c){var l=c[t];l&&n.setRequestHeader(t,l)}if(this.options.binaryBody){for(var d of i)this.emit("sending",d,n);this.options.uploadMultiple&&this.emit("sendingmultiple",i,n),this.submitRequest(n,null,i)}else{let t=new FormData;if(this.options.params){let e=this.options.params;for(var u in e="function"==typeof e?e.call(this,i,n,i[0].upload.chunked?this._getChunk(i[0],n):null):e){var p=e[u];if(Array.isArray(p))for(let e=0;e<p.length;e++)t.append(u,p[e]);else t.append(u,p)}}for(var h of i)this.emit("sending",h,n,t);this.options.uploadMultiple&&this.emit("sendingmultiple",i,n,t),this._addFormElementData(t);for(let e=0;e<r.length;e++){var f=r[e];t.append(f.name,f.data,f.filename)}this.submitRequest(n,t,i)}}_transformFiles(i,r){let n=[],o=0;for(let t=0;t<i.length;t++)this.options.transformFile.call(this,i[t],e=>{n[t]=e,++o===i.length&&r(n)})}_addFormElementData(t){if("FORM"===this.element.tagName)for(var i of this.element.querySelectorAll("input, textarea, select, button")){var r=i.getAttribute("name");let e=i.getAttribute("type");if(e=e&&e.toLowerCase(),null!=r)if("SELECT"===i.tagName&&i.hasAttribute("multiple"))for(var n of i.options)n.selected&&t.append(r,n.value);else(!e||"checkbox"!==e&&"radio"!==e||i.checked)&&t.append(r,i.value)}}_updateFilesUploadProgress(i,r,n){if(i[0].upload.chunked){let t=i[0],e=this._getChunk(t,r);n?(e.progress=100*n.loaded/n.total,e.total=n.total,e.bytesSent=n.loaded):(e.progress=100,e.bytesSent=e.total),t.upload.progress=0,t.upload.total=0;for(let e=t.upload.bytesSent=0;e<t.upload.totalChunkCount;e++)t.upload.chunks[e]&&void 0!==t.upload.chunks[e].progress&&(t.upload.progress+=t.upload.chunks[e].progress,t.upload.total+=t.upload.chunks[e].total,t.upload.bytesSent+=t.upload.chunks[e].bytesSent);t.upload.progress=t.upload.progress/t.upload.totalChunkCount,this.emit("uploadprogress",t,t.upload.progress,t.upload.bytesSent)}else for(var e of i)e.upload.total&&e.upload.bytesSent&&e.upload.bytesSent==e.upload.total||(n?(e.upload.progress=100*n.loaded/n.total,e.upload.total=n.total,e.upload.bytesSent=n.loaded):(e.upload.progress=100,e.upload.bytesSent=e.upload.total),this.emit("uploadprogress",e,e.upload.progress,e.upload.bytesSent))}_finishedUploading(e,t,i){let r;if(e[0].status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(r=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{r=JSON.parse(r)}catch(e){i=e,r="Invalid JSON response from server."}this._updateFilesUploadProgress(e,t),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t),r):this._finished(e,r,i):this._handleUploadError(e,t,r)}}_handleUploadError(t,i,e){if(t[0].status!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED){if(t[0].upload.chunked&&this.options.retryChunks){let e=this._getChunk(t[0],i);if(e.retries++<this.options.retryChunksLimit)return void this._uploadData(t,[e.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(t,e||this.options.dictResponseError.replace("{{statusCode}}",i.status),i)}}submitRequest(e,t,i){var r;1!=e.readyState?console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED."):this.options.binaryBody?i[0].upload.chunked?(r=this._getChunk(i[0],e),e.send(r.dataBlock.data)):e.send(i[0]):e.send(t)}_finished(e,t,i){for(var r of e)r.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS,this.emit("success",r,t,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(e,t,i){for(var r of e)r.status=$3ed269f2f0fb224b$export$2e2bcd8739ae039.ERROR,this.emit("error",r,t,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0,i="x"===e?t:3&t|8;return i.toString(16)})}constructor(e,t){super();let i,r;if(this.element=e,this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");$3ed269f2f0fb224b$export$2e2bcd8739ae039.instances.push(this),this.element.dropzone=this;e=null!=(r=$3ed269f2f0fb224b$export$2e2bcd8739ae039.optionsForElement(this.element))?r:{};if(this.options=objectExtend(!0,{},$4ca367182776f80b$export$2e2bcd8739ae039,e,null!=t?t:{}),this.options.previewTemplate=this.options.previewTemplate.replace(/\n*/g,""),this.options.forceFallback||!$3ed269f2f0fb224b$export$2e2bcd8739ae039.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");if(this.options.binaryBody&&this.options.uploadMultiple)throw new Error("You cannot set both: binaryBody and uploadMultiple.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),null!=this.options.renameFilename&&(this.options.renameFile=e=>this.options.renameFilename.call(this,e.name,e)),"string"==typeof this.options.method&&(this.options.method=this.options.method.toUpperCase()),(i=this.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElements(this.options.clickable,"clickable")),this.init()}}$3ed269f2f0fb224b$export$2e2bcd8739ae039.initClass(),$3ed269f2f0fb224b$export$2e2bcd8739ae039.options={},$3ed269f2f0fb224b$export$2e2bcd8739ae039.optionsForElement=function(e){return e.getAttribute("id")?$3ed269f2f0fb224b$export$2e2bcd8739ae039.options[$3ed269f2f0fb224b$var$camelize(e.getAttribute("id"))]:void 0},$3ed269f2f0fb224b$export$2e2bcd8739ae039.instances=[],$3ed269f2f0fb224b$export$2e2bcd8739ae039.forElement=function(e){if(null==(null!=(e="string"==typeof e?document.querySelector(e):e)?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},$3ed269f2f0fb224b$export$2e2bcd8739ae039.discover=function(){let r;var e;document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],(e=t=>{{let e=[];for(var i of t)/(^| )dropzone($| )/.test(i.className)?e.push(r.push(i)):e.push(void 0);return e}})(document.getElementsByTagName("div")),e(document.getElementsByTagName("form")));{let e=[];for(var t of r)!1!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.optionsForElement(t)?e.push(new $3ed269f2f0fb224b$export$2e2bcd8739ae039(t)):e.push(void 0);return e}},$3ed269f2f0fb224b$export$2e2bcd8739ae039.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],$3ed269f2f0fb224b$export$2e2bcd8739ae039.isBrowserSupported=function(){let e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==$3ed269f2f0fb224b$export$2e2bcd8739ae039.blacklistedBrowsers&&($3ed269f2f0fb224b$export$2e2bcd8739ae039.blockedBrowsers=$3ed269f2f0fb224b$export$2e2bcd8739ae039.blacklistedBrowsers);for(var t of $3ed269f2f0fb224b$export$2e2bcd8739ae039.blockedBrowsers)if(t.test(navigator.userAgent)){e=!1;continue}}else e=!1;else e=!1;return e},$3ed269f2f0fb224b$export$2e2bcd8739ae039.dataURItoBlob=function(e){let r=atob(e.split(",")[1]);var e=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(r.length);let n=new Uint8Array(t);for(let e=0,t=r.length,i=0<=t;i?e<=t:e>=t;i?e++:e--)n[e]=r.charCodeAt(e);return new Blob([t],{type:e})};const $3ed269f2f0fb224b$var$without=(e,t)=>e.filter(e=>e!==t).map(e=>e),$3ed269f2f0fb224b$var$camelize=e=>e.replace(/[\-_](\w)/g,e=>e.charAt(1).toUpperCase());$3ed269f2f0fb224b$export$2e2bcd8739ae039.createElement=function(e){let t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},$3ed269f2f0fb224b$export$2e2bcd8739ae039.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElement=function(e,t){let i;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error(`Invalid \`${t}\` option provided. Please provide a CSS selector or a plain HTML element.`);return i},$3ed269f2f0fb224b$export$2e2bcd8739ae039.getElements=function(e,t){let i,r;if(e instanceof Array){r=[];try{for(i of e)r.push(this.getElement(i,t))}catch(e){r=null}}else if("string"==typeof e){r=[];for(i of document.querySelectorAll(e))r.push(i)}else null!=e.nodeType&&(r=[e]);if(null!=r&&r.length)return r;throw new Error(`Invalid \`${t}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`)},$3ed269f2f0fb224b$export$2e2bcd8739ae039.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},$3ed269f2f0fb224b$export$2e2bcd8739ae039.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");let i=e.type;var r,n=i.replace(/\/.*$/,"");for(r of t)if("."===(r=r.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new $3ed269f2f0fb224b$export$2e2bcd8739ae039(this,e)})}),$3ed269f2f0fb224b$export$2e2bcd8739ae039.ADDED="added",$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED="queued",$3ed269f2f0fb224b$export$2e2bcd8739ae039.ACCEPTED=$3ed269f2f0fb224b$export$2e2bcd8739ae039.QUEUED,$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING="uploading",$3ed269f2f0fb224b$export$2e2bcd8739ae039.PROCESSING=$3ed269f2f0fb224b$export$2e2bcd8739ae039.UPLOADING,$3ed269f2f0fb224b$export$2e2bcd8739ae039.CANCELED="canceled",$3ed269f2f0fb224b$export$2e2bcd8739ae039.ERROR="error",$3ed269f2f0fb224b$export$2e2bcd8739ae039.SUCCESS="success";let $3ed269f2f0fb224b$var$detectVerticalSquash=function(e){e.naturalWidth;var t=e.naturalHeight;let i=document.createElement("canvas"),r=(i.width=1,i.height=t,i.getContext("2d"));r.drawImage(e,0,0);var n=r.getImageData(1,0,1,t)["data"];let o=0,a=t,s=t;for(;s>o;)0===n[4*(s-1)+3]?a=s:o=s,s=a+o>>1;e=s/t;return 0==e?1:e};var $3ed269f2f0fb224b$var$drawImageIOSFix=function(e,t,i,r,n,o,a,s,c,l){var d=$3ed269f2f0fb224b$var$detectVerticalSquash(t);return e.drawImage(t,i,r,n,o,a,s,c,l/d)};class $3ed269f2f0fb224b$var$ExifRestore{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(e){let t="";var i;let r="";var n,o;let a=void 0,s="",c=0;for(;;)if(o=e[c++],i=e[c++],r=e[c++],n=o>>2,o=(3&o)<<4|i>>4,a=(15&i)<<2|r>>6,s=63&r,isNaN(i)?a=s=64:isNaN(r)&&(s=64),t=t+this.KEY_STR.charAt(n)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s),r="",a=s="",!(c<e.length))break;return t}static restore(e,t){if(!e.match("data:image/jpeg;base64,"))return t;e=this.decode64(e.replace("data:image/jpeg;base64,","")),e=this.slice2Segments(e),t=this.exifManipulation(t,e);return"data:image/jpeg;base64,"+this.encode64(t)}static exifManipulation(e,t){t=this.getExifArray(t),e=this.insertExif(e,t);return new Uint8Array(e)}static getExifArray(e){var t;let i=0;for(;i<e.length;){if(255===(t=e[i])[0]&225===t[1])return t;i++}return[]}static insertExif(e,t){e=e.replace("data:image/jpeg;base64,","");let i=this.decode64(e);var e=i.indexOf(255,3),r=i.slice(0,e),e=i.slice(e);let n=r;return n=(n=n.concat(t)).concat(e)}static slice2Segments(e){let t=0,i=[];for(;;){var r,n;if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1]?t+=2:(r=256*e[t+2]+e[t+3],r=t+r+2,n=e.slice(t,r),i.push(n),t=r),t>e.length)break}return i}static decode64(e){let t=void 0,i="";var r,n,o,a;let s=0,c=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");;)if(r=this.KEY_STR.indexOf(e.charAt(s++)),n=this.KEY_STR.indexOf(e.charAt(s++)),o=this.KEY_STR.indexOf(e.charAt(s++)),a=this.KEY_STR.indexOf(e.charAt(s++)),t=(15&n)<<4|o>>2,i=(3&o)<<6|a,c.push(r<<2|n>>4),64!==o&&c.push(t),64!==a&&c.push(i),t=i="",!(s<e.length))break;return c}}function $3ed269f2f0fb224b$var$__guard__(e,t){return null!=e?t(e):void 0}function $3ed269f2f0fb224b$var$__guardMethod__(e,t,i){return null!=e&&"function"==typeof e[t]?i(e,t):void 0}$3ed269f2f0fb224b$var$ExifRestore.initClass();var sweetalert2_all={exports:{}},Swal=(!function(e){if(e.exports=function(){const D="SweetAlert2:",M=t=>{const i=[];for(let e=0;e<t.length;e++)if(i.indexOf(t[e])===-1)i.push(t[e]);return i},B=e=>e.charAt(0).toUpperCase()+e.slice(1),n=e=>Array.prototype.slice.call(e),a=e=>{console.warn("".concat(D," ").concat(typeof e==="object"?e.join(" "):e))},o=e=>{console.error("".concat(D," ").concat(e))},U=[],j=e=>{if(!U.includes(e)){U.push(e);a(e)}},F=(e,t)=>{j('"'.concat(e,'" is deprecated and will be removed in the next major release. Please use "').concat(t,'" instead.'))},V=e=>typeof e==="function"?e():e,W=e=>e&&typeof e.toPromise==="function",s=e=>W(e)?e.toPromise():Promise.resolve(e),z=e=>e&&Promise.resolve(e)===e,q=e=>e[Math.floor(Math.random()*e.length)],c={title:"",titleText:"",text:"",html:"",footer:"",icon:undefined,iconColor:undefined,iconHtml:undefined,template:undefined,toast:false,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:undefined,backdrop:true,heightAuto:true,allowOutsideClick:true,allowEscapeKey:true,allowEnterKey:true,stopKeydownPropagation:true,keydownListenerCapture:false,showConfirmButton:true,showDenyButton:false,showCancelButton:false,preConfirm:undefined,preDeny:undefined,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:undefined,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:undefined,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:undefined,buttonsStyling:true,reverseButtons:false,focusConfirm:true,focusDeny:false,focusCancel:false,returnFocus:true,showCloseButton:false,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:false,showLoaderOnDeny:false,imageUrl:undefined,imageWidth:undefined,imageHeight:undefined,imageAlt:"",timer:undefined,timerProgressBar:false,width:undefined,padding:undefined,background:undefined,input:undefined,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:true,inputAttributes:{},inputValidator:undefined,returnInputValueOnDeny:false,validationMessage:undefined,grow:false,position:"center",progressSteps:[],currentProgressStep:undefined,progressStepsDistance:undefined,willOpen:undefined,didOpen:undefined,didRender:undefined,willClose:undefined,didClose:undefined,didDestroy:undefined,scrollbarPadding:true},G=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],J={},H=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],K=e=>{return Object.prototype.hasOwnProperty.call(c,e)},Q=e=>{return G.indexOf(e)!==-1},Y=e=>{return J[e]},X=e=>{if(!K(e))a('Unknown parameter "'.concat(e,'"'))},Z=e=>{if(H.includes(e))a('The parameter "'.concat(e,'" is incompatible with toasts'))},ee=e=>{if(Y(e))F(e,Y(e))},te=e=>{if(!e.backdrop&&e.allowOutsideClick)a('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e){X(t);if(e.toast)Z(t);ee(t)}},ie="swal2-",re=e=>{const t={};for(const i in e)t[e[i]]=ie+e[i];return t},l=re(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),d=re(["success","warning","info","question","error"]),u=()=>document.body.querySelector(".".concat(l.container)),t=e=>{const t=u();return t?t.querySelector(e):null},e=e=>{return t(".".concat(e))},p=()=>e(l.popup),h=()=>e(l.icon),ne=()=>e(l.title),oe=()=>e(l["html-container"]),ae=()=>e(l.image),se=()=>e(l["progress-steps"]),ce=()=>e(l["validation-message"]),f=()=>t(".".concat(l.actions," .").concat(l.confirm)),m=()=>t(".".concat(l.actions," .").concat(l.deny)),le=()=>e(l["input-label"]),g=()=>t(".".concat(l.loader)),b=()=>t(".".concat(l.actions," .").concat(l.cancel)),de=()=>e(l.actions),ue=()=>e(l.footer),pe=()=>e(l["timer-progress-bar"]),he=()=>e(l.close),fe='\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n',me=()=>{const e=n(p().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((e,t)=>{const i=parseInt(e.getAttribute("tabindex"));const r=parseInt(t.getAttribute("tabindex"));if(i>r)return 1;else if(i<r)return-1;return 0});const t=n(p().querySelectorAll(fe)).filter(e=>e.getAttribute("tabindex")!=="-1");return M(e.concat(t)).filter(e=>P(e))},ge=()=>{return y(document.body,l.shown)&&!y(document.body,l["toast-shown"])&&!y(document.body,l["no-backdrop"])},be=()=>{return p()&&y(p(),l.toast)},ve=()=>{return p().hasAttribute("data-loading")},i={previousBodyPadding:null},v=(t,e)=>{t.textContent="";if(e){const i=new DOMParser;const r=i.parseFromString(e,"text/html");n(r.querySelector("head").childNodes).forEach(e=>{t.appendChild(e)});n(r.querySelector("body").childNodes).forEach(e=>{t.appendChild(e)})}},y=(t,e)=>{if(!e)return false;const i=e.split(/\s+/);for(let e=0;e<i.length;e++)if(!t.classList.contains(i[e]))return false;return true},ye=(t,i)=>{n(t.classList).forEach(e=>{if(!Object.values(l).includes(e)&&!Object.values(d).includes(e)&&!Object.values(i.showClass).includes(e))t.classList.remove(e)})},S=(e,t,i)=>{ye(e,t);if(t.customClass&&t.customClass[i]){if(typeof t.customClass[i]!=="string"&&!t.customClass[i].forEach)return a("Invalid type of customClass.".concat(i,'! Expected string or iterable object, got "').concat(typeof t.customClass[i],'"'));w(e,t.customClass[i])}},Se=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(".".concat(l.popup," > .").concat(l[t]));case"checkbox":return e.querySelector(".".concat(l.popup," > .").concat(l.checkbox," input"));case"radio":return e.querySelector(".".concat(l.popup," > .").concat(l.radio," input:checked"))||e.querySelector(".".concat(l.popup," > .").concat(l.radio," input:first-child"));case"range":return e.querySelector(".".concat(l.popup," > .").concat(l.range," input"));default:return e.querySelector(".".concat(l.popup," > .").concat(l.input))}},we=e=>{e.focus();if(e.type!=="file"){const t=e.value;e.value="";e.value=t}},ke=(e,t,i)=>{if(!e||!t)return;if(typeof t==="string")t=t.split(/\s+/).filter(Boolean);t.forEach(t=>{if(Array.isArray(e))e.forEach(e=>{i?e.classList.add(t):e.classList.remove(t)});else i?e.classList.add(t):e.classList.remove(t)})},w=(e,t)=>{ke(e,t,true)},k=(e,t)=>{ke(e,t,false)},E=(e,t)=>{const i=n(e.childNodes);for(let e=0;e<i.length;e++)if(y(i[e],t))return i[e]},T=(e,t,i)=>{if(i==="".concat(parseInt(i)))i=parseInt(i);if(i||parseInt(i)===0)e.style[t]=typeof i==="number"?"".concat(i,"px"):i;else e.style.removeProperty(t)},C=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"flex";e.style.display=t},$=e=>{e.style.display="none"},Ee=(e,t,i,r)=>{const n=e.querySelector(t);if(n)n.style[i]=r},Te=function(e,t){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"flex";t?C(e,i):$(e)},P=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),Ce=()=>!P(f())&&!P(m())&&!P(b()),$e=e=>!!(e.scrollHeight>e.clientHeight),Pe=e=>{const t=window.getComputedStyle(e);const i=parseFloat(t.getPropertyValue("animation-duration")||"0");const r=parseFloat(t.getPropertyValue("transition-duration")||"0");return i>0||r>0},Oe=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const i=pe();if(P(i)){if(t){i.style.transition="none";i.style.width="100%"}setTimeout(()=>{i.style.transition="width ".concat(e/1e3,"s linear");i.style.width="0%"},10)}},Re=()=>{const e=pe();const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition");e.style.width="100%";const i=parseInt(window.getComputedStyle(e).width);const r=t/i*100;e.style.removeProperty("transition");e.style.width="".concat(r,"%")},Ie=()=>typeof window==="undefined"||typeof document==="undefined",Ae=100,O={},xe=()=>{if(O.previousActiveElement instanceof HTMLElement){O.previousActiveElement.focus();O.previousActiveElement=null}else if(document.body)document.body.focus()},Le=r=>{return new Promise(e=>{if(!r)return e();const t=window.scrollX;const i=window.scrollY;O.restoreFocusTimeout=setTimeout(()=>{xe();e()},Ae);window.scrollTo(t,i)})},_e='\n <div aria-labelledby="'.concat(l.title,'" aria-describedby="').concat(l["html-container"],'" class="').concat(l.popup,'" tabindex="-1">\n   <button type="button" class="').concat(l.close,'"></button>\n   <ul class="').concat(l["progress-steps"],'"></ul>\n   <div class="').concat(l.icon,'"></div>\n   <img class="').concat(l.image,'" />\n   <h2 class="').concat(l.title,'" id="').concat(l.title,'"></h2>\n   <div class="').concat(l["html-container"],'" id="').concat(l["html-container"],'"></div>\n   <input class="').concat(l.input,'" />\n   <input type="file" class="').concat(l.file,'" />\n   <div class="').concat(l.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(l.select,'"></select>\n   <div class="').concat(l.radio,'"></div>\n   <label for="').concat(l.checkbox,'" class="').concat(l.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(l.label,'"></span>\n   </label>\n   <textarea class="').concat(l.textarea,'"></textarea>\n   <div class="').concat(l["validation-message"],'" id="').concat(l["validation-message"],'"></div>\n   <div class="').concat(l.actions,'">\n     <div class="').concat(l.loader,'"></div>\n     <button type="button" class="').concat(l.confirm,'"></button>\n     <button type="button" class="').concat(l.deny,'"></button>\n     <button type="button" class="').concat(l.cancel,'"></button>\n   </div>\n   <div class="').concat(l.footer,'"></div>\n   <div class="').concat(l["timer-progress-bar-container"],'">\n     <div class="').concat(l["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Ne=()=>{const e=u();if(!e)return false;e.remove();k([document.documentElement,document.body],[l["no-backdrop"],l["toast-shown"],l["has-column"]]);return true},R=()=>{O.currentInstance.resetValidationMessage()},De=()=>{const e=p();const t=E(e,l.input);const i=E(e,l.file);const r=e.querySelector(".".concat(l.range," input"));const n=e.querySelector(".".concat(l.range," output"));const o=E(e,l.select);const a=e.querySelector(".".concat(l.checkbox," input"));const s=E(e,l.textarea);t.oninput=R;i.onchange=R;o.onchange=R;a.onchange=R;s.oninput=R;r.oninput=()=>{R();n.value=r.value};r.onchange=()=>{R();n.value=r.value}},Me=e=>typeof e==="string"?document.querySelector(e):e,Be=e=>{const t=p();t.setAttribute("role",e.toast?"alert":"dialog");t.setAttribute("aria-live",e.toast?"polite":"assertive");if(!e.toast)t.setAttribute("aria-modal","true")},Ue=e=>{if(window.getComputedStyle(e).direction==="rtl")w(u(),l.rtl)},je=e=>{const t=Ne();if(Ie()){o("SweetAlert2 requires document to initialize");return}const i=document.createElement("div");i.className=l.container;if(t)w(i,l["no-transition"]);v(i,_e);const r=Me(e.target);r.appendChild(i);Be(e);Ue(r);De();Fe(i,e)},Fe=(e,t)=>{if(t.toast)return;const i=q([{text:"  <br>     ",youtubeId:"fWClXZd9c78"},{text:"  <br>    ",youtubeId:"_RjBNkn88yA"},{text:"   <br>    ",youtubeId:"yUmzQT4C8JY"},{text:"   <br>  -  ",youtubeId:"hkCYb6edUrQ"},{text:"   <br>    ",youtubeId:"w4-_8BJKfpk"},{text:"   <br>     ",youtubeId:"saK5UTKroDA"}]);if(/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const r=document.createElement("div");r.className=l["no-war"];v(r,'<a href="https://www.youtube.com/watch?v='.concat(i.youtubeId,'" target="_blank">').concat(i.text,"</a>"));e.appendChild(r);e.style.paddingTop="4em"}},Ve=(e,t)=>{if(e instanceof HTMLElement)t.appendChild(e);else if(typeof e==="object")We(e,t);else if(e)v(t,e)},We=(e,t)=>{if(e.jquery)ze(t,e);else v(t,e.toString())},ze=(t,i)=>{t.textContent="";if(0 in i)for(let e=0;e in i;e++)t.appendChild(i[e].cloneNode(true));else t.appendChild(i.cloneNode(true))},qe=(()=>{if(Ie())return false;const e=document.createElement("div");const t={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&typeof e.style[i]!=="undefined")return t[i];return false})(),Ge=()=>{const e=document.createElement("div");e.className=l["scrollbar-measure"];document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;document.body.removeChild(e);return t},Je=(e,t)=>{const i=de();const r=g();if(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton)$(i);else C(i);S(i,t,"actions");He(i,r,t);v(r,t.loaderHtml);S(r,t,"loader")};function He(e,t,i){const r=f();const n=m();const o=b();Qe(r,"confirm",i);Qe(n,"deny",i);Qe(o,"cancel",i);Ke(r,n,o,i);if(i.reverseButtons)if(i.toast){e.insertBefore(o,r);e.insertBefore(n,r)}else{e.insertBefore(o,t);e.insertBefore(n,t);e.insertBefore(r,t)}}function Ke(e,t,i,r){if(!r.buttonsStyling)return k([e,t,i],l.styled);w([e,t,i],l.styled);if(r.confirmButtonColor){e.style.backgroundColor=r.confirmButtonColor;w(e,l["default-outline"])}if(r.denyButtonColor){t.style.backgroundColor=r.denyButtonColor;w(t,l["default-outline"])}if(r.cancelButtonColor){i.style.backgroundColor=r.cancelButtonColor;w(i,l["default-outline"])}}function Qe(e,t,i){Te(e,i["show".concat(B(t),"Button")],"inline-block");v(e,i["".concat(t,"ButtonText")]);e.setAttribute("aria-label",i["".concat(t,"ButtonAriaLabel")]);e.className=l[t];S(e,i,"".concat(t,"Button"));w(e,i["".concat(t,"ButtonClass")])}const Ye=(e,t)=>{const i=u();if(!i)return;Xe(i,t.backdrop);Ze(i,t.position);et(i,t.grow);S(i,t,"container")};function Xe(e,t){if(typeof t==="string")e.style.background=t;else if(!t)w([document.documentElement,document.body],l["no-backdrop"])}function Ze(e,t){if(t in l)w(e,l[t]);else{a('The "position" parameter is not valid, defaulting to "center"');w(e,l.center)}}function et(e,t){if(t&&typeof t==="string"){const i="grow-".concat(t);if(i in l)w(e,l[i])}}var I={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const tt=["input","file","range","select","radio","checkbox","textarea"],it=(e,i)=>{const r=p();const t=I.innerParams.get(e);const n=!t||i.input!==t.input;tt.forEach(e=>{const t=E(r,l[e]);ot(e,i.inputAttributes);t.className=l[e];if(n)$(t)});if(i.input){if(n)rt(i);at(i)}},rt=e=>{if(!r[e.input])return o('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(e.input,'"'));const t=lt(e.input);const i=r[e.input](t,e);C(t);setTimeout(()=>{we(i)})},nt=t=>{for(let e=0;e<t.attributes.length;e++){const i=t.attributes[e].name;if(!["type","value","style"].includes(i))t.removeAttribute(i)}},ot=(e,t)=>{const i=Se(p(),e);if(!i)return;nt(i);for(const r in t)i.setAttribute(r,t[r])},at=e=>{const t=lt(e.input);if(typeof e.customClass==="object")w(t,e.customClass.input)},st=(e,t)=>{if(!e.placeholder||t.inputPlaceholder)e.placeholder=t.inputPlaceholder},ct=(e,t,i)=>{if(i.inputLabel){e.id=l.input;const r=document.createElement("label");const n=l["input-label"];r.setAttribute("for",e.id);r.className=n;if(typeof i.customClass==="object")w(r,i.customClass.inputLabel);r.innerText=i.inputLabel;t.insertAdjacentElement("beforebegin",r)}},lt=e=>{return E(p(),l[e]||l.input)},dt=(e,t)=>{if(["string","number"].includes(typeof t))e.value="".concat(t);else if(!z(t))a('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof t,'"'))},r={},ut=(r.text=r.email=r.password=r.number=r.tel=r.url=(e,t)=>{dt(e,t.inputValue);ct(e,e,t);st(e,t);e.type=t.input;return e},r.file=(e,t)=>{ct(e,e,t);st(e,t);return e},r.range=(e,t)=>{const i=e.querySelector("input");const r=e.querySelector("output");dt(i,t.inputValue);i.type=t.input;dt(r,t.inputValue);ct(i,e,t);return e},r.select=(e,t)=>{e.textContent="";if(t.inputPlaceholder){const i=document.createElement("option");v(i,t.inputPlaceholder);i.value="";i.disabled=true;i.selected=true;e.appendChild(i)}ct(e,e,t);return e},r.radio=e=>{e.textContent="";return e},r.checkbox=(e,t)=>{const i=Se(p(),"checkbox");i.value="1";i.id=l.checkbox;i.checked=Boolean(t.inputValue);const r=e.querySelector("span");v(r,t.inputPlaceholder);return i},r.textarea=(i,e)=>{dt(i,e.inputValue);st(i,e);ct(i,i,e);const r=e=>parseInt(window.getComputedStyle(e).marginLeft)+parseInt(window.getComputedStyle(e).marginRight);setTimeout(()=>{if("MutationObserver"in window){const t=parseInt(window.getComputedStyle(p()).width);const e=()=>{const e=i.offsetWidth+r(i);if(e>t)p().style.width="".concat(e,"px");else p().style.width=null};new MutationObserver(e).observe(i,{attributes:true,attributeFilter:["style"]})}});return i},(e,t)=>{const i=oe();S(i,t,"htmlContainer");if(t.html){Ve(t.html,i);C(i,"block")}else if(t.text){i.textContent=t.text;C(i,"block")}else $(i);it(e,t)}),pt=(e,t)=>{const i=ue();Te(i,t.footer);if(t.footer)Ve(t.footer,i);S(i,t,"footer")},ht=(e,t)=>{const i=he();v(i,t.closeButtonHtml);S(i,t,"closeButton");Te(i,t.showCloseButton);i.setAttribute("aria-label",t.closeButtonAriaLabel)},ft=(e,t)=>{const i=I.innerParams.get(e);const r=h();if(i&&t.icon===i.icon){yt(r,t);mt(r,t);return}if(!t.icon&&!t.iconHtml){$(r);return}if(t.icon&&Object.keys(d).indexOf(t.icon)===-1){o('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(t.icon,'"'));$(r);return}C(r);yt(r,t);mt(r,t);w(r,t.showClass.icon)},mt=(e,t)=>{for(const i in d)if(t.icon!==i)k(e,d[i]);w(e,d[t.icon]);St(e,t);gt();S(e,t,"icon")},gt=()=>{const e=p();const t=window.getComputedStyle(e).getPropertyValue("background-color");const i=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let e=0;e<i.length;e++)i[e].style.backgroundColor=t},bt='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',vt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n',yt=(e,t)=>{let i=e.innerHTML;let r;if(t.iconHtml)r=wt(t.iconHtml);else if(t.icon==="success"){r=bt;i=i.replace(/ style=".*?"/g,"")}else if(t.icon==="error")r=vt;else{const n={question:"?",warning:"!",info:"i"};r=wt(n[t.icon])}if(i.trim()!==r.trim())v(e,r)},St=(e,t)=>{if(!t.iconColor)return;e.style.color=t.iconColor;e.style.borderColor=t.iconColor;for(const i of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ee(e,i,"backgroundColor",t.iconColor);Ee(e,".swal2-success-ring","borderColor",t.iconColor)},wt=e=>'<div class="'.concat(l["icon-content"],'">').concat(e,"</div>"),kt=(e,t)=>{const i=ae();if(!t.imageUrl)return $(i);C(i,"");i.setAttribute("src",t.imageUrl);i.setAttribute("alt",t.imageAlt);T(i,"width",t.imageWidth);T(i,"height",t.imageHeight);i.className=l.image;S(i,t,"image")},Et=(e,n)=>{const o=se();if(!n.progressSteps||n.progressSteps.length===0)return $(o);C(o);o.textContent="";if(n.currentProgressStep>=n.progressSteps.length)a("Invalid currentProgressStep parameter, it should be less than progressSteps.length "+"(currentProgressStep like JS arrays starts from 0)");n.progressSteps.forEach((e,t)=>{const i=Tt(e);o.appendChild(i);if(t===n.currentProgressStep)w(i,l["active-progress-step"]);if(t!==n.progressSteps.length-1){const r=Ct(n);o.appendChild(r)}})},Tt=e=>{const t=document.createElement("li");w(t,l["progress-step"]);v(t,e);return t},Ct=e=>{const t=document.createElement("li");w(t,l["progress-step-line"]);if(e.progressStepsDistance)T(t,"width",e.progressStepsDistance);return t},$t=(e,t)=>{const i=ne();Te(i,t.title||t.titleText,"block");if(t.title)Ve(t.title,i);if(t.titleText)i.innerText=t.titleText;S(i,t,"title")},Pt=(e,t)=>{const i=u();const r=p();if(t.toast){T(i,"width",t.width);r.style.width="100%";r.insertBefore(g(),h())}else T(r,"width",t.width);T(r,"padding",t.padding);if(t.color)r.style.color=t.color;if(t.background)r.style.background=t.background;$(ce());Ot(r,t)},Ot=(e,t)=>{e.className="".concat(l.popup," ").concat(P(e)?t.showClass.popup:"");if(t.toast){w([document.documentElement,document.body],l["toast-shown"]);w(e,l.toast)}else w(e,l.modal);S(e,t,"popup");if(typeof t.customClass==="string")w(e,t.customClass);if(t.icon)w(e,l["icon-".concat(t.icon)])},Rt=(e,t)=>{Pt(e,t);Ye(e,t);Et(e,t);ft(e,t);kt(e,t);$t(e,t);ht(e,t);ut(e,t);Je(e,t);pt(e,t);if(typeof t.didRender==="function")t.didRender(p())},A=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),It=()=>{const e=n(document.body.children);e.forEach(e=>{if(e===u()||e.contains(u()))return;if(e.hasAttribute("aria-hidden"))e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden"));e.setAttribute("aria-hidden","true")})},At=()=>{const e=n(document.body.children);e.forEach(e=>{if(e.hasAttribute("data-previous-aria-hidden")){e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden"));e.removeAttribute("data-previous-aria-hidden")}else e.removeAttribute("aria-hidden")})},xt=["swal-title","swal-html","swal-footer"],Lt=e=>{const t=typeof e.template==="string"?document.querySelector(e.template):e.template;if(!t)return{};const i=t.content;jt(i);const r=Object.assign(_t(i),Nt(i),Dt(i),Mt(i),Bt(i),Ut(i,xt));return r},_t=e=>{const r={};n(e.querySelectorAll("swal-param")).forEach(e=>{x(e,["name","value"]);const t=e.getAttribute("name");const i=e.getAttribute("value");if(typeof c[t]==="boolean"&&i==="false")r[t]=false;if(typeof c[t]==="object")r[t]=JSON.parse(i)});return r},Nt=e=>{const i={};n(e.querySelectorAll("swal-button")).forEach(e=>{x(e,["type","color","aria-label"]);const t=e.getAttribute("type");i["".concat(t,"ButtonText")]=e.innerHTML;i["show".concat(B(t),"Button")]=true;if(e.hasAttribute("color"))i["".concat(t,"ButtonColor")]=e.getAttribute("color");if(e.hasAttribute("aria-label"))i["".concat(t,"ButtonAriaLabel")]=e.getAttribute("aria-label")});return i},Dt=e=>{const t={};const i=e.querySelector("swal-image");if(i){x(i,["src","width","height","alt"]);if(i.hasAttribute("src"))t.imageUrl=i.getAttribute("src");if(i.hasAttribute("width"))t.imageWidth=i.getAttribute("width");if(i.hasAttribute("height"))t.imageHeight=i.getAttribute("height");if(i.hasAttribute("alt"))t.imageAlt=i.getAttribute("alt")}return t},Mt=e=>{const t={};const i=e.querySelector("swal-icon");if(i){x(i,["type","color"]);if(i.hasAttribute("type"))t.icon=i.getAttribute("type");if(i.hasAttribute("color"))t.iconColor=i.getAttribute("color");t.iconHtml=i.innerHTML}return t},Bt=e=>{const r={};const t=e.querySelector("swal-input");if(t){x(t,["type","label","placeholder","value"]);r.input=t.getAttribute("type")||"text";if(t.hasAttribute("label"))r.inputLabel=t.getAttribute("label");if(t.hasAttribute("placeholder"))r.inputPlaceholder=t.getAttribute("placeholder");if(t.hasAttribute("value"))r.inputValue=t.getAttribute("value")}const i=e.querySelectorAll("swal-input-option");if(i.length){r.inputOptions={};n(i).forEach(e=>{x(e,["value"]);const t=e.getAttribute("value");const i=e.innerHTML;r.inputOptions[t]=i})}return r},Ut=(e,t)=>{const i={};for(const r in t){const n=t[r];const o=e.querySelector(n);if(o){x(o,[]);i[n.replace(/^swal-/,"")]=o.innerHTML.trim()}}return i},jt=e=>{const i=xt.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);n(e.children).forEach(e=>{const t=e.tagName.toLowerCase();if(i.indexOf(t)===-1)a("Unrecognized element <".concat(t,">"))})},x=(t,i)=>{n(t.attributes).forEach(e=>{if(i.indexOf(e.name)===-1)a(['Unrecognized attribute "'.concat(e.name,'" on <').concat(t.tagName.toLowerCase(),">."),"".concat(i.length?"Allowed attributes are: ".concat(i.join(", ")):"To set the value, use HTML within the element.")])})};var Ft={email:(e,t)=>{return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address")},url:(e,t)=>{return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")}};function Vt(t){if(!t.inputValidator)Object.keys(Ft).forEach(e=>{if(t.input===e)t.inputValidator=Ft[e]})}function Wt(e){if(!e.target||typeof e.target==="string"&&!document.querySelector(e.target)||typeof e.target!=="string"&&!e.target.appendChild){a('Target parameter is not valid, defaulting to "body"');e.target="body"}}function zt(e){Vt(e);if(e.showLoaderOnConfirm&&!e.preConfirm)a("showLoaderOnConfirm is set to true, but preConfirm is not defined.\n"+"showLoaderOnConfirm should be used together with preConfirm, see usage example:\n"+"https://sweetalert2.github.io/#ajax-request");Wt(e);if(typeof e.title==="string")e.title=e.title.split("\n").join("<br />");je(e)}class qt{constructor(e,t){this.callback=e;this.remaining=t;this.running=false;this.start()}start(){if(!this.running){this.running=true;this.started=new Date;this.id=setTimeout(this.callback,this.remaining)}return this.remaining}stop(){if(this.running){this.running=false;clearTimeout(this.id);this.remaining-=(new Date).getTime()-this.started.getTime()}return this.remaining}increase(e){const t=this.running;if(t)this.stop();this.remaining+=e;if(t)this.start();return this.remaining}getTimerLeft(){if(this.running){this.stop();this.start()}return this.remaining}isRunning(){return this.running}}const Gt=()=>{if(i.previousBodyPadding!==null)return;if(document.body.scrollHeight>window.innerHeight){i.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"));document.body.style.paddingRight="".concat(i.previousBodyPadding+Ge(),"px")}},Jt=()=>{if(i.previousBodyPadding!==null){document.body.style.paddingRight="".concat(i.previousBodyPadding,"px");i.previousBodyPadding=null}},Ht=()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;if(e&&!y(document.body,l.iosfix)){const t=document.body.scrollTop;document.body.style.top="".concat(t*-1,"px");w(document.body,l.iosfix);Qt();Kt()}},Kt=()=>{const e=navigator.userAgent;const t=!!e.match(/iPad/i)||!!e.match(/iPhone/i);const i=!!e.match(/WebKit/i);const r=t&&i&&!e.match(/CriOS/i);if(r){const n=44;if(p().scrollHeight>window.innerHeight-n)u().style.paddingBottom="".concat(n,"px")}},Qt=()=>{const e=u();let t;e.ontouchstart=e=>{t=Yt(e)};e.ontouchmove=e=>{if(t){e.preventDefault();e.stopPropagation()}}},Yt=e=>{const t=e.target;const i=u();if(Xt(e)||Zt(e))return false;if(t===i)return true;if(!$e(i)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!($e(oe())&&oe().contains(t)))return true;return false},Xt=e=>{return e.touches&&e.touches.length&&e.touches[0].touchType==="stylus"},Zt=e=>{return e.touches&&e.touches.length>1},ei=()=>{if(y(document.body,l.iosfix)){const e=parseInt(document.body.style.top,10);k(document.body,l.iosfix);document.body.style.top="";document.body.scrollTop=e*-1}},ti=10,ii=e=>{const t=u();const i=p();if(typeof e.willOpen==="function")e.willOpen(i);const r=window.getComputedStyle(document.body);const n=r.overflowY;ai(t,i,e);setTimeout(()=>{ni(t,i)},ti);if(ge()){oi(t,e.scrollbarPadding,n);It()}if(!be()&&!O.previousActiveElement)O.previousActiveElement=document.activeElement;if(typeof e.didOpen==="function")setTimeout(()=>e.didOpen(i));k(t,l["no-transition"])},ri=e=>{const t=p();if(e.target!==t)return;const i=u();t.removeEventListener(qe,ri);i.style.overflowY="auto"},ni=(e,t)=>{if(qe&&Pe(t)){e.style.overflowY="hidden";t.addEventListener(qe,ri)}else e.style.overflowY="auto"},oi=(e,t,i)=>{Ht();if(t&&i!=="hidden")Gt();setTimeout(()=>{e.scrollTop=0})},ai=(e,t,i)=>{w(e,i.showClass.backdrop);t.style.setProperty("opacity","0","important");C(t,"grid");setTimeout(()=>{w(t,i.showClass.popup);t.style.removeProperty("opacity")},ti);w([document.documentElement,document.body],l.shown);if(i.heightAuto&&i.backdrop&&!i.toast)w([document.documentElement,document.body],l["height-auto"])},L=e=>{let t=p();if(!t)new Hr;t=p();const i=g();if(be())$(h());else si(t,e);C(i);t.setAttribute("data-loading","true");t.setAttribute("aria-busy","true");t.focus()},si=(e,t)=>{const i=de();const r=g();if(!t&&P(f()))t=f();C(i);if(t){$(t);r.setAttribute("data-button-to-replace",t.className)}r.parentNode.insertBefore(r,t);w([e,i],l.loading)},ci=(e,t)=>{if(t.input==="select"||t.input==="radio")hi(e,t);else if(["text","email","number","tel","textarea"].includes(t.input)&&(W(t.inputValue)||z(t.inputValue))){L(f());fi(e,t)}},li=(e,t)=>{const i=e.getInput();if(!i)return null;switch(t.input){case"checkbox":return di(i);case"radio":return ui(i);case"file":return pi(i);default:return t.inputAutoTrim?i.value.trim():i.value}},di=e=>e.checked?1:0,ui=e=>e.checked?e.value:null,pi=e=>e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,hi=(t,i)=>{const r=p();const n=e=>mi[i.input](r,gi(e),i);if(W(i.inputOptions)||z(i.inputOptions)){L(f());s(i.inputOptions).then(e=>{t.hideLoading();n(e)})}else if(typeof i.inputOptions==="object")n(i.inputOptions);else o("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof i.inputOptions))},fi=(t,i)=>{const r=t.getInput();$(r);s(i.inputValue).then(e=>{r.value=i.input==="number"?parseFloat(e)||0:"".concat(e);C(r);r.focus();t.hideLoading()}).catch(e=>{o("Error in inputValue promise: ".concat(e));r.value="";C(r);r.focus();t.hideLoading()})},mi={select:(e,t,n)=>{const o=E(e,l.select);const a=(e,t,i)=>{const r=document.createElement("option");r.value=i;v(r,t);r.selected=bi(i,n.inputValue);e.appendChild(r)};t.forEach(e=>{const t=e[0];const i=e[1];if(Array.isArray(i)){const r=document.createElement("optgroup");r.label=t;r.disabled=false;o.appendChild(r);i.forEach(e=>a(r,e[1],e[0]))}else a(o,i,t)});o.focus()},radio:(e,t,a)=>{const s=E(e,l.radio);t.forEach(e=>{const t=e[0];const i=e[1];const r=document.createElement("input");const n=document.createElement("label");r.type="radio";r.name=l.radio;r.value=t;if(bi(t,a.inputValue))r.checked=true;const o=document.createElement("span");v(o,i);o.className=l.label;n.appendChild(r);n.appendChild(o);s.appendChild(n)});const i=s.querySelectorAll("input");if(i.length)i[0].focus()}},gi=i=>{const r=[];if(typeof Map!=="undefined"&&i instanceof Map)i.forEach((e,t)=>{let i=e;if(typeof i==="object")i=gi(i);r.push([t,i])});else Object.keys(i).forEach(e=>{let t=i[e];if(typeof t==="object")t=gi(t);r.push([e,t])});return r},bi=(e,t)=>{return t&&t.toString()===e.toString()};function vi(){const e=I.innerParams.get(this);if(!e)return;const t=I.domCache.get(this);$(t.loader);if(be()){if(e.icon)C(h())}else yi(t);k([t.popup,t.actions],l.loading);t.popup.removeAttribute("aria-busy");t.popup.removeAttribute("data-loading");t.confirmButton.disabled=false;t.denyButton.disabled=false;t.cancelButton.disabled=false}const yi=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));if(t.length)C(t[0],"inline-block");else if(Ce())$(e.actions)};function Si(e){const t=I.innerParams.get(e||this);const i=I.domCache.get(e||this);if(!i)return null;return Se(i.popup,t.input)}var wi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ki=()=>{return P(p())},Ei=()=>f()&&f().click(),Ti=()=>m()&&m().click(),Ci=()=>b()&&b().click(),$i=e=>{if(e.keydownTarget&&e.keydownHandlerAdded){e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture});e.keydownHandlerAdded=false}},Pi=(t,e,i,r)=>{$i(e);if(!i.toast){e.keydownHandler=e=>Ai(t,e,r);e.keydownTarget=i.keydownListenerCapture?window:p();e.keydownListenerCapture=i.keydownListenerCapture;e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture});e.keydownHandlerAdded=true}},Oi=(e,t,i)=>{const r=me();if(r.length){t=t+i;if(t===r.length)t=0;else if(t===-1)t=r.length-1;return r[t].focus()}p().focus()},Ri=["ArrowRight","ArrowDown"],Ii=["ArrowLeft","ArrowUp"],Ai=(e,t,i)=>{const r=I.innerParams.get(e);if(!r)return;if(t.isComposing||t.keyCode===229)return;if(r.stopKeydownPropagation)t.stopPropagation();if(t.key==="Enter")xi(e,t,r);else if(t.key==="Tab")Li(t,r);else if([...Ri,...Ii].includes(t.key))_i(t.key);else if(t.key==="Escape")Ni(t,r,i)},xi=(e,t,i)=>{if(!V(i.allowEnterKey))return;if(t.target&&e.getInput()&&t.target instanceof HTMLElement&&t.target.outerHTML===e.getInput().outerHTML){if(["textarea","file"].includes(i.input))return;Ei();t.preventDefault()}},Li=(e,t)=>{const i=e.target;const r=me();let n=-1;for(let e=0;e<r.length;e++)if(i===r[e]){n=e;break}if(!e.shiftKey)Oi(t,n,1);else Oi(t,n,-1);e.stopPropagation();e.preventDefault()},_i=e=>{const t=f();const i=m();const r=b();if(document.activeElement instanceof HTMLElement&&![t,i,r].includes(document.activeElement))return;const n=Ri.includes(e)?"nextElementSibling":"previousElementSibling";let o=document.activeElement;for(let e=0;e<de().children.length;e++){o=o[n];if(!o)return;if(o instanceof HTMLButtonElement&&P(o))break}if(o instanceof HTMLButtonElement)o.focus()},Ni=(e,t,i)=>{if(V(t.allowEscapeKey)){e.preventDefault();i(A.esc)}};function Di(e,t,i,r){if(be())Gi(e,r);else{Le(i).then(()=>Gi(e,r));$i(O)}const n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(n){t.setAttribute("style","display:none !important");t.removeAttribute("class");t.innerHTML=""}else t.remove();if(ge()){Jt();ei();At()}Mi()}function Mi(){k([document.documentElement,document.body],[l.shown,l["height-auto"],l["no-backdrop"],l["toast-shown"]])}function Bi(e){e=Wi(e);const t=wi.swalPromiseResolve.get(this);const i=ji(this);if(this.isAwaitingPromise()){if(!e.isDismissed){Vi(this);t(e)}}else if(i)t(e)}function Ui(){return!!I.awaitingPromise.get(this)}const ji=e=>{const t=p();if(!t)return false;const i=I.innerParams.get(e);if(!i||y(t,i.hideClass.popup))return false;k(t,i.showClass.popup);w(t,i.hideClass.popup);const r=u();k(r,i.showClass.backdrop);w(r,i.hideClass.backdrop);zi(e,t,i);return true};function Fi(e){const t=wi.swalPromiseReject.get(this);Vi(this);if(t)t(e)}const Vi=e=>{if(e.isAwaitingPromise()){I.awaitingPromise.delete(e);if(!I.innerParams.get(e))e._destroy()}},Wi=e=>{if(typeof e==="undefined")return{isConfirmed:false,isDenied:false,isDismissed:true};return Object.assign({isConfirmed:false,isDenied:false,isDismissed:false},e)},zi=(e,t,i)=>{const r=u();const n=qe&&Pe(t);if(typeof i.willClose==="function")i.willClose(t);if(n)qi(e,t,r,i.returnFocus,i.didClose);else Di(e,r,i.returnFocus,i.didClose)},qi=(e,t,i,r,n)=>{O.swalCloseEventFinishedCallback=Di.bind(null,e,i,r,n);t.addEventListener(qe,function(e){if(e.target===t){O.swalCloseEventFinishedCallback();delete O.swalCloseEventFinishedCallback}})},Gi=(e,t)=>{setTimeout(()=>{if(typeof t==="function")t.bind(e.params)();e._destroy()})};function Ji(e,t,i){const r=I.domCache.get(e);t.forEach(e=>{r[e].disabled=i})}function Hi(e,t){if(!e)return false;if(e.type==="radio"){const i=e.parentNode.parentNode;const r=i.querySelectorAll("input");for(let e=0;e<r.length;e++)r[e].disabled=t}else e.disabled=t}function Ki(){Ji(this,["confirmButton","denyButton","cancelButton"],false)}function Qi(){Ji(this,["confirmButton","denyButton","cancelButton"],true)}function Yi(){return Hi(this.getInput(),false)}function Xi(){return Hi(this.getInput(),true)}function Zi(e){const t=I.domCache.get(this);const i=I.innerParams.get(this);v(t.validationMessage,e);t.validationMessage.className=l["validation-message"];if(i.customClass&&i.customClass.validationMessage)w(t.validationMessage,i.customClass.validationMessage);C(t.validationMessage);const r=this.getInput();if(r){r.setAttribute("aria-invalid",true);r.setAttribute("aria-describedby",l["validation-message"]);we(r);w(r,l.inputerror)}}function er(){const e=I.domCache.get(this);if(e.validationMessage)$(e.validationMessage);const t=this.getInput();if(t){t.removeAttribute("aria-invalid");t.removeAttribute("aria-describedby");k(t,l.inputerror)}}function tr(){const e=I.domCache.get(this);return e.progressSteps}function ir(e){const t=p();const i=I.innerParams.get(this);if(!t||y(t,i.hideClass.popup))return a("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r=rr(e);const n=Object.assign({},i,r);Rt(this,n);I.innerParams.set(this,n);Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:false,enumerable:true}})}const rr=t=>{const i={};Object.keys(t).forEach(e=>{if(Q(e))i[e]=t[e];else a("Invalid parameter to update: ".concat(e))});return i};function nr(){const e=I.domCache.get(this);const t=I.innerParams.get(this);if(!t){ar(this);return}if(e.popup&&O.swalCloseEventFinishedCallback){O.swalCloseEventFinishedCallback();delete O.swalCloseEventFinishedCallback}if(typeof t.didDestroy==="function")t.didDestroy();or(this)}const or=e=>{ar(e);delete e.params;delete O.keydownHandler;delete O.keydownTarget;delete O.currentInstance},ar=e=>{if(e.isAwaitingPromise()){sr(I,e);I.awaitingPromise.set(e,true)}else{sr(wi,e);sr(I,e)}},sr=(e,t)=>{for(const i in e)e[i].delete(t)};var cr=Object.freeze({hideLoading:vi,disableLoading:vi,getInput:Si,close:Bi,isAwaitingPromise:Ui,rejectPromise:Fi,handleAwaitingPromise:Vi,closePopup:Bi,closeModal:Bi,closeToast:Bi,enableButtons:Ki,disableButtons:Qi,enableInput:Yi,disableInput:Xi,showValidationMessage:Zi,resetValidationMessage:er,getProgressSteps:tr,update:ir,_destroy:nr});const lr=e=>{const t=I.innerParams.get(e);e.disableButtons();if(t.input)pr(e,"confirm");else br(e,true)},dr=e=>{const t=I.innerParams.get(e);e.disableButtons();if(t.returnInputValueOnDeny)pr(e,"deny");else fr(e,false)},ur=(e,t)=>{e.disableButtons();t(A.cancel)},pr=(e,t)=>{const i=I.innerParams.get(e);if(!i.input)return o('The "input" parameter is needed to be set when using returnInputValueOn'.concat(B(t)));const r=li(e,i);if(i.inputValidator)hr(e,r,t);else if(!e.getInput().checkValidity()){e.enableButtons();e.showValidationMessage(i.validationMessage)}else if(t==="deny")fr(e,r);else br(e,r)},hr=(t,i,r)=>{const e=I.innerParams.get(t);t.disableInput();const n=Promise.resolve().then(()=>s(e.inputValidator(i,e.validationMessage)));n.then(e=>{t.enableButtons();t.enableInput();if(e)t.showValidationMessage(e);else if(r==="deny")fr(t,i);else br(t,i)})},fr=(t,i)=>{const e=I.innerParams.get(t||undefined);if(e.showLoaderOnDeny)L(m());if(e.preDeny){I.awaitingPromise.set(t||undefined,true);const r=Promise.resolve().then(()=>s(e.preDeny(i,e.validationMessage)));r.then(e=>{if(e===false){t.hideLoading();Vi(t)}else t.closePopup({isDenied:true,value:typeof e==="undefined"?i:e})}).catch(e=>gr(t||undefined,e))}else t.closePopup({isDenied:true,value:i})},mr=(e,t)=>{e.closePopup({isConfirmed:true,value:t})},gr=(e,t)=>{e.rejectPromise(t)},br=(t,i)=>{const e=I.innerParams.get(t||undefined);if(e.showLoaderOnConfirm)L();if(e.preConfirm){t.resetValidationMessage();I.awaitingPromise.set(t||undefined,true);const r=Promise.resolve().then(()=>s(e.preConfirm(i,e.validationMessage)));r.then(e=>{if(P(ce())||e===false){t.hideLoading();Vi(t)}else mr(t,typeof e==="undefined"?i:e)}).catch(e=>gr(t||undefined,e))}else mr(t,i)},vr=(e,t,i)=>{const r=I.innerParams.get(e);if(r.toast)yr(e,t,i);else{kr(t);Er(t);Tr(e,t,i)}},yr=(t,e,i)=>{e.popup.onclick=()=>{const e=I.innerParams.get(t);if(e&&(Sr(e)||e.timer||e.input))return;i(A.close)}},Sr=e=>{return e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton};let wr=false;const kr=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=undefined;if(e.target===t.container)wr=true}}},Er=t=>{t.container.onmousedown=()=>{t.popup.onmouseup=function(e){t.popup.onmouseup=undefined;if(e.target===t.popup||t.popup.contains(e.target))wr=true}}},Tr=(i,r,n)=>{r.container.onclick=e=>{const t=I.innerParams.get(i);if(wr){wr=false;return}if(e.target===r.container&&V(t.allowOutsideClick))n(A.backdrop)}},Cr=e=>typeof e==="object"&&e.jquery,$r=e=>e instanceof Element||Cr(e),Pr=r=>{const n={};if(typeof r[0]==="object"&&!$r(r[0]))Object.assign(n,r[0]);else["title","html","icon"].forEach((e,t)=>{const i=r[t];if(typeof i==="string"||$r(i))n[e]=i;else if(i!==undefined)o("Unexpected type of ".concat(e,'! Expected "string" or "Element", got ').concat(typeof i))});return n};function Or(){const e=this;for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return new e(...i)}function Rr(i){class e extends this{_main(e,t){return super._main(e,Object.assign({},i,t))}}return e}const Ir=()=>{return O.timeout&&O.timeout.getTimerLeft()},Ar=()=>{if(O.timeout){Re();return O.timeout.stop()}},xr=()=>{if(O.timeout){const e=O.timeout.start();Oe(e);return e}},Lr=()=>{const e=O.timeout;return e&&(e.running?Ar():xr())},_r=e=>{if(O.timeout){const t=O.timeout.increase(e);Oe(t,true);return t}},Nr=()=>{return O.timeout&&O.timeout.isRunning()};let Dr=false;const Mr={};function Br(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"data-swal-template";Mr[e]=this;if(!Dr){document.body.addEventListener("click",Ur);Dr=true}}const Ur=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const i in Mr){const r=e.getAttribute(i);if(r){Mr[i].fire({template:r});return}}};var jr=Object.freeze({isValidParameter:K,isUpdatableParameter:Q,isDeprecatedParameter:Y,argsToParams:Pr,isVisible:ki,clickConfirm:Ei,clickDeny:Ti,clickCancel:Ci,getContainer:u,getPopup:p,getTitle:ne,getHtmlContainer:oe,getImage:ae,getIcon:h,getInputLabel:le,getCloseButton:he,getActions:de,getConfirmButton:f,getDenyButton:m,getCancelButton:b,getLoader:g,getFooter:ue,getTimerProgressBar:pe,getFocusableElements:me,getValidationMessage:ce,isLoading:ve,fire:Or,mixin:Rr,showLoading:L,enableLoading:L,getTimerLeft:Ir,stopTimer:Ar,resumeTimer:xr,toggleTimer:Lr,increaseTimer:_r,isTimerRunning:Nr,bindClickHandler:Br});let _;class N{constructor(){if(typeof window==="undefined")return;_=this;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const r=Object.freeze(this.constructor.argsToParams(t));Object.defineProperties(this,{params:{value:r,writable:false,enumerable:true,configurable:true}});const n=_._main(_.params);I.promise.set(this,n)}_main(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};te(Object.assign({},t,e));if(O.currentInstance){O.currentInstance._destroy();if(ge())At()}O.currentInstance=_;const i=Vr(e,t);zt(i);Object.freeze(i);if(O.timeout){O.timeout.stop();delete O.timeout}clearTimeout(O.restoreFocusTimeout);const r=Wr(_);Rt(_,i);I.innerParams.set(_,i);return Fr(_,r,i)}then(e){const t=I.promise.get(this);return t.then(e)}finally(e){const t=I.promise.get(this);return t.finally(e)}}const Fr=(r,n,o)=>{return new Promise((e,t)=>{const i=e=>{r.closePopup({isDismissed:true,dismiss:e})};wi.swalPromiseResolve.set(r,e);wi.swalPromiseReject.set(r,t);n.confirmButton.onclick=()=>lr(r);n.denyButton.onclick=()=>dr(r);n.cancelButton.onclick=()=>ur(r,i);n.closeButton.onclick=()=>i(A.close);vr(r,n,i);Pi(r,O,o,i);ci(r,o);ii(o);zr(O,o,i);qr(n,o);setTimeout(()=>{n.container.scrollTop=0})})},Vr=(e,t)=>{const i=Lt(e);const r=Object.assign({},c,t,i,e);r.showClass=Object.assign({},c.showClass,r.showClass);r.hideClass=Object.assign({},c.hideClass,r.hideClass);return r},Wr=e=>{const t={popup:p(),container:u(),actions:de(),confirmButton:f(),denyButton:m(),cancelButton:b(),loader:g(),closeButton:he(),validationMessage:ce(),progressSteps:se()};I.domCache.set(e,t);return t},zr=(e,t,i)=>{const r=pe();$(r);if(t.timer){e.timeout=new qt(()=>{i("timer");delete e.timeout},t.timer);if(t.timerProgressBar){C(r);S(r,t,"timerProgressBar");setTimeout(()=>{if(e.timeout&&e.timeout.running)Oe(t.timer)})}}},qr=(e,t)=>{if(t.toast)return;if(!V(t.allowEnterKey))return Jr();if(!Gr(e,t))Oi(t,-1,1)},Gr=(e,t)=>{if(t.focusDeny&&P(e.denyButton)){e.denyButton.focus();return true}if(t.focusCancel&&P(e.cancelButton)){e.cancelButton.focus();return true}if(t.focusConfirm&&P(e.confirmButton)){e.confirmButton.focus();return true}return false},Jr=()=>{if(document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur==="function")document.activeElement.blur()},Hr=(Object.assign(N.prototype,cr),Object.assign(N,jr),Object.keys(cr).forEach(e=>{N[e]=function(){if(_)return _[e](...arguments)}}),N.DismissReason=A,N.version="11.4.19",N);return Hr.default=Hr}(),void 0!==commonjsGlobal&&commonjsGlobal.Sweetalert2&&(commonjsGlobal.swal=commonjsGlobal.sweetAlert=commonjsGlobal.Swal=commonjsGlobal.SweetAlert=commonjsGlobal.Sweetalert2),"undefined"!=typeof document){var t=document,e='.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px hsla(0deg,0%,0%,.075),0 1px 2px hsla(0deg,0%,0%,.075),1px 2px 4px hsla(0deg,0%,0%,.075),1px 3px 8px hsla(0deg,0%,0%,.075),2px 4px 16px hsla(0deg,0%,0%,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:0 0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:0 0;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:0 0;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:0 0;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-no-war{display:flex;position:fixed;z-index:1061;top:0;left:0;align-items:center;justify-content:center;width:100%;height:3.375em;background:#20232a;color:#fff;text-align:center}.swal2-no-war a{color:#61dafb;text-decoration:none}.swal2-no-war a:hover{text-decoration:underline}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}',i=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=e);else try{i.innerHTML=e}catch(t){i.innerText=e}}}(sweetalert2_all),sweetalert2_all.exports),check=function(e){return e&&e.Math==Math&&e},global$k=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||Function("return this")(),shared$4={exports:{}},global$j=global$k,defineProperty$7=Object.defineProperty,defineGlobalProperty$3=function(t,i){try{defineProperty$7(global$j,t,{value:i,configurable:!0,writable:!0})}catch(e){global$j[t]=i}return i},global$i=global$k,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$i[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore,fails$o=((shared$4.exports=function(e,t){return store$2[e]||(store$2[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.23.3",mode:"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"}),function(e){try{return!!e()}catch(e){return!0}}),fails$n=fails$o,functionBindNative=!fails$n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),NATIVE_BIND$3=functionBindNative,FunctionPrototype$3=Function.prototype,bind$3=FunctionPrototype$3.bind,call$e=FunctionPrototype$3.call,uncurryThis$q=NATIVE_BIND$3&&bind$3.bind(call$e,call$e),functionUncurryThis=NATIVE_BIND$3?function(e){return e&&uncurryThis$q(e)}:function(e){return e&&function(){return call$e.apply(e,arguments)}},$TypeError$b=TypeError,requireObjectCoercible$6=function(e){if(null==e)throw $TypeError$b("Can't call method on "+e);return e},requireObjectCoercible$5=requireObjectCoercible$6,$Object$4=Object,toObject$6=function(e){return $Object$4(requireObjectCoercible$5(e))},uncurryThis$p=functionUncurryThis,toObject$5=toObject$6,hasOwnProperty$1=uncurryThis$p({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(e,t){return hasOwnProperty$1(toObject$5(e),t)},uncurryThis$o=functionUncurryThis,id$2=0,postfix=Math.random(),toString$a=uncurryThis$o(1..toString),uid$3=function(e){return"Symbol("+(void 0===e?"":e)+")_"+toString$a(++id$2+postfix,36)},isCallable$k=function(e){return"function"==typeof e},global$h=global$k,isCallable$j=isCallable$k,aFunction=function(e){return isCallable$j(e)?e:void 0},getBuiltIn$5=function(e,t){return arguments.length<2?aFunction(global$h[e]):global$h[e]&&global$h[e][t]},getBuiltIn$4=getBuiltIn$5,engineUserAgent=getBuiltIn$4("navigator","userAgent")||"",global$g=global$k,userAgent=engineUserAgent,process$1=global$g.process,Deno=global$g.Deno,versions=process$1&&process$1.versions||Deno&&Deno.version,v8=versions&&versions.v8,match,version,engineV8Version=(v8&&(match=v8.split("."),version=0<match[0]&&match[0]<4?1:+(match[0]+match[1])),!version&&userAgent&&(match=userAgent.match(/Edge\/(\d+)/),(!match||74<=match[1])&&(match=userAgent.match(/Chrome\/(\d+)/),match&&(version=+match[1]))),version),V8_VERSION$1=engineV8Version,fails$m=fails$o,nativeSymbol=!!Object.getOwnPropertySymbols&&!fails$m(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&V8_VERSION$1&&V8_VERSION$1<41}),NATIVE_SYMBOL$1=nativeSymbol,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,global$f=global$k,shared$3=shared$4.exports,hasOwn$a=hasOwnProperty_1,uid$2=uid$3,NATIVE_SYMBOL=nativeSymbol,USE_SYMBOL_AS_UID$1=useSymbolAsUid,WellKnownSymbolsStore=shared$3("wks"),Symbol$2=global$f.Symbol,symbolFor=Symbol$2&&Symbol$2.for,createWellKnownSymbol=USE_SYMBOL_AS_UID$1?Symbol$2:Symbol$2&&Symbol$2.withoutSetter||uid$2,wellKnownSymbol$f=function(e){var t;return hasOwn$a(WellKnownSymbolsStore,e)&&(NATIVE_SYMBOL||"string"==typeof WellKnownSymbolsStore[e])||(t="Symbol."+e,NATIVE_SYMBOL&&hasOwn$a(Symbol$2,e)?WellKnownSymbolsStore[e]=Symbol$2[e]:WellKnownSymbolsStore[e]=(USE_SYMBOL_AS_UID$1&&symbolFor?symbolFor:createWellKnownSymbol)(t)),WellKnownSymbolsStore[e]},wellKnownSymbol$e=wellKnownSymbol$f,TO_STRING_TAG$3=wellKnownSymbol$e("toStringTag"),test={},toStringTagSupport=(test[TO_STRING_TAG$3]="z","[object z]"===String(test)),objectDefineProperty={},fails$l=fails$o,descriptors=!fails$l(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),isCallable$i=isCallable$k,isObject$f=function(e){return"object"==typeof e?null!==e:isCallable$i(e)},global$e=global$k,isObject$e=isObject$f,document$1=global$e.document,EXISTS$1=isObject$e(document$1)&&isObject$e(document$1.createElement),documentCreateElement$2=function(e){return EXISTS$1?document$1.createElement(e):{}},DESCRIPTORS$a=descriptors,fails$k=fails$o,createElement=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$a&&!fails$k(function(){return 7!=Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a}),DESCRIPTORS$9=descriptors,fails$j=fails$o,v8PrototypeDefineBug=DESCRIPTORS$9&&fails$j(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),isObject$d=isObject$f,$String$3=String,$TypeError$a=TypeError,anObject$d=function(e){if(isObject$d(e))return e;throw $TypeError$a($String$3(e)+" is not an object")},NATIVE_BIND$2=functionBindNative,call$d=Function.prototype.call,functionCall=NATIVE_BIND$2?call$d.bind(call$d):function(){return call$d.apply(call$d,arguments)},uncurryThis$n=functionUncurryThis,objectIsPrototypeOf=uncurryThis$n({}.isPrototypeOf),getBuiltIn$3=getBuiltIn$5,isCallable$h=isCallable$k,isPrototypeOf$2=objectIsPrototypeOf,USE_SYMBOL_AS_UID=useSymbolAsUid,$Object$3=Object,isSymbol$4=USE_SYMBOL_AS_UID?function(e){return"symbol"==typeof e}:function(e){var t=getBuiltIn$3("Symbol");return isCallable$h(t)&&isPrototypeOf$2(t.prototype,$Object$3(e))},$String$2=String,tryToString$3=function(e){try{return $String$2(e)}catch(e){return"Object"}},isCallable$g=isCallable$k,tryToString$2=tryToString$3,$TypeError$9=TypeError,aCallable$4=function(e){if(isCallable$g(e))return e;throw $TypeError$9(tryToString$2(e)+" is not a function")},aCallable$3=aCallable$4,getMethod$5=function(e,t){e=e[t];return null==e?void 0:aCallable$3(e)},call$c=functionCall,isCallable$f=isCallable$k,isObject$c=isObject$f,$TypeError$8=TypeError,ordinaryToPrimitive$1=function(e,t){var i,r;if("string"===t&&isCallable$f(i=e.toString)&&!isObject$c(r=call$c(i,e)))return r;if(isCallable$f(i=e.valueOf)&&!isObject$c(r=call$c(i,e)))return r;if("string"!==t&&isCallable$f(i=e.toString)&&!isObject$c(r=call$c(i,e)))return r;throw $TypeError$8("Can't convert object to primitive value")},call$b=functionCall,isObject$b=isObject$f,isSymbol$3=isSymbol$4,getMethod$4=getMethod$5,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$d=wellKnownSymbol$f,$TypeError$7=TypeError,TO_PRIMITIVE=wellKnownSymbol$d("toPrimitive"),toPrimitive$1=function(e,t){if(!isObject$b(e)||isSymbol$3(e))return e;var i=getMethod$4(e,TO_PRIMITIVE);if(i){if(i=call$b(i,e,t=void 0===t?"default":t),!isObject$b(i)||isSymbol$3(i))return i;throw $TypeError$7("Can't convert object to primitive value")}return ordinaryToPrimitive(e,t=void 0===t?"number":t)},toPrimitive=toPrimitive$1,isSymbol$2=isSymbol$4,toPropertyKey$3=function(e){e=toPrimitive(e,"string");return isSymbol$2(e)?e:e+""},DESCRIPTORS$8=descriptors,IE8_DOM_DEFINE$1=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$c=anObject$d,toPropertyKey$2=toPropertyKey$3,$TypeError$6=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable",makeBuiltIn$2=(objectDefineProperty.f=DESCRIPTORS$8?V8_PROTOTYPE_DEFINE_BUG$1?function(e,t,i){var r;return anObject$c(e),t=toPropertyKey$2(t),anObject$c(i),"function"==typeof e&&"prototype"===t&&"value"in i&&WRITABLE in i&&!i[WRITABLE]&&((r=$getOwnPropertyDescriptor$1(e,t))&&r[WRITABLE]&&(e[t]=i.value,i={configurable:(CONFIGURABLE$1 in i?i:r)[CONFIGURABLE$1],enumerable:(ENUMERABLE in i?i:r)[ENUMERABLE],writable:!1})),$defineProperty(e,t,i)}:$defineProperty:function(e,t,i){if(anObject$c(e),t=toPropertyKey$2(t),anObject$c(i),IE8_DOM_DEFINE$1)try{return $defineProperty(e,t,i)}catch(e){}if("get"in i||"set"in i)throw $TypeError$6("Accessors not supported");return"value"in i&&(e[t]=i.value),e},{exports:{}}),DESCRIPTORS$7=descriptors,hasOwn$9=hasOwnProperty_1,FunctionPrototype$2=Function.prototype,getDescriptor=DESCRIPTORS$7&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$9(FunctionPrototype$2,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS$7||getDescriptor(FunctionPrototype$2,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},uncurryThis$m=functionUncurryThis,isCallable$e=isCallable$k,store$1=sharedStore,functionToString$1=uncurryThis$m(Function.toString),inspectSource$3=(isCallable$e(store$1.inspectSource)||(store$1.inspectSource=function(e){return functionToString$1(e)}),store$1.inspectSource),global$d=global$k,isCallable$d=isCallable$k,inspectSource$2=inspectSource$3,WeakMap$2=global$d.WeakMap,nativeWeakMap=isCallable$d(WeakMap$2)&&/native code/.test(inspectSource$2(WeakMap$2)),createPropertyDescriptor$4=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},DESCRIPTORS$6=descriptors,definePropertyModule$4=objectDefineProperty,createPropertyDescriptor$3=createPropertyDescriptor$4,createNonEnumerableProperty$6=DESCRIPTORS$6?function(e,t,i){return definePropertyModule$4.f(e,t,createPropertyDescriptor$3(1,i))}:function(e,t,i){return e[t]=i,e},shared$2=shared$4.exports,uid$1=uid$3,keys=shared$2("keys"),sharedKey$3=function(e){return keys[e]||(keys[e]=uid$1(e))},hiddenKeys$5={},NATIVE_WEAK_MAP$1=nativeWeakMap,global$c=global$k,uncurryThis$l=functionUncurryThis,isObject$a=isObject$f,createNonEnumerableProperty$5=createNonEnumerableProperty$6,hasOwn$8=hasOwnProperty_1,shared$1=sharedStore,sharedKey$2=sharedKey$3,hiddenKeys$4=hiddenKeys$5,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$1=global$c.TypeError,WeakMap$1=global$c.WeakMap,set,get,has,enforce=function(e){return has(e)?get(e):set(e,{})},getterFor=function(t){return function(e){if(isObject$a(e)&&(e=get(e)).type===t)return e;throw TypeError$1("Incompatible receiver, "+t+" required")}},store,wmget,wmhas,wmset,set,get,has,STATE,internalState=(has=NATIVE_WEAK_MAP$1||shared$1.state?(store=shared$1.state||(shared$1.state=new WeakMap$1),wmget=uncurryThis$l(store.get),wmhas=uncurryThis$l(store.has),wmset=uncurryThis$l(store.set),set=function(e,t){if(wmhas(store,e))throw new TypeError$1(OBJECT_ALREADY_INITIALIZED);return t.facade=e,wmset(store,e,t),t},get=function(e){return wmget(store,e)||{}},function(e){return wmhas(store,e)}):(STATE=sharedKey$2("state"),hiddenKeys$4[STATE]=!0,set=function(e,t){if(hasOwn$8(e,STATE))throw new TypeError$1(OBJECT_ALREADY_INITIALIZED);return t.facade=e,createNonEnumerableProperty$5(e,STATE,t),t},get=function(e){return hasOwn$8(e,STATE)?e[STATE]:{}},function(e){return hasOwn$8(e,STATE)}),{set:set,get:get,has:has,enforce:enforce,getterFor:getterFor}),fails$i=fails$o,isCallable$c=isCallable$k,hasOwn$7=hasOwnProperty_1,DESCRIPTORS$5=descriptors,CONFIGURABLE_FUNCTION_NAME$1=functionName.CONFIGURABLE,inspectSource$1=inspectSource$3,InternalStateModule$3=internalState,enforceInternalState$1=InternalStateModule$3.enforce,getInternalState$3=InternalStateModule$3.get,defineProperty$6=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS$5&&!fails$i(function(){return 8!==defineProperty$6(function(){},"length",{value:8}).length}),TEMPLATE=String(String).split("String"),makeBuiltIn$1=makeBuiltIn$2.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!hasOwn$7(e,"name")||CONFIGURABLE_FUNCTION_NAME$1&&e.name!==t)&&(DESCRIPTORS$5?defineProperty$6(e,"name",{value:t,configurable:!0}):e.name=t),CONFIGURABLE_LENGTH&&i&&hasOwn$7(i,"arity")&&e.length!==i.arity&&defineProperty$6(e,"length",{value:i.arity});try{i&&hasOwn$7(i,"constructor")&&i.constructor?DESCRIPTORS$5&&defineProperty$6(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}i=enforceInternalState$1(e);return hasOwn$7(i,"source")||(i.source=TEMPLATE.join("string"==typeof t?t:"")),e},isCallable$b=(Function.prototype.toString=makeBuiltIn$1(function(){return isCallable$c(this)&&getInternalState$3(this).source||inspectSource$1(this)},"toString"),isCallable$k),definePropertyModule$3=objectDefineProperty,makeBuiltIn=makeBuiltIn$2.exports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$7=function(e,t,i,r){var n=(r=r||{}).enumerable,o=void 0!==r.name?r.name:t;if(isCallable$b(i)&&makeBuiltIn(i,o,r),r.global)n?e[t]=i:defineGlobalProperty$1(t,i);else{try{r.unsafe?e[t]&&(n=!0):delete e[t]}catch(e){}n?e[t]=i:definePropertyModule$3.f(e,t,{value:i,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},uncurryThis$k=functionUncurryThis,toString$9=uncurryThis$k({}.toString),stringSlice$4=uncurryThis$k("".slice),classofRaw$1=function(e){return stringSlice$4(toString$9(e),8,-1)},TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$a=isCallable$k,classofRaw=classofRaw$1,wellKnownSymbol$c=wellKnownSymbol$f,TO_STRING_TAG$2=wellKnownSymbol$c("toStringTag"),$Object$2=Object,CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof$a=TO_STRING_TAG_SUPPORT$2?classofRaw:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=tryGet(e=$Object$2(e),TO_STRING_TAG$2))?t:CORRECT_ARGUMENTS?classofRaw(e):"Object"==(t=classofRaw(e))&&isCallable$a(e.callee)?"Arguments":t},TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$9=classof$a,objectToString$3=TO_STRING_TAG_SUPPORT$1?{}.toString:function(){return"[object "+classof$9(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,defineBuiltIn$6=defineBuiltIn$7,toString$8=objectToString$3,domIterables=(TO_STRING_TAG_SUPPORT||defineBuiltIn$6(Object.prototype,"toString",toString$8,{unsafe:!0}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),documentCreateElement$1=documentCreateElement$2,classList=documentCreateElement$1("span").classList,DOMTokenListPrototype$2=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$2===Object.prototype?void 0:DOMTokenListPrototype$2,uncurryThis$j=functionUncurryThis,aCallable$2=aCallable$4,NATIVE_BIND$1=functionBindNative,bind$2=uncurryThis$j(uncurryThis$j.bind),functionBindContext=function(e,t){return aCallable$2(e),void 0===t?e:NATIVE_BIND$1?bind$2(e,t):function(){return e.apply(t,arguments)}},uncurryThis$i=functionUncurryThis,fails$h=fails$o,classof$8=classofRaw$1,$Object$1=Object,split=uncurryThis$i("".split),indexedObject=fails$h(function(){return!$Object$1("z").propertyIsEnumerable(0)})?function(e){return"String"==classof$8(e)?split(e,""):$Object$1(e)}:$Object$1,ceil=Math.ceil,floor$1=Math.floor,mathTrunc=Math.trunc||function(e){e=+e;return(0<e?floor$1:ceil)(e)},trunc=mathTrunc,toIntegerOrInfinity$4=function(e){e=+e;return e!=e||0==e?0:trunc(e)},toIntegerOrInfinity$3=toIntegerOrInfinity$4,min$2=Math.min,toLength$3=function(e){return 0<e?min$2(toIntegerOrInfinity$3(e),9007199254740991):0},toLength$2=toLength$3,lengthOfArrayLike$5=function(e){return toLength$2(e.length)},classof$7=classofRaw$1,isArray$1=Array.isArray||function(e){return"Array"==classof$7(e)},uncurryThis$h=functionUncurryThis,fails$g=fails$o,isCallable$9=isCallable$k,classof$6=classof$a,getBuiltIn$2=getBuiltIn$5,inspectSource=inspectSource$3,noop=function(){},empty=[],construct=getBuiltIn$2("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$2=uncurryThis$h(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=function(e){if(!isCallable$9(e))return!1;try{return construct(noop,empty,e),!0}catch(e){return!1}},isConstructorLegacy=function(e){if(!isCallable$9(e))return!1;switch(classof$6(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$2(constructorRegExp,inspectSource(e))}catch(e){return!0}},isConstructor$1=(isConstructorLegacy.sham=!0,!construct||fails$g(function(){var e;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){e=!0})||e})?isConstructorLegacy:isConstructorModern),isArray=isArray$1,isConstructor=isConstructor$1,isObject$9=isObject$f,wellKnownSymbol$b=wellKnownSymbol$f,SPECIES$2=wellKnownSymbol$b("species"),$Array$1=Array,arraySpeciesConstructor$1=function(e){var t;return isArray(e)&&(t=e.constructor,(isConstructor(t)&&(t===$Array$1||isArray(t.prototype))||isObject$9(t)&&null===(t=t[SPECIES$2]))&&(t=void 0)),void 0===t?$Array$1:t},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$1=function(e,t){return new(arraySpeciesConstructor(e))(0===t?0:t)},bind$1=functionBindContext,uncurryThis$g=functionUncurryThis,IndexedObject$3=indexedObject,toObject$4=toObject$6,lengthOfArrayLike$4=lengthOfArrayLike$5,arraySpeciesCreate=arraySpeciesCreate$1,push$2=uncurryThis$g([].push),createMethod$4=function(p){var h=1==p,f=2==p,m=3==p,g=4==p,b=6==p,v=7==p,y=5==p||b;return function(e,t,i,r){for(var n,o,a=toObject$4(e),s=IndexedObject$3(a),c=bind$1(t,i),l=lengthOfArrayLike$4(s),d=0,t=r||arraySpeciesCreate,u=h?t(e,l):f||v?t(e,0):void 0;d<l;d++)if((y||d in s)&&(o=c(n=s[d],d,a),p))if(h)u[d]=o;else if(o)switch(p){case 3:return!0;case 5:return n;case 6:return d;case 2:push$2(u,n)}else switch(p){case 4:return!1;case 7:push$2(u,n)}return b?-1:m||g?g:u}},arrayIteration={forEach:createMethod$4(0),map:createMethod$4(1),filter:createMethod$4(2),some:createMethod$4(3),every:createMethod$4(4),find:createMethod$4(5),findIndex:createMethod$4(6),filterReject:createMethod$4(7)},fails$f=fails$o,arrayMethodIsStrict$2=function(e,t){var i=[][e];return!!i&&fails$f(function(){i.call(null,t||function(){return 1},1)})},$forEach=arrayIteration.forEach,arrayMethodIsStrict$1=arrayMethodIsStrict$2,STRICT_METHOD$1=arrayMethodIsStrict$1("forEach"),arrayForEach=STRICT_METHOD$1?[].forEach:function(e){return $forEach(this,e,1<arguments.length?arguments[1]:void 0)},global$b=global$k,DOMIterables$1=domIterables,DOMTokenListPrototype$1=domTokenListPrototype,forEach=arrayForEach,createNonEnumerableProperty$4=createNonEnumerableProperty$6,handlePrototype$1=function(t){if(t&&t.forEach!==forEach)try{createNonEnumerableProperty$4(t,"forEach",forEach)}catch(e){t.forEach=forEach}},COLLECTION_NAME$1;for(COLLECTION_NAME$1 in DOMIterables$1)DOMIterables$1[COLLECTION_NAME$1]&&handlePrototype$1(global$b[COLLECTION_NAME$1]&&global$b[COLLECTION_NAME$1].prototype);handlePrototype$1(DOMTokenListPrototype$1);var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),canUseDom=canUseDOM,objectGetOwnPropertyDescriptor={},objectPropertyIsEnumerable={},$propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$1&&!$propertyIsEnumerable.call({1:2},1),IndexedObject$2=(objectPropertyIsEnumerable.f=NASHORN_BUG?function(e){e=getOwnPropertyDescriptor$1(this,e);return!!e&&e.enumerable}:$propertyIsEnumerable,indexedObject),requireObjectCoercible$4=requireObjectCoercible$6,toIndexedObject$6=function(e){return IndexedObject$2(requireObjectCoercible$4(e))},DESCRIPTORS$4=descriptors,call$a=functionCall,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,createPropertyDescriptor$2=createPropertyDescriptor$4,toIndexedObject$5=toIndexedObject$6,toPropertyKey$1=toPropertyKey$3,hasOwn$6=hasOwnProperty_1,IE8_DOM_DEFINE=ie8DomDefine,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,objectGetOwnPropertyNames=(objectGetOwnPropertyDescriptor.f=DESCRIPTORS$4?$getOwnPropertyDescriptor:function(e,t){if(e=toIndexedObject$5(e),t=toPropertyKey$1(t),IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(e,t)}catch(e){}if(hasOwn$6(e,t))return createPropertyDescriptor$2(!call$a(propertyIsEnumerableModule$1.f,e,t),e[t])},{}),toIntegerOrInfinity$2=toIntegerOrInfinity$4,max$2=Math.max,min$1=Math.min,toAbsoluteIndex$2=function(e,t){e=toIntegerOrInfinity$2(e);return e<0?max$2(e+t,0):min$1(e,t)},toIndexedObject$4=toIndexedObject$6,toAbsoluteIndex$1=toAbsoluteIndex$2,lengthOfArrayLike$3=lengthOfArrayLike$5,createMethod$3=function(s){return function(e,t,i){var r,n=toIndexedObject$4(e),o=lengthOfArrayLike$3(n),a=toAbsoluteIndex$1(i,o);if(s&&t!=t){for(;a<o;)if((r=n[a++])!=r)return!0}else for(;a<o;a++)if((s||a in n)&&n[a]===t)return s||a||0;return!s&&-1}},arrayIncludes={includes:createMethod$3(!0),indexOf:createMethod$3(!1)},uncurryThis$f=functionUncurryThis,hasOwn$5=hasOwnProperty_1,toIndexedObject$3=toIndexedObject$6,indexOf$1=arrayIncludes.indexOf,hiddenKeys$3=hiddenKeys$5,push$1=uncurryThis$f([].push),objectKeysInternal=function(e,t){var i,r=toIndexedObject$3(e),n=0,o=[];for(i in r)!hasOwn$5(hiddenKeys$3,i)&&hasOwn$5(r,i)&&push$1(o,i);for(;t.length>n;)!hasOwn$5(r,i=t[n++])||~indexOf$1(o,i)||push$1(o,i);return o},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$2=enumBugKeys$2.concat("length","prototype"),objectGetOwnPropertySymbols=(objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(e){return internalObjectKeys$1(e,hiddenKeys$2)},{}),getBuiltIn$1=(objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols,getBuiltIn$5),uncurryThis$e=functionUncurryThis,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,anObject$b=anObject$d,concat$2=uncurryThis$e([].concat),ownKeys$1=getBuiltIn$1("Reflect","ownKeys")||function(e){var t=getOwnPropertyNamesModule$1.f(anObject$b(e)),i=getOwnPropertySymbolsModule$1.f;return i?concat$2(t,i(e)):t},hasOwn$4=hasOwnProperty_1,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule$2=objectDefineProperty,copyConstructorProperties$1=function(e,t,i){for(var r=ownKeys(t),n=definePropertyModule$2.f,o=getOwnPropertyDescriptorModule.f,a=0;a<r.length;a++){var s=r[a];hasOwn$4(e,s)||i&&hasOwn$4(i,s)||n(e,s,o(t,s))}},fails$e=fails$o,isCallable$8=isCallable$k,replacement=/#|\.prototype\./,isForced$2=function(e,t){e=data[normalize(e)];return e==POLYFILL||e!=NATIVE&&(isCallable$8(t)?fails$e(t):!!t)},normalize=isForced$2.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced$2.data={},NATIVE=isForced$2.NATIVE="N",POLYFILL=isForced$2.POLYFILL="P",isForced_1=isForced$2,global$a=global$k,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$3=createNonEnumerableProperty$6,defineBuiltIn$5=defineBuiltIn$7,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties=copyConstructorProperties$1,isForced$1=isForced_1,_export=function(e,t){var i,r,n,o=e.target,a=e.global,s=e.stat,c=a?global$a:s?global$a[o]||defineGlobalProperty(o,{}):(global$a[o]||{}).prototype;if(c)for(i in t){if(r=t[i],n=e.dontCallGetSet?(n=getOwnPropertyDescriptor(c,i))&&n.value:c[i],!isForced$1(a?i:o+(s?".":"#")+i,e.forced)&&void 0!==n){if(typeof r==typeof n)continue;copyConstructorProperties(r,n)}(e.sham||n&&n.sham)&&createNonEnumerableProperty$3(r,"sham",!0),defineBuiltIn$5(c,i,r,e)}},classof$5=classof$a,$String$1=String,toString$7=function(e){if("Symbol"===classof$5(e))throw TypeError("Cannot convert a Symbol value to a string");return $String$1(e)},whitespaces$2="\t\n\v\f\r \u2028\u2029\ufeff",uncurryThis$d=functionUncurryThis,requireObjectCoercible$3=requireObjectCoercible$6,toString$6=toString$7,whitespaces$1=whitespaces$2,replace$2=uncurryThis$d("".replace),whitespace="["+whitespaces$1+"]",ltrim=RegExp("^"+whitespace+whitespace+"*"),rtrim=RegExp(whitespace+whitespace+"*$"),createMethod$2=function(t){return function(e){e=toString$6(requireObjectCoercible$3(e));return 1&t&&(e=replace$2(e,ltrim,"")),e=2&t?replace$2(e,rtrim,""):e}},stringTrim={start:createMethod$2(1),end:createMethod$2(2),trim:createMethod$2(3)},global$9=global$k,fails$d=fails$o,uncurryThis$c=functionUncurryThis,toString$5=toString$7,trim=stringTrim.trim,whitespaces=whitespaces$2,$parseInt$1=global$9.parseInt,Symbol$1=global$9.Symbol,ITERATOR$6=Symbol$1&&Symbol$1.iterator,hex=/^[+-]?0x/i,exec$1=uncurryThis$c(hex.exec),FORCED=8!==$parseInt$1(whitespaces+"08")||22!==$parseInt$1(whitespaces+"0x16")||ITERATOR$6&&!fails$d(function(){$parseInt$1(Object(ITERATOR$6))}),numberParseInt=FORCED?function(e,t){e=trim(toString$5(e));return $parseInt$1(e,t>>>0||(exec$1(hex,e)?16:10))}:$parseInt$1,$$8=_export,$parseInt=numberParseInt,internalObjectKeys=($$8({global:!0,forced:parseInt!=$parseInt},{parseInt:$parseInt}),objectKeysInternal),enumBugKeys$1=enumBugKeys$3,objectKeys$2=Object.keys||function(e){return internalObjectKeys(e,enumBugKeys$1)},DESCRIPTORS$3=descriptors,uncurryThis$b=functionUncurryThis,call$9=functionCall,fails$c=fails$o,objectKeys$1=objectKeys$2,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,propertyIsEnumerableModule=objectPropertyIsEnumerable,toObject$3=toObject$6,IndexedObject$1=indexedObject,$assign=Object.assign,defineProperty$5=Object.defineProperty,concat$1=uncurryThis$b([].concat),objectAssign=!$assign||fails$c(function(){if(DESCRIPTORS$3&&1!==$assign({b:1},$assign(defineProperty$5({},"a",{enumerable:!0,get:function(){defineProperty$5(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),r="abcdefghijklmnopqrst";return e[i]=7,r.split("").forEach(function(e){t[e]=e}),7!=$assign({},e)[i]||objectKeys$1($assign({},t)).join("")!=r})?function(e,t){for(var i=toObject$3(e),r=arguments.length,n=1,o=getOwnPropertySymbolsModule.f,a=propertyIsEnumerableModule.f;n<r;)for(var s,c=IndexedObject$1(arguments[n++]),l=o?concat$1(objectKeys$1(c),o(c)):objectKeys$1(c),d=l.length,u=0;u<d;)s=l[u++],DESCRIPTORS$3&&!call$9(a,c,s)||(i[s]=c[s]);return i}:$assign,$$7=_export,assign=objectAssign,fails$b=($$7({target:"Object",stat:!0,arity:2,forced:Object.assign!==assign},{assign:assign}),fails$o),wellKnownSymbol$a=wellKnownSymbol$f,V8_VERSION=engineV8Version,SPECIES$1=wellKnownSymbol$a("species"),arrayMethodHasSpeciesSupport$1=function(t){return 51<=V8_VERSION||!fails$b(function(){var e=[];return(e.constructor={})[SPECIES$1]=function(){return{foo:1}},1!==e[t](Boolean).foo})},$$6=_export,$filter=arrayIteration.filter,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$1,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("filter"),objectDefineProperties=($$6({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{filter:function(e){return $filter(this,e,1<arguments.length?arguments[1]:void 0)}}),{}),DESCRIPTORS$2=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$1=objectDefineProperty,anObject$a=anObject$d,toIndexedObject$2=toIndexedObject$6,objectKeys=objectKeys$2,getBuiltIn=(objectDefineProperties.f=DESCRIPTORS$2&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(e,t){anObject$a(e);for(var i,r=toIndexedObject$2(t),n=objectKeys(t),o=n.length,a=0;a<o;)definePropertyModule$1.f(e,i=n[a++],r[i]);return e},getBuiltIn$5),html$1=getBuiltIn("document","documentElement"),anObject$9=anObject$d,definePropertiesModule=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys$1=hiddenKeys$5,html=html$1,documentCreateElement=documentCreateElement$2,sharedKey$1=sharedKey$3,GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$1("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e=documentCreateElement("iframe"),t="java"+SCRIPT+":";return e.style.display="none",html.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(e){}NullProtoObject="undefined"==typeof document||document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame();for(var e=enumBugKeys.length;e--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[e]];return NullProtoObject()},objectCreate=(hiddenKeys$1[IE_PROTO$1]=!0,Object.create||function(e,t){var i;return null!==e?(EmptyConstructor[PROTOTYPE]=anObject$9(e),i=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,i[IE_PROTO$1]=e):i=NullProtoObject(),void 0===t?i:definePropertiesModule.f(i,t)}),wellKnownSymbol$9=wellKnownSymbol$f,create$2=objectCreate,defineProperty$4=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$9("unscopables"),ArrayPrototype$1=Array.prototype,addToUnscopables$1=(null==ArrayPrototype$1[UNSCOPABLES]&&defineProperty$4(ArrayPrototype$1,UNSCOPABLES,{configurable:!0,value:create$2(null)}),function(e){ArrayPrototype$1[UNSCOPABLES][e]=!0}),iterators={},fails$a=fails$o,correctPrototypeGetter=!fails$a(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),hasOwn$3=hasOwnProperty_1,isCallable$7=isCallable$k,toObject$2=toObject$6,sharedKey=sharedKey$3,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO=sharedKey("IE_PROTO"),$Object=Object,ObjectPrototype=$Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(e){e=toObject$2(e);if(hasOwn$3(e,IE_PROTO))return e[IE_PROTO];var t=e.constructor;return isCallable$7(t)&&e instanceof t?t.prototype:e instanceof $Object?ObjectPrototype:null},fails$9=fails$o,isCallable$6=isCallable$k,getPrototypeOf$1=objectGetPrototypeOf,defineBuiltIn$4=defineBuiltIn$7,wellKnownSymbol$8=wellKnownSymbol$f,ITERATOR$5=wellKnownSymbol$8("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator,NEW_ITERATOR_PROTOTYPE=([].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$1(getPrototypeOf$1(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0),null==IteratorPrototype$2||fails$9(function(){var e={};return IteratorPrototype$2[ITERATOR$5].call(e)!==e})),iteratorsCore=(NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={}),isCallable$6(IteratorPrototype$2[ITERATOR$5])||defineBuiltIn$4(IteratorPrototype$2,ITERATOR$5,function(){return this}),{IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1}),defineProperty$3=objectDefineProperty.f,hasOwn$2=hasOwnProperty_1,wellKnownSymbol$7=wellKnownSymbol$f,TO_STRING_TAG$1=wellKnownSymbol$7("toStringTag"),setToStringTag$3=function(e,t,i){(e=e&&!i?e.prototype:e)&&!hasOwn$2(e,TO_STRING_TAG$1)&&defineProperty$3(e,TO_STRING_TAG$1,{configurable:!0,value:t})},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$1=objectCreate,createPropertyDescriptor$1=createPropertyDescriptor$4,setToStringTag$2=setToStringTag$3,Iterators$4=iterators,returnThis$1=function(){return this},createIteratorConstructor$1=function(e,t,i,r){t+=" Iterator";return e.prototype=create$1(IteratorPrototype$1,{next:createPropertyDescriptor$1(+!r,i)}),setToStringTag$2(e,t,!1),Iterators$4[t]=returnThis$1,e},isCallable$5=isCallable$k,$String=String,$TypeError$5=TypeError,aPossiblePrototype$1=function(e){if("object"==typeof e||isCallable$5(e))return e;throw $TypeError$5("Can't set "+$String(e)+" as a prototype")},uncurryThis$a=functionUncurryThis,anObject$8=anObject$d,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var i,r=!1,e={};try{(i=uncurryThis$a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),r=e instanceof Array}catch(e){}return function(e,t){return anObject$8(e),aPossiblePrototype(t),r?i(e,t):e.__proto__=t,e}}():void 0),$$5=_export,call$8=functionCall,FunctionName=functionName,isCallable$4=isCallable$k,createIteratorConstructor=createIteratorConstructor$1,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf$1=objectSetPrototypeOf,setToStringTag$1=setToStringTag$3,createNonEnumerableProperty$2=createNonEnumerableProperty$6,defineBuiltIn$3=defineBuiltIn$7,wellKnownSymbol$6=wellKnownSymbol$f,Iterators$3=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$4=wellKnownSymbol$6("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},defineIterator$2=function(e,t,i,r,n,o,a){createIteratorConstructor(i,t,r);function s(e){if(e===n&&h)return h;if(!BUGGY_SAFARI_ITERATORS&&e in u)return u[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new i(this,e)}}return function(){return new i(this)}}var c,l,r=t+" Iterator",d=!1,u=e.prototype,p=u[ITERATOR$4]||u["@@iterator"]||n&&u[n],h=!BUGGY_SAFARI_ITERATORS&&p||s(n),f="Array"==t&&u.entries||p;if(f&&(f=getPrototypeOf(f.call(new e)))!==Object.prototype&&f.next&&(getPrototypeOf(f)!==IteratorPrototype&&(setPrototypeOf$1?setPrototypeOf$1(f,IteratorPrototype):isCallable$4(f[ITERATOR$4])||defineBuiltIn$3(f,ITERATOR$4,returnThis)),setToStringTag$1(f,r,!0)),PROPER_FUNCTION_NAME&&n==VALUES&&p&&p.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty$2(u,"name",VALUES):(d=!0,h=function(){return call$8(p,this)})),n)if(c={values:s(VALUES),keys:o?h:s(KEYS),entries:s(ENTRIES)},a)for(l in c)!BUGGY_SAFARI_ITERATORS&&!d&&l in u||defineBuiltIn$3(u,l,c[l]);else $$5({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS||d},c);return u[ITERATOR$4]!==h&&defineBuiltIn$3(u,ITERATOR$4,h,{name:n}),Iterators$3[t]=h,c},toIndexedObject$1=toIndexedObject$6,addToUnscopables=addToUnscopables$1,Iterators$2=iterators,InternalStateModule$2=internalState,defineProperty$2=objectDefineProperty.f,defineIterator$1=defineIterator$2,DESCRIPTORS$1=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$2=InternalStateModule$2.set,getInternalState$2=InternalStateModule$2.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$1(Array,"Array",function(e,t){setInternalState$2(this,{type:ARRAY_ITERATOR,target:toIndexedObject$1(e),index:0,kind:t})},function(){var e=getInternalState$2(this),t=e.target,i=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==i?{value:r,done:!1}:"values"==i?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),values=Iterators$2.Arguments=Iterators$2.Array;if(addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries"),DESCRIPTORS$1&&"values"!==values.name)try{defineProperty$2(values,"name",{value:"values"})}catch(error){}var uncurryThis$9=functionUncurryThis,toIntegerOrInfinity$1=toIntegerOrInfinity$4,toString$4=toString$7,requireObjectCoercible$2=requireObjectCoercible$6,charAt$4=uncurryThis$9("".charAt),charCodeAt=uncurryThis$9("".charCodeAt),stringSlice$3=uncurryThis$9("".slice),createMethod$1=function(n){return function(e,t){var i,e=toString$4(requireObjectCoercible$2(e)),t=toIntegerOrInfinity$1(t),r=e.length;return t<0||r<=t?n?"":void 0:(i=charCodeAt(e,t))<55296||56319<i||t+1===r||(r=charCodeAt(e,t+1))<56320||57343<r?n?charAt$4(e,t):i:n?stringSlice$3(e,t,t+2):r-56320+(i-55296<<10)+65536}},stringMultibyte={codeAt:createMethod$1(!1),charAt:createMethod$1(!0)},charAt$3=stringMultibyte.charAt,toString$3=toString$7,InternalStateModule$1=internalState,defineIterator=defineIterator$2,STRING_ITERATOR="String Iterator",setInternalState$1=InternalStateModule$1.set,getInternalState$1=InternalStateModule$1.getterFor(STRING_ITERATOR),defineBuiltIn$2=(defineIterator(String,"String",function(e){setInternalState$1(this,{type:STRING_ITERATOR,string:toString$3(e),index:0})},function(){var e=getInternalState$1(this),t=e.string,i=e.index;return i>=t.length?{value:void 0,done:!0}:(t=charAt$3(t,i),e.index+=t.length,{value:t,done:!1})}),defineBuiltIn$7),defineBuiltIns$2=function(e,t,i){for(var r in t)defineBuiltIn$2(e,r,t[r],i);return e},internalMetadata={exports:{}},objectGetOwnPropertyNamesExternal={},toPropertyKey=toPropertyKey$3,definePropertyModule=objectDefineProperty,createPropertyDescriptor=createPropertyDescriptor$4,createProperty$1=function(e,t,i){t=toPropertyKey(t);t in e?definePropertyModule.f(e,t,createPropertyDescriptor(0,i)):e[t]=i},toAbsoluteIndex=toAbsoluteIndex$2,lengthOfArrayLike$2=lengthOfArrayLike$5,createProperty=createProperty$1,$Array=Array,max$1=Math.max,arraySliceSimple=function(e,t,i){for(var r=lengthOfArrayLike$2(e),n=toAbsoluteIndex(t,r),o=toAbsoluteIndex(void 0===i?r:i,r),a=$Array(max$1(o-n,0)),s=0;n<o;n++,s++)createProperty(a,s,e[n]);return a.length=s,a},classof$4=classofRaw$1,toIndexedObject=toIndexedObject$6,$getOwnPropertyNames=objectGetOwnPropertyNames.f,arraySlice=arraySliceSimple,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return $getOwnPropertyNames(e)}catch(e){return arraySlice(windowNames)}},fails$8=(objectGetOwnPropertyNamesExternal.f=function(e){return windowNames&&"Window"==classof$4(e)?getWindowNames(e):$getOwnPropertyNames(toIndexedObject(e))},fails$o),arrayBufferNonExtensible=fails$8(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))}),fails$7=fails$o,isObject$8=isObject$f,classof$3=classofRaw$1,ARRAY_BUFFER_NON_EXTENSIBLE=arrayBufferNonExtensible,$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES=fails$7(function(){$isExtensible(1)}),objectIsExtensible=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?function(e){return!!isObject$8(e)&&((!ARRAY_BUFFER_NON_EXTENSIBLE||"ArrayBuffer"!=classof$3(e))&&(!$isExtensible||$isExtensible(e)))}:$isExtensible,fails$6=fails$o,freezing=!fails$6(function(){return Object.isExtensible(Object.preventExtensions({}))}),$$4=_export,uncurryThis$8=functionUncurryThis,hiddenKeys=hiddenKeys$5,isObject$7=isObject$f,hasOwn$1=hasOwnProperty_1,defineProperty$1=objectDefineProperty.f,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternalModule=objectGetOwnPropertyNamesExternal,isExtensible$1=objectIsExtensible,uid=uid$3,FREEZING=freezing,REQUIRED=!1,METADATA=uid("meta"),id$1=0,setMetadata=function(e){defineProperty$1(e,METADATA,{value:{objectID:"O"+id$1++,weakData:{}}})},fastKey=function(e,t){if(!isObject$7(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!hasOwn$1(e,METADATA)){if(!isExtensible$1(e))return"F";if(!t)return"E";setMetadata(e)}return e[METADATA].objectID},getWeakData$1=function(e,t){if(!hasOwn$1(e,METADATA)){if(!isExtensible$1(e))return!0;if(!t)return!1;setMetadata(e)}return e[METADATA].weakData},onFreeze=function(e){return FREEZING&&REQUIRED&&isExtensible$1(e)&&!hasOwn$1(e,METADATA)&&setMetadata(e),e},enable=function(){meta.enable=function(){},REQUIRED=!0;var n=getOwnPropertyNamesModule.f,o=uncurryThis$8([].splice),e={};e[METADATA]=1,n(e).length&&(getOwnPropertyNamesModule.f=function(e){for(var t=n(e),i=0,r=t.length;i<r;i++)if(t[i]===METADATA){o(t,i,1);break}return t},$$4({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},meta=internalMetadata.exports={enable:enable,fastKey:fastKey,getWeakData:getWeakData$1,onFreeze:onFreeze},wellKnownSymbol$5=(hiddenKeys[METADATA]=!0,wellKnownSymbol$f),Iterators$1=iterators,ITERATOR$3=wellKnownSymbol$5("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$1=function(e){return void 0!==e&&(Iterators$1.Array===e||ArrayPrototype[ITERATOR$3]===e)},classof$2=classof$a,getMethod$3=getMethod$5,Iterators=iterators,wellKnownSymbol$4=wellKnownSymbol$f,ITERATOR$2=wellKnownSymbol$4("iterator"),getIteratorMethod$2=function(e){if(null!=e)return getMethod$3(e,ITERATOR$2)||getMethod$3(e,"@@iterator")||Iterators[classof$2(e)]},call$7=functionCall,aCallable$1=aCallable$4,anObject$7=anObject$d,tryToString$1=tryToString$3,getIteratorMethod$1=getIteratorMethod$2,$TypeError$4=TypeError,getIterator$1=function(e,t){var i=arguments.length<2?getIteratorMethod$1(e):t;if(aCallable$1(i))return anObject$7(call$7(i,e));throw $TypeError$4(tryToString$1(e)+" is not iterable")},call$6=functionCall,anObject$6=anObject$d,getMethod$2=getMethod$5,iteratorClose$1=function(e,t,i){var r,n;anObject$6(e);try{if(!(r=getMethod$2(e,"return"))){if("throw"===t)throw i;return i}r=call$6(r,e)}catch(e){n=!0,r=e}if("throw"===t)throw i;if(n)throw r;return anObject$6(r),i},bind=functionBindContext,call$5=functionCall,anObject$5=anObject$d,tryToString=tryToString$3,isArrayIteratorMethod=isArrayIteratorMethod$1,lengthOfArrayLike$1=lengthOfArrayLike$5,isPrototypeOf$1=objectIsPrototypeOf,getIterator=getIterator$1,getIteratorMethod=getIteratorMethod$2,iteratorClose=iteratorClose$1,$TypeError$3=TypeError,Result=function(e,t){this.stopped=e,this.result=t},ResultPrototype=Result.prototype,iterate$2=function(e,t,i){function r(e){return o&&iteratorClose(o,"normal",e),new Result(!0,e)}function n(e){return p?(anObject$5(e),f?m(e[0],e[1],r):m(e[0],e[1])):f?m(e,r):m(e)}var o,a,s,c,l,d,u=i&&i.that,p=!(!i||!i.AS_ENTRIES),h=!(!i||!i.IS_ITERATOR),f=!(!i||!i.INTERRUPTED),m=bind(t,u);if(h)o=e;else{if(!(i=getIteratorMethod(e)))throw $TypeError$3(tryToString(e)+" is not iterable");if(isArrayIteratorMethod(i)){for(a=0,s=lengthOfArrayLike$1(e);a<s;a++)if((c=n(e[a]))&&isPrototypeOf$1(ResultPrototype,c))return c;return new Result(!1)}o=getIterator(e,i)}for(l=o.next;!(d=call$5(l,o)).done;){try{c=n(d.value)}catch(e){iteratorClose(o,"throw",e)}if("object"==typeof c&&c&&isPrototypeOf$1(ResultPrototype,c))return c}return new Result(!1)},isPrototypeOf=objectIsPrototypeOf,$TypeError$2=TypeError,anInstance$2=function(e,t){if(isPrototypeOf(t,e))return e;throw $TypeError$2("Incorrect invocation")},wellKnownSymbol$3=wellKnownSymbol$f,ITERATOR$1=wellKnownSymbol$3("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$1]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch(error){}var checkCorrectnessOfIteration$1=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var i=!1;try{var r={};r[ITERATOR$1]=function(){return{next:function(){return{done:i=!0}}}},e(r)}catch(e){}return i},isCallable$3=isCallable$k,isObject$6=isObject$f,setPrototypeOf=objectSetPrototypeOf,inheritIfRequired$1=function(e,t,i){return setPrototypeOf&&isCallable$3(t=t.constructor)&&t!==i&&isObject$6(t=t.prototype)&&t!==i.prototype&&setPrototypeOf(e,t),e},$$3=_export,global$8=global$k,uncurryThis$7=functionUncurryThis,isForced=isForced_1,defineBuiltIn$1=defineBuiltIn$7,InternalMetadataModule$1=internalMetadata.exports,iterate$1=iterate$2,anInstance$1=anInstance$2,isCallable$2=isCallable$k,isObject$5=isObject$f,fails$5=fails$o,checkCorrectnessOfIteration=checkCorrectnessOfIteration$1,setToStringTag=setToStringTag$3,inheritIfRequired=inheritIfRequired$1,collection$1=function(e,t,i){function r(e){var i=uncurryThis$7(h[e]);defineBuiltIn$1(h,e,"add"==e?function(e){return i(this,0===e?0:e),this}:"delete"==e?function(e){return!(d&&!isObject$5(e))&&i(this,0===e?0:e)}:"get"==e?function(e){return d&&!isObject$5(e)?void 0:i(this,0===e?0:e)}:"has"==e?function(e){return!(d&&!isObject$5(e))&&i(this,0===e?0:e)}:function(e,t){return i(this,0===e?0:e,t),this})}var n,o,a,s,c,l=-1!==e.indexOf("Map"),d=-1!==e.indexOf("Weak"),u=l?"set":"add",p=global$8[e],h=p&&p.prototype,f=p,m={};return isForced(e,!isCallable$2(p)||!(d||h.forEach&&!fails$5(function(){(new p).entries().next()})))?(f=i.getConstructor(t,e,l,u),InternalMetadataModule$1.enable()):isForced(e,!0)&&(o=(n=new f)[u](d?{}:-0,1)!=n,a=fails$5(function(){n.has(1)}),s=checkCorrectnessOfIteration(function(e){new p(e)}),c=!d&&fails$5(function(){for(var e=new p,t=5;t--;)e[u](t,t);return!e.has(-0)}),s||(((f=t(function(e,t){anInstance$1(e,h);e=inheritIfRequired(new p,e,f);return null!=t&&iterate$1(t,e[u],{that:e,AS_ENTRIES:l}),e})).prototype=h).constructor=f),(a||c)&&(r("delete"),r("has"),l&&r("get")),(c||o)&&r(u),d&&h.clear&&delete h.clear),m[e]=f,$$3({global:!0,constructor:!0,forced:f!=p},m),setToStringTag(f,e),d||i.setStrong(f,e,l),f},uncurryThis$6=functionUncurryThis,defineBuiltIns$1=defineBuiltIns$2,getWeakData=internalMetadata.exports.getWeakData,anObject$4=anObject$d,isObject$4=isObject$f,anInstance=anInstance$2,iterate=iterate$2,ArrayIterationModule=arrayIteration,hasOwn=hasOwnProperty_1,InternalStateModule=internalState,setInternalState=InternalStateModule.set,internalStateGetterFor=InternalStateModule.getterFor,find=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,splice$1=uncurryThis$6([].splice),id=0,uncaughtFrozenStore=function(e){return e.frozen||(e.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(e,t){return find(e.entries,function(e){return e[0]===t})},collectionWeak$1=(UncaughtFrozenStore.prototype={get:function(e){e=findUncaughtFrozen(this,e);if(e)return e[1]},has:function(e){return!!findUncaughtFrozen(this,e)},set:function(e,t){var i=findUncaughtFrozen(this,e);i?i[1]=t:this.entries.push([e,t])},delete:function(t){var e=findIndex(this.entries,function(e){return e[0]===t});return~e&&splice$1(this.entries,e,1),!!~e}},{getConstructor:function(e,i,r,n){function o(e,t,i){var r=s(e),n=getWeakData(anObject$4(t),!0);return!0===n?uncaughtFrozenStore(r).set(t,i):n[r.id]=i,e}var e=e(function(e,t){anInstance(e,a),setInternalState(e,{type:i,id:id++,frozen:void 0}),null!=t&&iterate(t,e[n],{that:e,AS_ENTRIES:r})}),a=e.prototype,s=internalStateGetterFor(i);return defineBuiltIns$1(a,{delete:function(e){var t=s(this);if(!isObject$4(e))return!1;var i=getWeakData(e);return!0===i?uncaughtFrozenStore(t).delete(e):i&&hasOwn(i,t.id)&&delete i[t.id]},has:function(e){var t=s(this);if(!isObject$4(e))return!1;var i=getWeakData(e);return!0===i?uncaughtFrozenStore(t).has(e):i&&hasOwn(i,t.id)}}),defineBuiltIns$1(a,r?{get:function(e){var t,i=s(this);if(isObject$4(e))return!0===(t=getWeakData(e))?uncaughtFrozenStore(i).get(e):t?t[i.id]:void 0},set:function(e,t){return o(this,e,t)}}:{add:function(e){return o(this,e,!0)}}),e}}),global$7=global$k,uncurryThis$5=functionUncurryThis,defineBuiltIns=defineBuiltIns$2,InternalMetadataModule=internalMetadata.exports,collection=collection$1,collectionWeak=collectionWeak$1,isObject$3=isObject$f,isExtensible=objectIsExtensible,enforceInternalState=internalState.enforce,NATIVE_WEAK_MAP=nativeWeakMap,IS_IE11=!global$7.ActiveXObject&&"ActiveXObject"in global$7,InternalWeakMap,wrapper=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},$WeakMap=collection("WeakMap",wrapper,collectionWeak),WeakMapPrototype,nativeDelete,nativeHas,nativeGet,nativeSet,global$6=(NATIVE_WEAK_MAP&&IS_IE11&&(InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.enable(),WeakMapPrototype=$WeakMap.prototype,nativeDelete=uncurryThis$5(WeakMapPrototype.delete),nativeHas=uncurryThis$5(WeakMapPrototype.has),nativeGet=uncurryThis$5(WeakMapPrototype.get),nativeSet=uncurryThis$5(WeakMapPrototype.set),defineBuiltIns(WeakMapPrototype,{delete:function(e){var t;return isObject$3(e)&&!isExtensible(e)?((t=enforceInternalState(this)).frozen||(t.frozen=new InternalWeakMap),nativeDelete(this,e)||t.frozen.delete(e)):nativeDelete(this,e)},has:function(e){var t;return isObject$3(e)&&!isExtensible(e)?((t=enforceInternalState(this)).frozen||(t.frozen=new InternalWeakMap),nativeHas(this,e)||t.frozen.has(e)):nativeHas(this,e)},get:function(e){var t;return isObject$3(e)&&!isExtensible(e)?((t=enforceInternalState(this)).frozen||(t.frozen=new InternalWeakMap),nativeHas(this,e)?nativeGet(this,e):t.frozen.get(e)):nativeGet(this,e)},set:function(e,t){var i;return isObject$3(e)&&!isExtensible(e)?((i=enforceInternalState(this)).frozen||(i.frozen=new InternalWeakMap),nativeHas(this,e)?nativeSet(this,e,t):i.frozen.set(e,t)):nativeSet(this,e,t),this}})),global$k),DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty$1=createNonEnumerableProperty$6,wellKnownSymbol$2=wellKnownSymbol$f,ITERATOR=wellKnownSymbol$2("iterator"),TO_STRING_TAG=wellKnownSymbol$2("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(t,e){if(t){if(t[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty$1(t,ITERATOR,ArrayValues)}catch(e){t[ITERATOR]=ArrayValues}if(t[TO_STRING_TAG]||createNonEnumerableProperty$1(t,TO_STRING_TAG,e),DOMIterables[e])for(var i in ArrayIteratorMethods)if(t[i]!==ArrayIteratorMethods[i])try{createNonEnumerableProperty$1(t,i,ArrayIteratorMethods[i])}catch(e){t[i]=ArrayIteratorMethods[i]}}},COLLECTION_NAME;for(COLLECTION_NAME in DOMIterables)handlePrototype(global$6[COLLECTION_NAME]&&global$6[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var FUNC_ERROR_TEXT$2="Expected a function",NAN$1=NaN,symbolTag$1="[object Symbol]",reTrim$1=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt,freeGlobal$2="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$2="object"==typeof self&&self&&self.Object===Object&&self,root$2=freeGlobal$2||freeSelf$2||Function("return this")(),objectProto$2=Object.prototype,objectToString$2=objectProto$2.toString,nativeMax$1=Math.max,nativeMin$1=Math.min,now$1=function(){return root$2.Date.now()};function debounce$1(r,i,e){var n,o,a,s,c,l,d=0,u=!1,p=!1,t=!0;if("function"!=typeof r)throw new TypeError(FUNC_ERROR_TEXT$2);function h(e){var t=n,i=o;return n=o=void 0,d=e,s=r.apply(i,t)}function f(e){var t=e-l;return void 0===l||i<=t||t<0||p&&a<=e-d}function m(){var e,t=now$1();if(f(t))return g(t);c=setTimeout(m,(e=i-((t=t)-l),p?nativeMin$1(e,a-(t-d)):e))}function g(e){return c=void 0,t&&n?h(e):(n=o=void 0,s)}function b(){var e=now$1(),t=f(e);if(n=arguments,o=this,l=e,t){if(void 0===c)return d=e=l,c=setTimeout(m,i),u?h(e):s;if(p)return c=setTimeout(m,i),h(l)}return void 0===c&&(c=setTimeout(m,i)),s}return i=toNumber$1(i)||0,isObject$2(e)&&(u=!!e.leading,p="maxWait"in e,a=p?nativeMax$1(toNumber$1(e.maxWait)||0,i):a,t="trailing"in e?!!e.trailing:t),b.cancel=function(){void 0!==c&&clearTimeout(c),n=l=o=c=void(d=0)},b.flush=function(){return void 0===c?s:g(now$1())},b}function throttle(e,t,i){var r=!0,n=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$2);return isObject$2(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),debounce$1(e,t,{leading:r,maxWait:t,trailing:n})}function isObject$2(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike$1(e){return!!e&&"object"==typeof e}function isSymbol$1(e){return"symbol"==typeof e||isObjectLike$1(e)&&objectToString$2.call(e)==symbolTag$1}function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol$1(e))return NAN$1;if("string"!=typeof(e=isObject$2(e)?isObject$2(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(reTrim$1,"");var t=reIsBinary$1.test(e);return t||reIsOctal$1.test(e)?freeParseInt$1(e.slice(2),t?2:8):reIsBadHex$1.test(e)?NAN$1:+e}var lodash_throttle=throttle,FUNC_ERROR_TEXT$1="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal$1="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$1="object"==typeof self&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf$1||Function("return this")(),objectProto$1=Object.prototype,objectToString$1=objectProto$1.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root$1.Date.now()};function debounce(r,i,e){var n,o,a,s,c,l,d=0,u=!1,p=!1,t=!0;if("function"!=typeof r)throw new TypeError(FUNC_ERROR_TEXT$1);function h(e){var t=n,i=o;return n=o=void 0,d=e,s=r.apply(i,t)}function f(e){var t=e-l;return void 0===l||i<=t||t<0||p&&a<=e-d}function m(){var e,t=now();if(f(t))return g(t);c=setTimeout(m,(e=i-((t=t)-l),p?nativeMin(e,a-(t-d)):e))}function g(e){return c=void 0,t&&n?h(e):(n=o=void 0,s)}function b(){var e=now(),t=f(e);if(n=arguments,o=this,l=e,t){if(void 0===c)return d=e=l,c=setTimeout(m,i),u?h(e):s;if(p)return c=setTimeout(m,i),h(l)}return void 0===c&&(c=setTimeout(m,i)),s}return i=toNumber(i)||0,isObject$1(e)&&(u=!!e.leading,p="maxWait"in e,a=p?nativeMax(toNumber(e.maxWait)||0,i):a,t="trailing"in e?!!e.trailing:t),b.cancel=function(){void 0!==c&&clearTimeout(c),n=l=o=c=void(d=0)},b.flush=function(){return void 0===c?s:g(now())},b}function isObject$1(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString$1.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if("string"!=typeof(e=isObject$1(e)?isObject$1(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(reTrim,"");var t=reIsBinary.test(e);return t||reIsOctal.test(e)?freeParseInt(e.slice(2),t?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce,FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",funcTag="[object Function]",genTag="[object GeneratorFunction]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),splice=arrayProto.splice,Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create");function Hash(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t,i=this.__data__;return nativeCreate?(t=i[e])===HASH_UNDEFINED?void 0:t:hasOwnProperty.call(i,e)?i[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){return this.__data__[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,e=assocIndexOf(t,e);return!(e<0)&&(e==t.length-1?t.pop():splice.call(t,e,1),!0)}function listCacheGet(e){var t=this.__data__,e=assocIndexOf(t,e);return e<0?void 0:t[e][1]}function listCacheHas(e){return-1<assocIndexOf(this.__data__,e)}function listCacheSet(e,t){var i=this.__data__,r=assocIndexOf(i,e);return r<0?i.push([e,t]):i[r][1]=t,this}function MapCache(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function assocIndexOf(e,t){for(var i=e.length;i--;)if(eq(e[i][0],t))return i;return-1}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor).test(toSource(e))}function getMapData(e,t){e=e.__data__;return isKeyable(t)?e["string"==typeof t?"string":"hash"]:e.map}function getNative(e,t){e=getValue(e,t);return baseIsNative(e)?e:void 0}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function memoize(r,n){if("function"!=typeof r||n&&"function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);function o(){var e=arguments,t=n?n.apply(this,e):e[0],i=o.cache;return i.has(t)?i.get(t):(e=r.apply(this,e),o.cache=i.set(t,e),e)}return o.cache=new(memoize.Cache||MapCache),o}function eq(e,t){return e===t||e!=e&&t!=t}function isFunction(e){e=isObject(e)?objectToString.call(e):"";return e==funcTag||e==genTag}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,memoize.Cache=MapCache;var lodash_memoize=memoize,resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(e){return 0<e.activeTargets.length})},hasSkippedObservations=function(){return resizeObservers.some(function(e){return 0<e.skippedTargets.length})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var e;"function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:msg}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=msg),window.dispatchEvent(e)},ResizeObserverBoxOptions,freeze=(!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(ResizeObserverBoxOptions=ResizeObserverBoxOptions||{}),function(e){return Object.freeze(e)}),ResizeObserverSize=function(e,t){this.inlineSize=e,this.blockSize=t,freeze(this)},DOMRectReadOnly=function(){function t(e,t,i,r){return this.x=e,this.y=t,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze(this)}return t.prototype.toJSON=function(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),isSVG=function(e){return e instanceof SVGElement&&"getBBox"in e},isHidden=function(e){if(isSVG(e))return t=(i=e.getBBox()).width,i=i.height,!t&&!i;var t=e.offsetWidth,i=e.offsetHeight;return!(t||i||e.getClientRects().length)},isElement=function(e){if(e instanceof Element)return!0;var t=null==(t=null==(t=e)?void 0:t.ownerDocument)?void 0:t.defaultView;return!!(t&&e instanceof t.Element)},isReplacedElement=function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global$5="undefined"!=typeof window?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global$5.navigator&&global$5.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),new ResizeObserverSize(((i=void 0===i?!1:i)?t:e)||0,(i?e:t)||0)},zeroBoxes=freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(e,t){if(void 0===t&&(t=!1),cache.has(e)&&!t)return cache.get(e);if(isHidden(e))return cache.set(e,zeroBoxes),zeroBoxes;var t=getComputedStyle(e),i=isSVG(e)&&e.ownerSVGElement&&e.getBBox(),r=!IE&&"border-box"===t.boxSizing,n=verticalRegexp.test(t.writingMode||""),o=!i&&scrollRegexp.test(t.overflowY||""),a=!i&&scrollRegexp.test(t.overflowX||""),s=i?0:parseDimension(t.paddingTop),c=i?0:parseDimension(t.paddingRight),l=i?0:parseDimension(t.paddingBottom),d=i?0:parseDimension(t.paddingLeft),u=i?0:parseDimension(t.borderTopWidth),p=i?0:parseDimension(t.borderRightWidth),h=i?0:parseDimension(t.borderBottomWidth),c=d+c,l=s+l,p=(i?0:parseDimension(t.borderLeftWidth))+p,u=u+h,h=a?e.offsetHeight-u-e.clientHeight:0,a=o?e.offsetWidth-p-e.clientWidth:0,o=r?c+p:0,r=r?l+u:0,o=i?i.width:parseDimension(t.width)-o-a,i=i?i.height:parseDimension(t.height)-r-h,t=o+c+a+p,r=i+l+h+u,c=freeze({devicePixelContentBoxSize:size(Math.round(o*devicePixelRatio),Math.round(i*devicePixelRatio),n),borderBoxSize:size(t,r,n),contentBoxSize:size(o,i,n),contentRect:new DOMRectReadOnly(d,s,o,i)});return cache.set(e,c),c},calculateBoxSize=function(e,t,i){var e=calculateBoxSizes(e,i),r=e.borderBoxSize,n=e.contentBoxSize,o=e.devicePixelContentBoxSize;switch(t){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return o;case ResizeObserverBoxOptions.BORDER_BOX:return r;default:return n}},ResizeObserverEntry=function(e){var t=calculateBoxSizes(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=freeze([t.borderBoxSize]),this.contentBoxSize=freeze([t.contentBoxSize]),this.devicePixelContentBoxSize=freeze([t.devicePixelContentBoxSize])},calculateDepthForNode=function(e){if(isHidden(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t},broadcastActiveObservations=function(){var n=1/0,t=[];resizeObservers.forEach(function(e){var r;0!==e.activeTargets.length&&(r=[],e.activeTargets.forEach(function(e){var t=new ResizeObserverEntry(e.target),i=calculateDepthForNode(e.target);r.push(t),e.lastReportedSize=calculateBoxSize(e.target,e.observedBox),i<n&&(n=i)}),t.push(function(){e.callback.call(e.observer,r,e.observer)}),e.activeTargets.splice(0,e.activeTargets.length))});for(var e=0,i=t;e<i.length;e++)(0,i[e])();return n},gatherActiveObservationsAtDepth=function(i){resizeObservers.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(e){e.isActive()&&(calculateDepthForNode(e.target)>i?t.activeTargets:t.skippedTargets).push(e)})})},process=function(){var e=0;for(gatherActiveObservationsAtDepth(e);hasActiveObservations();)e=broadcastActiveObservations(),gatherActiveObservationsAtDepth(e);return hasSkippedObservations()&&deliverResizeLoopError(),0<e},trigger,callbacks=[],notify$1=function(){return callbacks.splice(0).forEach(function(e){return e()})},queueMicroTask=function(e){var t,i;trigger||(t=0,i=document.createTextNode(""),new MutationObserver(function(){return notify$1()}).observe(i,{characterData:!0}),trigger=function(){i.textContent=""+(t?t--:t++)}),callbacks.push(e),trigger()},queueResizeObserver=function(e){queueMicroTask(function(){requestAnimationFrame(e)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(e){return void 0===e&&(e=0),Date.now()+e},scheduled=!1,Scheduler=function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(t){var i,r=this;void 0===t&&(t=CATCH_PERIOD),scheduled||(scheduled=!0,i=time(t),queueResizeObserver(function(){var e=!1;try{e=process()}finally{if(scheduled=!1,t=i-time(),!isWatching())return;e?r.run(1e3):0<t?r.run(t):r.start()}}))},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){function e(){return t.observer&&t.observer.observe(document.body,observerConfig)}var t=this;document.body?e():global$5.addEventListener("DOMContentLoaded",e)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(e){return global$5.addEventListener(e,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(e){return global$5.removeEventListener(e,t.listener,!0)}),this.stopped=!0)},e}(),scheduler=new Scheduler,updateCount=function(e){!watching&&0<e&&scheduler.start(),(watching+=e)||scheduler.stop()},skipNotifyOnElement=function(e){return!isSVG(e)&&!isReplacedElement(e)&&"inline"===getComputedStyle(e).display},ResizeObservation=function(){function e(e,t){this.target=e,this.observedBox=t||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},e}(),ResizeObserverDetail=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},observerMap=new WeakMap,getObservationIndex=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1},ResizeObserverController=function(){function e(){}return e.connect=function(e,t){t=new ResizeObserverDetail(e,t);observerMap.set(e,t)},e.observe=function(e,t,i){var e=observerMap.get(e),r=0===e.observationTargets.length;getObservationIndex(e.observationTargets,t)<0&&(r&&resizeObservers.push(e),e.observationTargets.push(new ResizeObservation(t,i&&i.box)),updateCount(1),scheduler.schedule())},e.unobserve=function(e,t){var e=observerMap.get(e),t=getObservationIndex(e.observationTargets,t),i=1===e.observationTargets.length;0<=t&&(i&&resizeObservers.splice(resizeObservers.indexOf(e),1),e.observationTargets.splice(t,1),updateCount(-1))},e.disconnect=function(t){var i=this,e=observerMap.get(t);e.observationTargets.slice().forEach(function(e){return i.unobserve(t,e.target)}),e.activeTargets.splice(0,e.activeTargets.length)},e}(),ResizeObserver$1=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,e)},e.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),aCallable=aCallable$4,toObject$1=toObject$6,IndexedObject=indexedObject,lengthOfArrayLike=lengthOfArrayLike$5,$TypeError$1=TypeError,createMethod=function(l){return function(e,t,i,r){aCallable(t);var n=toObject$1(e),o=IndexedObject(n),a=lengthOfArrayLike(n),s=l?a-1:0,c=l?-1:1;if(i<2)for(;;){if(s in o){r=o[s],s+=c;break}if(s+=c,l?s<0:a<=s)throw $TypeError$1("Reduce of empty array with no initial value")}for(;l?0<=s:s<a;s+=c)s in o&&(r=t(r,o[s],s,n));return r}},arrayReduce={left:createMethod(!1),right:createMethod(!0)},classof$1=classofRaw$1,global$4=global$k,engineIsNode="process"==classof$1(global$4.process),$$2=_export,$reduce=arrayReduce.left,arrayMethodIsStrict=arrayMethodIsStrict$2,CHROME_VERSION=engineV8Version,IS_NODE=engineIsNode,STRICT_METHOD=arrayMethodIsStrict("reduce"),CHROME_BUG=!IS_NODE&&79<CHROME_VERSION&&CHROME_VERSION<83,anObject$3=($$2({target:"Array",proto:!0,forced:!STRICT_METHOD||CHROME_BUG},{reduce:function(e){var t=arguments.length;return $reduce(this,e,t,1<t?arguments[1]:void 0)}}),anObject$d),regexpFlags$1=function(){var e=anObject$3(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},fails$4=fails$o,global$3=global$k,$RegExp$2=global$3.RegExp,UNSUPPORTED_Y$1=fails$4(function(){var e=$RegExp$2("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),MISSED_STICKY=UNSUPPORTED_Y$1||fails$4(function(){return!$RegExp$2("a","y").sticky}),BROKEN_CARET=UNSUPPORTED_Y$1||fails$4(function(){var e=$RegExp$2("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),regexpStickyHelpers={BROKEN_CARET:BROKEN_CARET,MISSED_STICKY:MISSED_STICKY,UNSUPPORTED_Y:UNSUPPORTED_Y$1},fails$3=fails$o,global$2=global$k,$RegExp$1=global$2.RegExp,regexpUnsupportedDotAll=fails$3(function(){var e=$RegExp$1(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),fails$2=fails$o,global$1=global$k,$RegExp=global$1.RegExp,regexpUnsupportedNcg=fails$2(function(){var e=$RegExp("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),call$4=functionCall,uncurryThis$4=functionUncurryThis,toString$2=toString$7,regexpFlags=regexpFlags$1,stickyHelpers=regexpStickyHelpers,shared=shared$4.exports,create=objectCreate,getInternalState=internalState.get,UNSUPPORTED_DOT_ALL=regexpUnsupportedDotAll,UNSUPPORTED_NCG=regexpUnsupportedNcg,nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt$2=uncurryThis$4("".charAt),indexOf=uncurryThis$4("".indexOf),replace$1=uncurryThis$4("".replace),stringSlice$2=uncurryThis$4("".slice),UPDATES_LAST_INDEX_WRONG=function(){var e=/a/,t=/b*/g;return call$4(nativeExec,e,"a"),call$4(nativeExec,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),UNSUPPORTED_Y=stickyHelpers.BROKEN_CARET,NPCG_INCLUDED=void 0!==/()??/.exec("")[1],PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG,regexpExec$2=(PATCH&&(patchedExec=function(e){var t,i,r,n,o,a,s=this,c=getInternalState(s),e=toString$2(e),l=c.raw;if(l)return l.lastIndex=s.lastIndex,u=call$4(patchedExec,l,e),s.lastIndex=l.lastIndex,u;var d=c.groups,l=UNSUPPORTED_Y&&s.sticky,u=call$4(regexpFlags,s),c=s.source,p=0,h=e;if(l&&(u=replace$1(u,"y",""),-1===indexOf(u,"g")&&(u+="g"),h=stringSlice$2(e,s.lastIndex),0<s.lastIndex&&(!s.multiline||s.multiline&&"\n"!==charAt$2(e,s.lastIndex-1))&&(c="(?: "+c+")",h=" "+h,p++),t=new RegExp("^(?:"+c+")",u)),NPCG_INCLUDED&&(t=new RegExp("^"+c+"$(?!\\s)",u)),UPDATES_LAST_INDEX_WRONG&&(i=s.lastIndex),r=call$4(nativeExec,l?t:s,h),l?r?(r.input=stringSlice$2(r.input,p),r[0]=stringSlice$2(r[0],p),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&r&&(s.lastIndex=s.global?r.index+r[0].length:i),NPCG_INCLUDED&&r&&1<r.length&&call$4(nativeReplace,r[0],t,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)}),r&&d)for(r.groups=o=create(null),n=0;n<d.length;n++)o[(a=d[n])[0]]=r[a[1]];return r}),patchedExec),$$1=_export,exec=regexpExec$2,uncurryThis$3=($$1({target:"RegExp",proto:!0,forced:/./.exec!==exec},{exec:exec}),functionUncurryThis),defineBuiltIn=defineBuiltIn$7,regexpExec$1=regexpExec$2,fails$1=fails$o,wellKnownSymbol$1=wellKnownSymbol$f,createNonEnumerableProperty=createNonEnumerableProperty$6,SPECIES=wellKnownSymbol$1("species"),RegExpPrototype=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(i,e,t,r){var a,n=wellKnownSymbol$1(i),s=!fails$1(function(){var e={};return e[n]=function(){return 7},7!=""[i](e)}),o=s&&!fails$1(function(){var e=!1,t=/a/;return"split"===i&&((t={constructor:{}}).constructor[SPECIES]=function(){return t},t.flags="",t[n]=/./[n]),t.exec=function(){return e=!0,null},t[n](""),!e});s&&o&&!t||(a=uncurryThis$3(/./[n]),o=e(n,""[i],function(e,t,i,r,n){var e=uncurryThis$3(e),o=t.exec;return o===regexpExec$1||o===RegExpPrototype.exec?s&&!n?{done:!0,value:a(t,i,r)}:{done:!0,value:e(i,t,r)}:{done:!1}}),defineBuiltIn(String.prototype,i,o[0]),defineBuiltIn(RegExpPrototype,n,o[1])),r&&createNonEnumerableProperty(RegExpPrototype[n],"sham",!0)},charAt$1=stringMultibyte.charAt,advanceStringIndex$2=function(e,t,i){return t+(i?charAt$1(e,t).length:1)},call$3=functionCall,anObject$2=anObject$d,isCallable$1=isCallable$k,classof=classofRaw$1,regexpExec=regexpExec$2,$TypeError=TypeError,regexpExecAbstract=function(e,t){var i=e.exec;if(isCallable$1(i))return null!==(i=call$3(i,e,t))&&anObject$2(i),i;if("RegExp"===classof(e))return call$3(regexpExec,e,t);throw $TypeError("RegExp#exec called on incompatible receiver")},call$2=functionCall,fixRegExpWellKnownSymbolLogic$1=fixRegexpWellKnownSymbolLogic,anObject$1=anObject$d,toLength$1=toLength$3,toString$1=toString$7,requireObjectCoercible$1=requireObjectCoercible$6,getMethod$1=getMethod$5,advanceStringIndex$1=advanceStringIndex$2,regExpExec$2=regexpExecAbstract,DESCRIPTORS=(fixRegExpWellKnownSymbolLogic$1("match",function(r,s,c){return[function(e){var t=requireObjectCoercible$1(this),i=null==e?void 0:getMethod$1(e,r);return i?call$2(i,e,t):new RegExp(e)[r](toString$1(t))},function(e){var t=anObject$1(this),i=toString$1(e),e=c(s,t,i);if(e.done)return e.value;if(!t.global)return regExpExec$2(t,i);for(var r=t.unicode,n=[],o=t.lastIndex=0;null!==(a=regExpExec$2(t,i));){var a=toString$1(a[0]);""===(n[o]=a)&&(t.lastIndex=advanceStringIndex$1(i,toLength$1(t.lastIndex),r)),o++}return 0===o?null:n}]}),descriptors),FUNCTION_NAME_EXISTS=functionName.EXISTS,uncurryThis$2=functionUncurryThis,defineProperty=objectDefineProperty.f,FunctionPrototype$1=Function.prototype,functionToString=uncurryThis$2(FunctionPrototype$1.toString),nameRE=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,regExpExec$1=uncurryThis$2(nameRE.exec),NAME="name",NATIVE_BIND=(DESCRIPTORS&&!FUNCTION_NAME_EXISTS&&defineProperty(FunctionPrototype$1,NAME,{configurable:!0,get:function(){try{return regExpExec$1(nameRE,functionToString(this))[1]}catch(e){return""}}}),functionBindNative),FunctionPrototype=Function.prototype,apply$1=FunctionPrototype.apply,call$1=FunctionPrototype.call,functionApply="object"==typeof Reflect&&Reflect.apply||(NATIVE_BIND?call$1.bind(apply$1):function(){return call$1.apply(apply$1,arguments)}),uncurryThis$1=functionUncurryThis,toObject=toObject$6,floor=Math.floor,charAt=uncurryThis$1("".charAt),replace=uncurryThis$1("".replace),stringSlice$1=uncurryThis$1("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$1=function(o,a,s,c,l,e){var d=s+o.length,u=c.length,t=SUBSTITUTION_SYMBOLS_NO_NAMED;return void 0!==l&&(l=toObject(l),t=SUBSTITUTION_SYMBOLS),replace(e,t,function(e,t){var i;switch(charAt(t,0)){case"$":return"$";case"&":return o;case"`":return stringSlice$1(a,0,s);case"'":return stringSlice$1(a,d);case"<":i=l[stringSlice$1(t,1,-1)];break;default:var r,n=+t;if(0==n)return e;if(u<n)return 0!==(r=floor(n/10))&&r<=u?void 0===c[r-1]?charAt(t,1):c[r-1]+charAt(t,1):e;i=c[n-1]}return void 0===i?"":i})},apply=functionApply,call=functionCall,uncurryThis=functionUncurryThis,fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,fails=fails$o,anObject=anObject$d,isCallable=isCallable$k,toIntegerOrInfinity=toIntegerOrInfinity$4,toLength=toLength$3,toString=toString$7,requireObjectCoercible=requireObjectCoercible$6,advanceStringIndex=advanceStringIndex$2,getMethod=getMethod$5,getSubstitution=getSubstitution$1,regExpExec=regexpExecAbstract,wellKnownSymbol=wellKnownSymbol$f,REPLACE=wellKnownSymbol("replace"),max=Math.max,min=Math.min,concat=uncurryThis([].concat),push=uncurryThis([].push),stringIndexOf=uncurryThis("".indexOf),stringSlice=uncurryThis("".slice),maybeToString=function(e){return void 0===e?e:String(e)},REPLACE_KEEPS_$0="$0"==="a".replace(/./,"$0"),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=!!/./[REPLACE]&&""===/./[REPLACE]("a","$0"),REPLACE_SUPPORTS_NAMED_GROUPS=!fails(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),getOptions=(fixRegExpWellKnownSymbolLogic("replace",function(e,v,y){var S=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(e,t){var i=requireObjectCoercible(this),r=null==e?void 0:getMethod(e,REPLACE);return r?call(r,e,i,t):call(v,toString(i),e,t)},function(e,t){var i=anObject(this),r=toString(e);if("string"==typeof t&&-1===stringIndexOf(t,S)&&-1===stringIndexOf(t,"$<")){e=y(v,i,r,t);if(e.done)return e.value}for(var n,o=isCallable(t),a=(o||(t=toString(t)),i.global),s=(a&&(n=i.unicode,i.lastIndex=0),[]);null!==(u=regExpExec(i,r))&&(push(s,u),a);)""===toString(u[0])&&(i.lastIndex=advanceStringIndex(r,toLength(i.lastIndex),n));for(var c="",l=0,d=0;d<s.length;d++){for(var u,p=toString((u=s[d])[0]),h=max(min(toIntegerOrInfinity(u.index),r.length),0),f=[],m=1;m<u.length;m++)push(f,maybeToString(u[m]));var g=u.groups,b=o?(b=concat([p],f,h,r),void 0!==g&&push(b,g),toString(apply(t,void 0,b))):getSubstitution(p,r,h,f,g,t);l<=h&&(c+=stringSlice(r,l,h)+b,l=h+p.length)}return c+stringSlice(r,l)}]},!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE),function(e){return Array.prototype.reduce.call(e,function(e,t){var i=t.name.match(/data-simplebar-(.+)/);if(i){var r=i[1].replace(/\W+(.)/g,function(e,t){return t.toUpperCase()});switch(t.value){case"true":e[r]=!0;break;case"false":e[r]=!1;break;case void 0:e[r]=!0;break;default:e[r]=t.value}}return e},{})});function getElementWindow(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function getElementDocument(e){return e&&e.ownerDocument?e.ownerDocument:document}var cachedScrollbarWidth=null,cachedDevicePixelRatio=null;function scrollbarWidth(e){if(null===cachedScrollbarWidth){e=getElementDocument(e);if(void 0===e)return cachedScrollbarWidth=0;var t=e.body,e=e.createElement("div"),i=(e.classList.add("simplebar-hide-scrollbar"),t.appendChild(e),e.getBoundingClientRect().right);t.removeChild(e),cachedScrollbarWidth=i}return cachedScrollbarWidth}canUseDom&&window.addEventListener("resize",function(){cachedDevicePixelRatio!==window.devicePixelRatio&&(cachedDevicePixelRatio=window.devicePixelRatio,cachedScrollbarWidth=null)});for(var SimpleBar=function(){function s(e,t){var a=this;this.onScroll=function(){var e=getElementWindow(a.el);a.scrollXTicking||(e.requestAnimationFrame(a.scrollX),a.scrollXTicking=!0),a.scrollYTicking||(e.requestAnimationFrame(a.scrollY),a.scrollYTicking=!0)},this.scrollX=function(){a.axis.x.isOverflowing&&(a.showScrollbar("x"),a.positionScrollbar("x")),a.scrollXTicking=!1},this.scrollY=function(){a.axis.y.isOverflowing&&(a.showScrollbar("y"),a.positionScrollbar("y")),a.scrollYTicking=!1},this.onMouseEnter=function(){a.showScrollbar("x"),a.showScrollbar("y")},this.onMouseMove=function(e){a.mouseX=e.clientX,a.mouseY=e.clientY,(a.axis.x.isOverflowing||a.axis.x.forceVisible)&&a.onMouseMoveForAxis("x"),(a.axis.y.isOverflowing||a.axis.y.forceVisible)&&a.onMouseMoveForAxis("y")},this.onMouseLeave=function(){a.onMouseMove.cancel(),(a.axis.x.isOverflowing||a.axis.x.forceVisible)&&a.onMouseLeaveForAxis("x"),(a.axis.y.isOverflowing||a.axis.y.forceVisible)&&a.onMouseLeaveForAxis("y"),a.mouseX=-1,a.mouseY=-1},this.onWindowResize=function(){a.scrollbarWidth=a.getScrollbarWidth(),a.hideNativeScrollbar()},this.hideScrollbars=function(){a.axis.x.track.rect=a.axis.x.track.el.getBoundingClientRect(),a.axis.y.track.rect=a.axis.y.track.el.getBoundingClientRect(),a.isWithinBounds(a.axis.y.track.rect)||(a.axis.y.scrollbar.el.classList.remove(a.classNames.visible),a.axis.y.isVisible=!1),a.isWithinBounds(a.axis.x.track.rect)||(a.axis.x.scrollbar.el.classList.remove(a.classNames.visible),a.axis.x.isVisible=!1)},this.onPointerEvent=function(e){var t,i;a.axis.x.track.rect=a.axis.x.track.el.getBoundingClientRect(),a.axis.y.track.rect=a.axis.y.track.el.getBoundingClientRect(),(a.axis.x.isOverflowing||a.axis.x.forceVisible)&&(t=a.isWithinBounds(a.axis.x.track.rect)),(a.axis.y.isOverflowing||a.axis.y.forceVisible)&&(i=a.isWithinBounds(a.axis.y.track.rect)),(t||i)&&(e.preventDefault(),e.stopPropagation(),"mousedown"===e.type&&(t&&(a.axis.x.scrollbar.rect=a.axis.x.scrollbar.el.getBoundingClientRect(),a.isWithinBounds(a.axis.x.scrollbar.rect)?a.onDragStart(e,"x"):a.onTrackClick(e,"x")),i&&(a.axis.y.scrollbar.rect=a.axis.y.scrollbar.el.getBoundingClientRect(),a.isWithinBounds(a.axis.y.scrollbar.rect)?a.onDragStart(e,"y"):a.onTrackClick(e,"y"))))},this.drag=function(e){var t=a.axis[a.draggedAxis].track,i=t.rect[a.axis[a.draggedAxis].sizeAttr],r=a.axis[a.draggedAxis].scrollbar,n=a.contentWrapperEl[a.axis[a.draggedAxis].scrollSizeAttr],o=parseInt(a.elStyles[a.axis[a.draggedAxis].sizeAttr],10);e.preventDefault(),e.stopPropagation();e=(("y"===a.draggedAxis?e.pageY:e.pageX)-t.rect[a.axis[a.draggedAxis].offsetAttr]-a.axis[a.draggedAxis].dragOffset)/(i-r.size)*(n-o);"x"===a.draggedAxis&&(e=a.isRtl&&s.getRtlHelpers().isRtlScrollbarInverted?e-(i+r.size):e,e=a.isRtl&&s.getRtlHelpers().isRtlScrollingInverted?-e:e),a.contentWrapperEl[a.axis[a.draggedAxis].scrollOffsetAttr]=e},this.onEndDrag=function(e){var t=getElementDocument(a.el),i=getElementWindow(a.el);e.preventDefault(),e.stopPropagation(),a.el.classList.remove(a.classNames.dragging),t.removeEventListener("mousemove",a.drag,!0),t.removeEventListener("mouseup",a.onEndDrag,!0),a.removePreventClickId=i.setTimeout(function(){t.removeEventListener("click",a.preventClick,!0),t.removeEventListener("dblclick",a.preventClick,!0),a.removePreventClickId=null})},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=e,this.minScrollbarWidth=20,this.options=Object.assign({},s.defaultOptions,t),this.classNames=Object.assign({},s.defaultOptions.classNames,this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,s.instances.has(this.el)||(this.recalculate=lodash_throttle(this.recalculate.bind(this),64),this.onMouseMove=lodash_throttle(this.onMouseMove.bind(this),64),this.hideScrollbars=lodash_debounce(this.hideScrollbars.bind(this),this.options.timeout),this.onWindowResize=lodash_debounce(this.onWindowResize.bind(this),64,{leading:!0}),s.getRtlHelpers=lodash_memoize(s.getRtlHelpers),this.init())}s.getRtlHelpers=function(){var e=document.createElement("div"),e=(e.innerHTML='<div class="hs-dummy-scrollbar-size"><div style="height: 200%; width: 200%; margin: 10px 0;"></div></div>',e.firstElementChild),t=(document.body.appendChild(e),e.firstElementChild),i=(e.scrollLeft=0,s.getOffset(e)),r=s.getOffset(t),e=(e.scrollLeft=999,s.getOffset(t));return{isRtlScrollingInverted:i.left!==r.left&&r.left-e.left!=0,isRtlScrollbarInverted:i.left!==r.left}},s.getOffset=function(e){var t=e.getBoundingClientRect(),i=getElementDocument(e),e=getElementWindow(e);return{top:t.top+(e.pageYOffset||i.documentElement.scrollTop),left:t.left+(e.pageXOffset||i.documentElement.scrollLeft)}};var e=s.prototype;return e.init=function(){s.instances.set(this.el,this),canUseDom&&(this.initDOM(),this.setAccessibilityAttributes(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.initDOM=function(){var e,t,i=this;if(Array.prototype.filter.call(this.el.children,function(e){return e.classList.contains(i.classNames.wrapper)}).length)this.wrapperEl=this.el.querySelector("."+this.classNames.wrapper),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector("."+this.classNames.contentWrapper),this.contentEl=this.options.contentNode||this.el.querySelector("."+this.classNames.contentEl),this.offsetEl=this.el.querySelector("."+this.classNames.offset),this.maskEl=this.el.querySelector("."+this.classNames.mask),this.placeholderEl=this.findChild(this.wrapperEl,"."+this.classNames.placeholder),this.heightAutoObserverWrapperEl=this.el.querySelector("."+this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl=this.el.querySelector("."+this.classNames.heightAutoObserverEl),this.axis.x.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.horizontal),this.axis.y.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.vertical);else{for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),this.wrapperEl.classList.add(this.classNames.wrapper),this.contentWrapperEl.classList.add(this.classNames.contentWrapper),this.offsetEl.classList.add(this.classNames.offset),this.maskEl.classList.add(this.classNames.mask),this.contentEl.classList.add(this.classNames.contentEl),this.placeholderEl.classList.add(this.classNames.placeholder),this.heightAutoObserverWrapperEl.classList.add(this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl.classList.add(this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl)}this.axis.x.track.el&&this.axis.y.track.el||(e=document.createElement("div"),t=document.createElement("div"),e.classList.add(this.classNames.track),t.classList.add(this.classNames.scrollbar),e.appendChild(t),this.axis.x.track.el=e.cloneNode(!0),this.axis.x.track.el.classList.add(this.classNames.horizontal),this.axis.y.track.el=e.cloneNode(!0),this.axis.y.track.el.classList.add(this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)),this.axis.x.scrollbar.el=this.axis.x.track.el.querySelector("."+this.classNames.scrollbar),this.axis.y.scrollbar.el=this.axis.y.track.el.querySelector("."+this.classNames.scrollbar),this.options.autoHide||(this.axis.x.scrollbar.el.classList.add(this.classNames.visible),this.axis.y.scrollbar.el.classList.add(this.classNames.visible)),this.el.setAttribute("data-simplebar","init")},e.setAccessibilityAttributes=function(){var e=this.options.ariaLabel||"scrollable content";this.contentWrapperEl.setAttribute("tabindex","0"),this.contentWrapperEl.setAttribute("role","region"),this.contentWrapperEl.setAttribute("aria-label",e)},e.initListeners=function(){var t=this,e=getElementWindow(this.el),i=(this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach(function(e){t.el.addEventListener(e,t.onPointerEvent,!0)}),["touchstart","touchend","touchmove"].forEach(function(e){t.el.addEventListener(e,t.onPointerEvent,{capture:!0,passive:!0})}),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.addEventListener("scroll",this.onScroll),e.addEventListener("resize",this.onWindowResize),!1),r=e.ResizeObserver||ResizeObserver$1;this.resizeObserver=new r(function(){i&&t.recalculate()}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),e.requestAnimationFrame(function(){i=!0}),this.mutationObserver=new e.MutationObserver(this.recalculate),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})},e.recalculate=function(){var e=getElementWindow(this.el),e=(this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction,this.heightAutoObserverEl.offsetHeight<=1),t=this.heightAutoObserverEl.offsetWidth<=1,i=this.contentEl.offsetWidth,r=this.contentWrapperEl.offsetWidth,n=this.elStyles.overflowX,o=this.elStyles.overflowY,a=(this.contentEl.style.padding=this.elStyles.paddingTop+" "+this.elStyles.paddingRight+" "+this.elStyles.paddingBottom+" "+this.elStyles.paddingLeft,this.wrapperEl.style.margin="-"+this.elStyles.paddingTop+" -"+this.elStyles.paddingRight+" -"+this.elStyles.paddingBottom+" -"+this.elStyles.paddingLeft,this.contentEl.scrollHeight),s=this.contentEl.scrollWidth,e=(this.contentWrapperEl.style.height=e?"auto":"100%",this.placeholderEl.style.width=t?i+"px":"auto",this.placeholderEl.style.height=a+"px",this.contentWrapperEl.offsetHeight),t=(this.axis.x.isOverflowing=i<s,this.axis.y.isOverflowing=e<a,this.axis.x.isOverflowing="hidden"!==n&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==o&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar(),this.axis.x.isOverflowing?this.scrollbarWidth:0),i=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&r-i<s,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&e-t<a,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el.style.width=this.axis.x.scrollbar.size+"px",this.axis.y.scrollbar.el.style.height=this.axis.y.scrollbar.size+"px",this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")},e.getScrollbarSize=function(e){if(!this.axis[e=void 0===e?"y":e].isOverflowing)return 0;var t=this.contentEl[this.axis[e].scrollSizeAttr],e=this.axis[e].track.el[this.axis[e].offsetSizeAttr],t=Math.max(~~(e/t*e),this.options.scrollbarMinSize);return t=this.options.scrollbarMaxSize?Math.min(t,this.options.scrollbarMaxSize):t},e.positionScrollbar=function(e){var t,i,r,n,o;this.axis[e=void 0===e?"y":e].isOverflowing&&(t=this.contentWrapperEl[this.axis[e].scrollSizeAttr],i=this.axis[e].track.el[this.axis[e].offsetSizeAttr],r=parseInt(this.elStyles[this.axis[e].sizeAttr],10),n=this.axis[e].scrollbar,o=this.contentWrapperEl[this.axis[e].scrollOffsetAttr],o="x"===e&&this.isRtl&&s.getRtlHelpers().isRtlScrollingInverted?-o:o,o=~~((i-n.size)*(o/(t-r))),o="x"===e&&this.isRtl&&s.getRtlHelpers().isRtlScrollbarInverted?o+(i-n.size):o,n.el.style.transform="x"===e?"translate3d("+o+"px, 0, 0)":"translate3d(0, "+o+"px, 0)")},e.toggleTrackVisibility=function(e){var t=this.axis[e=void 0===e?"y":e].track.el,i=this.axis[e].scrollbar.el;this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll"):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden"),this.axis[e].isOverflowing?i.style.display="block":i.style.display="none"},e.hideNativeScrollbar=function(){this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+this.scrollbarWidth+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+this.scrollbarWidth+"px":0},e.onMouseMoveForAxis=function(e){this.axis[e=void 0===e?"y":e].track.rect=this.axis[e].track.el.getBoundingClientRect(),this.axis[e].scrollbar.rect=this.axis[e].scrollbar.el.getBoundingClientRect(),this.isWithinBounds(this.axis[e].scrollbar.rect)?this.axis[e].scrollbar.el.classList.add(this.classNames.hover):this.axis[e].scrollbar.el.classList.remove(this.classNames.hover),this.isWithinBounds(this.axis[e].track.rect)?(this.showScrollbar(e),this.axis[e].track.el.classList.add(this.classNames.hover)):this.axis[e].track.el.classList.remove(this.classNames.hover)},e.onMouseLeaveForAxis=function(e){this.axis[e=void 0===e?"y":e].track.el.classList.remove(this.classNames.hover),this.axis[e].scrollbar.el.classList.remove(this.classNames.hover)},e.showScrollbar=function(e){var t=this.axis[e=void 0===e?"y":e].scrollbar.el;this.axis[e].isVisible||(t.classList.add(this.classNames.visible),this.axis[e].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},e.onDragStart=function(e,t){void 0===t&&(t="y");var i=getElementDocument(this.el),r=getElementWindow(this.el),n=this.axis[t].scrollbar,e="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=e-n.rect[this.axis[t].offsetAttr],this.draggedAxis=t,this.el.classList.add(this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(r.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.onTrackClick=function(e,i){var r,t,n,o,a,s,c=this;void 0===i&&(i="y"),this.options.clickOnTrack&&(r=getElementWindow(this.el),this.axis[i].scrollbar.rect=this.axis[i].scrollbar.el.getBoundingClientRect(),t=this.axis[i].scrollbar.rect[this.axis[i].offsetAttr],n=parseInt(this.elStyles[this.axis[i].sizeAttr],10),o=this.contentWrapperEl[this.axis[i].scrollOffsetAttr],a=("y"===i?this.mouseY-t:this.mouseX-t)<0?-1:1,s=-1===a?o-n:o+n,function e(){var t;-1===a?s<o&&(o-=c.options.clickOnTrackSpeed,c.contentWrapperEl.scrollTo(((t={})[c.axis[i].offsetAttr]=o,t)),r.requestAnimationFrame(e)):o<s&&(o+=c.options.clickOnTrackSpeed,c.contentWrapperEl.scrollTo(((t={})[c.axis[i].offsetAttr]=o,t)),r.requestAnimationFrame(e))}())},e.getContentElement=function(){return this.contentEl},e.getScrollElement=function(){return this.contentWrapperEl},e.getScrollbarWidth=function(){try{return"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:scrollbarWidth(this.el)}catch(e){return scrollbarWidth(this.el)}},e.removeListeners=function(){var t=this,e=getElementWindow(this.el);this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach(function(e){t.el.removeEventListener(e,t.onPointerEvent,!0)}),["touchstart","touchend","touchmove"].forEach(function(e){t.el.removeEventListener(e,t.onPointerEvent,{capture:!0,passive:!0})}),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},e.unMount=function(){this.removeListeners(),s.instances.delete(this.el)},e.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.findChild=function(e,t){var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,function(e){return i.call(e,t)})[0]},s}(),buffer=(SimpleBar.defaultOptions={autoHide:!0,forceVisible:!1,clickOnTrack:!0,clickOnTrackSpeed:40,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},SimpleBar.instances=new WeakMap,SimpleBar.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),function(e){"init"===e.getAttribute("data-simplebar")||SimpleBar.instances.has(e)||new SimpleBar(e,getOptions(e.attributes))})},SimpleBar.removeObserver=function(){this.globalObserver.disconnect()},SimpleBar.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(SimpleBar.handleMutations),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},SimpleBar.handleMutations=function(e){e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?!SimpleBar.instances.has(e)&&document.documentElement.contains(e)&&new SimpleBar(e,getOptions(e.attributes)):Array.prototype.forEach.call(e.querySelectorAll("[data-simplebar]"),function(e){"init"!==e.getAttribute("data-simplebar")&&!SimpleBar.instances.has(e)&&document.documentElement.contains(e)&&new SimpleBar(e,getOptions(e.attributes))}))}),Array.prototype.forEach.call(e.removedNodes,function(e){1===e.nodeType&&("init"===e.getAttribute("data-simplebar")?SimpleBar.instances.has(e)&&!document.documentElement.contains(e)&&SimpleBar.instances.get(e).unMount():Array.prototype.forEach.call(e.querySelectorAll('[data-simplebar="init"]'),function(e){SimpleBar.instances.has(e)&&!document.documentElement.contains(e)&&SimpleBar.instances.get(e).unMount()}))})})},SimpleBar.getOptions=getOptions,canUseDom&&SimpleBar.initHtmlApi(),{}),base64Js={},lookup=(base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray,[]),revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}function byteLength(e){var e=getLens(e),t=e[0],e=e[1];return 3*(t+e)/4-e}function _byteLength(e,t,i){return 3*(t+i)/4-i}function toByteArray(e){for(var t,i=getLens(e),r=i[0],i=i[1],n=new Arr(_byteLength(e,r,i)),o=0,a=0<i?r-4:r,s=0;s<a;s+=4)t=revLookup[e.charCodeAt(s)]<<18|revLookup[e.charCodeAt(s+1)]<<12|revLookup[e.charCodeAt(s+2)]<<6|revLookup[e.charCodeAt(s+3)],n[o++]=t>>16&255,n[o++]=t>>8&255,n[o++]=255&t;return 2===i&&(t=revLookup[e.charCodeAt(s)]<<2|revLookup[e.charCodeAt(s+1)]>>4,n[o++]=255&t),1===i&&(t=revLookup[e.charCodeAt(s)]<<10|revLookup[e.charCodeAt(s+1)]<<4|revLookup[e.charCodeAt(s+2)]>>2,n[o++]=t>>8&255,n[o++]=255&t),n}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,i){for(var r,n=[],o=t;o<i;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(tripletToBase64(r));return n.join("")}function fromByteArray(e){for(var t,i=e.length,r=i%3,n=[],o=0,a=i-r;o<a;o+=16383)n.push(encodeChunk(e,o,a<o+16383?a:o+16383));return 1==r?(t=e[i-1],n.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2==r&&(t=(e[i-2]<<8)+e[i-1],n.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),n.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var ieee754={read:function(e,t,i,r,n){var o,a,s=8*n-r-1,c=(1<<s)-1,l=c>>1,d=-7,u=i?n-1:0,p=i?-1:1,n=e[t+u];for(u+=p,o=n&(1<<-d)-1,n>>=-d,d+=s;0<d;o=256*o+e[t+u],u+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;0<d;a=256*a+e[t+u],u+=p,d-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(n?-1:1);a+=Math.pow(2,r),o-=l}return(n?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,i,r,n,o){var a,s,c=8*o-n-1,l=(1<<c)-1,d=l>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+d?u/r:u*Math.pow(2,1-d))*r&&(a++,r/=2),l<=a+d?(s=0,a=l):1<=a+d?(s=(t*r-1)*Math.pow(2,n),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,n),a=0));8<=n;e[i+p]=255&s,p+=h,s/=256,n-=8);for(a=a<<n|s,c+=n;0<c;e[i+p]=255&a,p+=h,a/=256,c-=8);e[i+p-h]|=128*o}},_a;!function(i){const g=base64Js,o=ieee754;var e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=d,i.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},i.INSPECT_MAX_BYTES=50;const t=2147483647;function s(e){if(e>t)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,d.prototype),e}function d(e,t,i){if("number"!=typeof e)return r(e,t,i);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function r(t,i,e){if("string"==typeof t){var r=t;var n=i;"string"==typeof n&&""!==n||(n="utf8");if(!d.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o=0|p(r,n);let e=s(o);r=e.write(r,n);r!==o&&(e=e.slice(0,r));return e}if(ArrayBuffer.isView(t))return L(n=t,Uint8Array)?l((o=new Uint8Array(n)).buffer,o.byteOffset,o.byteLength):c(n);if(null!=t){if(L(t,ArrayBuffer)||t&&L(t.buffer,ArrayBuffer))return l(t,i,e);if("undefined"!=typeof SharedArrayBuffer&&(L(t,SharedArrayBuffer)||t&&L(t.buffer,SharedArrayBuffer)))return l(t,i,e);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return d.from(r,i,e);var a=function(e){{var t,i;if(d.isBuffer(e))return t=0|u(e.length),0!==(i=s(t)).length&&e.copy(i,0,0,t),i}if(void 0!==e.length)return"number"!=typeof e.length||_(e.length)?s(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(t);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return d.from(t[Symbol.toPrimitive]("string"),i,e)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function n(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return n(e),s(e<0?0:0|u(e))}function c(t){var i=t.length<0?0:0|u(t.length);const r=s(i);for(let e=0;e<i;e+=1)r[e]=255&t[e];return r}function l(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(r,d.prototype),r}function u(e){if(e>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function p(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return F(e).length;default:if(n)return r?-1:A(e).length;t=(""+t).toLowerCase(),n=!0}}function D(e,i,r){let t=!1;if((i=void 0===i||i<0?0:i)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(i>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":{var n=this;var o=i;var a=r;var s=n.length;(!o||o<0)&&(o=0);(!a||a<0||s<a)&&(a=s);let t="";for(let e=o;e<a;++e)t+=V[n[e]];return t;return}case"utf8":case"utf-8":return b(this,i,r);case"ascii":{var c=this;s=i;var l=r;let t="";l=Math.min(c.length,l);for(let e=s;e<l;++e)t+=String.fromCharCode(127&c[e]);return t;return}case"latin1":case"binary":{var d=this;o=i;var u=r;let t="";u=Math.min(d.length,u);for(let e=o;e<u;++e)t+=String.fromCharCode(d[e]);return t;return}case"base64":return h=this,m=r,0===(f=i)&&m===h.length?g.fromByteArray(h):g.fromByteArray(h.slice(f,m));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":{h=this;f=i;m=r;var p=h.slice(f,m);let t="";for(let e=0;e<p.length-1;e+=2)t+=String.fromCharCode(p[e]+256*p[e+1]);return t;return}default:if(t)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),t=!0}var h,f,m}function h(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function f(e,t,i,r,n){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),(i=(i=_(i=+i)?n?0:e.length-1:i)<0?e.length+i:i)>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:m(e,t,i,r,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,i):m(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function m(i,r,t,e,n){let o=1,a=i.length,s=r.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(i.length<2||r.length<2)return-1;o=2,a/=2,s/=2,t/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}let l;if(n){let e=-1;for(l=t;l<a;l++)if(c(i,l)===c(r,-1===e?0:l-e)){if(-1===e&&(e=l),l-e+1===s)return e*o}else-1!==e&&(l-=l-e),e=-1}else for(t+s>a&&(t=a-s),l=t;0<=l;l--){let t=!0;for(let e=0;e<s;e++)if(c(i,l+e)!==c(r,e)){t=!1;break}if(t)return l}return-1}function M(e,t,i,r){return x(function(t){const i=[];for(let e=0;e<t.length;++e)i.push(255&t.charCodeAt(e));return i}(t),e,i,r)}function B(e,t,i,r){return x(function(t,i){var r,n;const o=[];for(let e=0;e<t.length&&!((i-=2)<0);++e)n=t.charCodeAt(e),r=n>>8,n=n%256,o.push(n),o.push(r);return o}(t,e.length-i),e,i,r)}function b(a,e,t){t=Math.min(a.length,t);const i=[];let s=e;for(;s<t;){var c=a[s];let n=null,o=239<c?4:223<c?3:191<c?2:1;if(s+o<=t){let e,t,i,r;switch(o){case 1:c<128&&(n=c);break;case 2:128==(192&(e=a[s+1]))&&127<(r=(31&c)<<6|63&e)&&(n=r);break;case 3:e=a[s+1],t=a[s+2],128==(192&e)&&128==(192&t)&&2047<(r=(15&c)<<12|(63&e)<<6|63&t)&&(r<55296||57343<r)&&(n=r);break;case 4:e=a[s+1],t=a[s+2],i=a[s+3],128==(192&e)&&128==(192&t)&&128==(192&i)&&65535<(r=(15&c)<<18|(63&e)<<12|(63&t)<<6|63&i)&&r<1114112&&(n=r)}}null===n?(n=65533,o=1):65535<n&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n),s+=o}{var r=i,n=r.length;if(n<=v)return String.fromCharCode.apply(String,r);let e="",t=0;for(;t<n;)e+=String.fromCharCode.apply(String,r.slice(t,t+=v));return e}}i.kMaxLength=t,(d.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1);var e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=r,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,i){return t=t,i=i,n(e=e),!(e<=0)&&void 0!==t?"string"==typeof i?s(e).fill(t,i):s(e).fill(t):s(e)},d.allocUnsafe=a,d.allocUnsafeSlow=a,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(i,r){if(L(i,Uint8Array)&&(i=d.from(i,i.offset,i.byteLength)),L(r,Uint8Array)&&(r=d.from(r,r.offset,r.byteLength)),!d.isBuffer(i)||!d.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===r)return 0;let n=i.length,o=r.length;for(let e=0,t=Math.min(n,o);e<t;++e)if(i[e]!==r[e]){n=i[e],o=r[e];break}return n<o?-1:o<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=d.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(L(e,Uint8Array))n+e.length>r.length?(e=d.isBuffer(e)?e:d.from(e)).copy(r,n):Uint8Array.prototype.set.call(r,e,n);else{if(!d.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,n)}n+=e.length}return r},d.byteLength=p,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)h(this,e,e+1);return this},d.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)h(this,e,e+3),h(this,e+1,e+2);return this},d.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)h(this,e,e+7),h(this,e+1,e+6),h(this,e+2,e+5),h(this,e+3,e+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):D.apply(this,arguments)},d.prototype.equals=function(e){if(d.isBuffer(e))return this===e||0===d.compare(this,e);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){let e="";var t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(d.prototype[e]=d.prototype.inspect),d.prototype.compare=function(e,t,i,r,n){if(L(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),(t=void 0===t?0:t)<0||i>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(n<=r&&i<=t)return 0;if(n<=r)return-1;if(i<=t)return 1;if(this===e)return 0;let o=(n>>>=0)-(r>>>=0),a=(i>>>=0)-(t>>>=0);var s=Math.min(o,a),c=this.slice(r,n),l=e.slice(t,i);for(let e=0;e<s;++e)if(c[e]!==l[e]){o=c[e],a=l[e];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},d.prototype.indexOf=function(e,t,i){return f(this,e,t,i,!0)},d.prototype.lastIndexOf=function(e,t,i){return f(this,e,t,i,!1)},d.prototype.write=function(t,i,r,e){if(void 0===i)e="utf8",r=this.length,i=0;else if(void 0===r&&"string"==typeof i)e=i,r=this.length,i=0;else{if(!isFinite(i))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i>>>=0,isFinite(r)?(r>>>=0,void 0===e&&(e="utf8")):(e=r,r=void 0)}var n,o,a,s=this.length-i;if((void 0===r||s<r)&&(r=s),0<t.length&&(r<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");e=e||"utf8";let c=!1;for(;;)switch(e){case"hex":{var l=this;var d=t;var u=i;var p=r;u=Number(u)||0;var h=l.length-u;(!p||h<(p=Number(p)))&&(p=h),(h=d.length)/2<p&&(p=h/2);let e;for(e=0;e<p;++e){var f=parseInt(d.substr(2*e,2),16);if(_(f))return e;l[u+e]=f}return e;return}case"utf8":case"utf-8":return h=i,a=r,x(A(t,(o=this).length-h),o,h,a);case"ascii":case"latin1":case"binary":return M(this,t,i,r);case"base64":return o=this,a=i,n=r,x(F(t),o,a,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,i,r);default:if(c)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),c=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const v=4096;function y(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(i<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,i,r,n,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<t||t<o)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function w(e,t,i,r,n){U(t,r,n,e,i,7);r=Number(t&BigInt(4294967295)),e[i++]=r,e[i++]=r>>=8,e[i++]=r>>=8,e[i++]=r>>=8,n=Number(t>>BigInt(32)&BigInt(4294967295));return e[i++]=n,e[i++]=n>>=8,e[i++]=n>>=8,e[i++]=n>>=8,i}function k(e,t,i,r,n){U(t,r,n,e,i,7);r=Number(t&BigInt(4294967295)),e[i+7]=r,e[i+6]=r>>=8,e[i+5]=r>>=8,e[i+4]=r>>=8,n=Number(t>>BigInt(32)&BigInt(4294967295));return e[i+3]=n,e[i+2]=n>>=8,e[i+1]=n>>=8,e[i]=n>>=8,i+8}function E(e,t,i,r){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function T(e,t,i,r,n){return t=+t,i>>>=0,n||E(e,0,i,4),o.write(e,t,i,r,23,4),i+4}function C(e,t,i,r,n){return t=+t,i>>>=0,n||E(e,0,i,8),o.write(e,t,i,r,52,8),i+8}d.prototype.slice=function(e,t){var i=this.length,i=((e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(i,d.prototype),i},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);let r=this[e],n=1,o=0;for(;++o<t&&(n*=256);)r+=this[e+o]*n;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);let r=this[e+--t],n=1;for(;0<t&&(n*=256);)r+=this[e+--t]*n;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=N(function(e){R(e>>>=0,"offset");var t=this[e],i=this[e+7],t=(void 0!==t&&void 0!==i||I(e,this.length-8),t+256*this[++e]+65536*this[++e]+this[++e]*2**24),e=this[++e]+256*this[++e]+65536*this[++e]+i*2**24;return BigInt(t)+(BigInt(e)<<BigInt(32))}),d.prototype.readBigUInt64BE=N(function(e){R(e>>>=0,"offset");var t=this[e],i=this[e+7],t=(void 0!==t&&void 0!==i||I(e,this.length-8),t*2**24+65536*this[++e]+256*this[++e]+this[++e]),e=this[++e]*2**24+65536*this[++e]+256*this[++e]+i;return(BigInt(t)<<BigInt(32))+BigInt(e)}),d.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);let r=this[e],n=1,o=0;for(;++o<t&&(n*=256);)r+=this[e+o]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);let r=t,n=1,o=this[e+--r];for(;0<r&&(n*=256);)o+=this[e+--r]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||y(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt16BE=function(e,t){e>>>=0,t||y(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=N(function(e){R(e>>>=0,"offset");var t=this[e],i=this[e+7],i=(void 0!==t&&void 0!==i||I(e,this.length-8),this[e+4]+256*this[e+5]+65536*this[e+6]+(i<<24));return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),d.prototype.readBigInt64BE=N(function(e){R(e>>>=0,"offset");var t=this[e],i=this[e+7],t=(void 0!==t&&void 0!==i||I(e,this.length-8),(t<<24)+65536*this[++e]+256*this[++e]+this[++e]);return(BigInt(t)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+i)}),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||y(e,4,this.length),o.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||y(e,4,this.length),o.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||y(e,8,this.length),o.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||y(e,8,this.length),o.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||S(this,e,t,i,Math.pow(2,8*i)-1,0);let n=1,o=0;for(this[t]=255&e;++o<i&&(n*=256);)this[t+o]=e/n&255;return t+i},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||S(this,e,t,i,Math.pow(2,8*i)-1,0);let n=i-1,o=1;for(this[t+n]=255&e;0<=--n&&(o*=256);)this[t+n]=e/o&255;return t+i},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=N(function(e,t=0){return w(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=N(function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(e,t,i,r){e=+e,t>>>=0,r||S(this,e,t,i,(r=Math.pow(2,8*i-1))-1,-r);let n=0,o=1,a=0;for(this[t]=255&e;++n<i&&(o*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/o>>0)-a&255;return t+i},d.prototype.writeIntBE=function(e,t,i,r){e=+e,t>>>=0,r||S(this,e,t,i,(r=Math.pow(2,8*i-1))-1,-r);let n=i-1,o=1,a=0;for(this[t+n]=255&e;0<=--n&&(o*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/o>>0)-a&255;return t+i},d.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=N(function(e,t=0){return w(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=N(function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(e,t,i){return T(this,e,t,!0,i)},d.prototype.writeFloatBE=function(e,t,i){return T(this,e,t,!1,i)},d.prototype.writeDoubleLE=function(e,t,i){return C(this,e,t,!0,i)},d.prototype.writeDoubleBE=function(e,t,i){return C(this,e,t,!1,i)},d.prototype.copy=function(e,t,i,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i=i||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<i?i:r)===i)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var n=(r=e.length-t<r-i?e.length-t+i:r)-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,r):Uint8Array.prototype.set.call(e,this.subarray(i,r),t),n},d.prototype.fill=function(t,i,r,n){if("string"==typeof t){if("string"==typeof i?(n=i,i=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!d.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var e;1===t.length&&(e=t.charCodeAt(0),("utf8"===n&&e<128||"latin1"===n)&&(t=e))}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<r)throw new RangeError("Out of range index");if(!(r<=i)){i>>>=0,r=void 0===r?this.length:r>>>0;let e;if("number"==typeof(t=t||0))for(e=i;e<r;++e)this[e]=t;else{var o=d.isBuffer(t)?t:d.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(e=0;e<r-i;++e)this[e+i]=o[e%a]}}return this};const $={};function P(e,t,i){$[e]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=this.name+` [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return this.name+` [${e}]: `+this.message}}}function O(e){let t="",i=e.length;for(var r="-"===e[0]?1:0;i>=4+r;i-=3)t="_"+e.slice(i-3,i)+t;return""+e.slice(0,i)+t}function U(t,i,r,e,n,o){if(r<t||t<i){var a="bigint"==typeof i?"n":"";let e;throw e=3<o?0===i||i===BigInt(0)?`>= 0${a} and < 2${a} ** `+8*(o+1)+a:`>= -(2${a} ** ${8*(o+1)-1}${a}) and < 2 ** `+(8*(o+1)-1)+a:`>= ${i}${a} and <= `+r+a,new $.ERR_OUT_OF_RANGE("value",e,t)}i=e,r=o,R(a=n,"offset"),void 0!==i[a]&&void 0!==i[a+r]||I(a,i.length-(r+1))}function R(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function I(e,t,i){if(Math.floor(e)!==e)throw R(e,i),new $.ERR_OUT_OF_RANGE(i||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= `+t,e)}P("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type `+typeof t},TypeError),P("ERR_OUT_OF_RANGE",function(e,t,i){e=`The value of "${e}" is out of range.`;let r=i;return Number.isInteger(i)&&Math.abs(i)>2**32?r=O(String(i)):"bigint"==typeof i&&(r=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(r=O(r)),r+="n"),e+=` It must be ${t}. Received `+r},RangeError);const j=/[^+/0-9A-Za-z-_]/g;function A(t,i){i=i||1/0;let r;var n=t.length;let o=null;const a=[];for(let e=0;e<n;++e){if(55295<(r=t.charCodeAt(e))&&r<57344){if(!o){if(56319<r){-1<(i-=3)&&a.push(239,191,189);continue}if(e+1===n){-1<(i-=3)&&a.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(i-=3)&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(i-=3)&&a.push(239,191,189);if(o=null,r<128){if(--i<0)break;a.push(r)}else if(r<2048){if((i-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((i-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function F(e){return g.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function x(e,t,i,r){let n;for(n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function _(e){return e!=e}const V=function(){var i="0123456789abcdef";const r=new Array(256);for(let t=0;t<16;++t){var n=16*t;for(let e=0;e<16;++e)r[n+e]=i[t]+i[e]}return r}();function N(e){return"undefined"==typeof BigInt?W:e}function W(){throw new Error("BigInt not supported")}}(buffer);const $=e=>document.getElementById(e),API_URL="https://meeting.fptonline.net",WSS_URL="wss://wss-meeting.fptonline.net",isMobile=/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(navigator.userAgent);let readyRecieveNotify=!1;"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){},function(e){})});let localAvatar,localName;const dropzoneElm=document.querySelector(".dz-upload-avatar");if(dropzoneElm){const avatarUploader=new $3ed269f2f0fb224b$export$2e2bcd8739ae039(dropzoneElm,{url:"/upload-avatar",maxFiles:1,uploadMultiple:!1,acceptedFiles:"image/*",resizeWidth:500,resizeHeight:500,resizeQuality:1,createImageThumbnails:!1,previewsContainer:!1,clickable:".box-upload-file"});avatarUploader.on("error",(e,t)=>{avatarUploader.removeAllFiles(!0),Swal.fire({title:"Error",text:"Upload error. Please try again",showCancelButton:!1,confirmButtonColor:"#0E78F9",cancelButtonColor:"#292C3D",confirmButtonText:"Ok",showCloseButton:!0,heightAuto:!1,background:"#292c3d"}),console.log(`upload error: ${e.name} - `+t)}),avatarUploader.on("success",e=>{console.log(e);e=JSON.parse(null==(e=e.xhr)?void 0:e.response);if(1==e.status){localAvatar=e.message;const t=document.querySelector("#joinPage .box-avatar");t.innerHTML=`<img src="${e.message}" alt="">`,localStorage.setItem("avatar",e.message)}else Swal.fire({title:"Error",text:"Upload error. Please try again",showCancelButton:!1,confirmButtonColor:"#0E78F9",cancelButtonColor:"#292C3D",confirmButtonText:"Ok",showCloseButton:!0,heightAuto:!1,background:"#292c3d"}),console.log("upload error:",e);avatarUploader.removeAllFiles(!0)})}if(localAvatar=localStorage.getItem("avatar"),localAvatar){const avatar=document.querySelector("#joinPage .box-avatar");avatar&&(avatar.innerHTML=`<img src="${localAvatar}" alt="">`),localAvatar=localAvatar}localName=localStorage.getItem("name");let joinMic=!1,joinCam=!1,joinMicButton=$("btnJoinMic"),joinCamButton=$("btnJoinCam");null!==joinMicButton&&void 0!==joinMicButton&&joinMicButton.addEventListener("click",e=>{joinMicButton&&'<i class="icon-Voiceoff"></i>'==joinMicButton.innerHTML?(joinMic=!0,joinMicButton.innerHTML='<i class="icon-Voice"></i>'):(joinMic=!1,joinMicButton.innerHTML='<i class="icon-Voiceoff"></i>')}),null!==joinCamButton&&void 0!==joinCamButton&&joinCamButton.addEventListener("click",e=>{joinCamButton&&'<i class="icon-Video"></i>'==joinCamButton.innerHTML?(joinCam=!1,joinCamButton.innerHTML='<i class="icon-Videooff"></i>'):(joinCam=!0,joinCamButton.innerHTML='<i class="icon-Video"></i>')});const state={isFrontFacing:!1,encoder:new TextEncoder,decoder:new TextDecoder,defaultDevices:new Map,bitrateInterval:void 0,layout:1,raiseHand:!1};let currentRoom,startTime;const nameInputElm=document.querySelector('input[name="name"]'),roomInputElm=document.querySelector('input[name="room"]'),roomPasscodeElm=document.querySelector('input[name="room-passcode"]'),appActions=(localName&&(nameInputElm&&(nameInputElm.value=localName),roomInputElm?roomInputElm.focus():roomPasscodeElm?roomPasscodeElm.focus():null!=(_a=$("btnJoin"))&&_a.focus()),null!==nameInputElm&&void 0!==nameInputElm&&nameInputElm.addEventListener("keyup",function(e){"Enter"!==e.key&&13!==e.keyCode||appActions.connectWithFormInput()}),null!==roomInputElm&&void 0!==roomInputElm&&roomInputElm.addEventListener("keyup",function(e){"Enter"!==e.key&&13!==e.keyCode||appActions.connectWithFormInput()}),null!==roomPasscodeElm&&void 0!==roomPasscodeElm&&roomPasscodeElm.addEventListener("keyup",function(e){"Enter"!==e.key&&13!==e.keyCode||appActions.connectWithFormInput()}),{connectWithFormInput:()=>__awaiter(void 0,void 0,void 0,function*(){const e=$("btnJoin");var t=location.pathname.replace(/^\//g,""),i=nameInputElm.value,r=roomInputElm?roomInputElm.value:t;if(e.setAttribute("disabled","true"),e.innerHTML="JOINING...",!r||!i)return e.innerHTML="JOIN",e.removeAttribute("disabled"),void Swal.fire({title:"Notify",text:"Please provide your name and room name",showCancelButton:!1,confirmButtonColor:"#0E78F9",cancelButtonColor:"#292C3D",confirmButtonText:"Ok",showCloseButton:!0,heightAuto:!1,background:"#292c3d"});localStorage.setItem("name",i);let n={user_name:i,avatar:localAvatar,room:r,create:!1};""==t&&(n.create=!0);i=null===roomPasscodeElm||void 0===roomPasscodeElm?void 0:roomPasscodeElm.value,i&&""!=i&&(n.passcode=i),r=localStorage.getItem("uii"),r&&(n.uii=r),t=yield fetch(API_URL+"/api/get-join-token",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(o=>__awaiter(void 0,void 0,void 0,function*(){var{token:e,room:t,uii:i,error:r,message:n}=yield o.json();if(1!=r)return console.log("get-join-token",e),window.history.replaceState(null,"","/"+t),i&&localStorage.setItem("uii",i),e;Swal.fire({title:"Notify",text:n,showCancelButton:!1,confirmButtonColor:"#0E78F9",cancelButtonColor:"#292C3D",confirmButtonText:"Ok",showCloseButton:!0,heightAuto:!1,background:"#292c3d"})})).catch(()=>{e.innerHTML="JOIN",e.removeAttribute("disabled")});if(null==t)return e.innerHTML="JOIN",void e.removeAttribute("disabled");setLogLevel(LogLevel.debug);i={adaptiveStream:!0,dynacast:!0,publishDefaults:{simulcast:!0,videoSimulcastLayers:[VideoPresets.h90,VideoPresets.h216],videoCodec:"vp8"},videoCaptureDefaults:{resolution:VideoPresets.h720.resolution}},r={autoSubscribe:!0,publishOnly:void 0};yield appActions.connectToRoom(WSS_URL,t,i,r,!0),state.bitrateInterval=setInterval(renderBitrate,1e3)}),connectToRoom:(t,r,o,a,s)=>__awaiter(void 0,void 0,void 0,function*(){const n=new Room(o);n.on(RoomEvent.ParticipantConnected,participantConnected).on(RoomEvent.ParticipantDisconnected,participantDisconnected).on(RoomEvent.DataReceived,handleData).on(RoomEvent.Disconnected,handleRoomDisconnect).on(RoomEvent.Reconnecting,()=>appendLog("Reconnecting to room")).on(RoomEvent.Reconnected,()=>{appendLog("Successfully reconnected. server",n.engine.connectedServerAddress)}).on(RoomEvent.LocalTrackPublished,()=>{renderParticipant(n.localParticipant),updateButtonsForPublishState(),renderScreenShare(n)}).on(RoomEvent.LocalTrackUnpublished,()=>{renderParticipant(n.localParticipant),updateButtonsForPublishState(),renderScreenShare(n);let e=$("screenshare-wrapper-"+n.localParticipant.identity);e&&(e.remove(),handleLayouts())}).on(RoomEvent.DataReceived,e=>{appendLog("new data received for room",e);e=buffer.Buffer.from(e).toString("utf8");try{var t=JSON.parse(e);t&&("boolean"==typeof t.toggle_camera&&appActions.toggleVideo(),"boolean"==typeof t.off_screenshare&&appActions.shareScreen())}catch(e){}}).on(RoomEvent.RoomMetadataChanged,e=>{appendLog("new metadata for room",e)}).on(RoomEvent.MediaDevicesChanged,handleDevicesChanged).on(RoomEvent.AudioPlaybackStatusChanged,()=>{var e;n.canPlaybackAudio?null!=(e=$("start-audio-button"))&&e.setAttribute("disabled","true"):null!=(e=$("start-audio-button"))&&e.removeAttribute("disabled")}).on(RoomEvent.MediaDevicesError,e=>{appendLog("media device failure",MediaDeviceFailure.getFailure(e))}).on(RoomEvent.ConnectionQualityChanged,(e,t)=>{appendLog("connection quality changed",null==t?void 0:t.name,e)}).on(RoomEvent.TrackSubscribed,(e,t,i)=>{appendLog("subscribed to track",t.trackSid,i.identity),renderParticipant(i),renderScreenShare(n)}).on(RoomEvent.TrackUnsubscribed,(e,t,i)=>{appendLog("unsubscribed from track",t.trackSid),renderParticipant(i),renderScreenShare(n);let r=$("screenshare-wrapper-"+i.identity);r&&(r.remove(),handleLayouts())}).on(RoomEvent.SignalConnected,()=>__awaiter(void 0,void 0,void 0,function*(){s&&(yield Promise.all([n.localParticipant.setCameraEnabled(joinCam),n.localParticipant.setMicrophoneEnabled(joinMic)]),updateButtonsForPublishState(),startCountTimer(),joinMic&&(acquireDeviceList("audio-input"),acquireDeviceList("audio-output")),joinCam&&acquireDeviceList("video-input"))}));try{startTime=Date.now(),yield n.connect(t,r,a);var e=Date.now()-startTime;appendLog(`successfully connected to ${n.name} in ${Math.round(e)}ms`,n.engine.connectedServerAddress),initRoom()}catch(e){let t=e;appendLog("could not connect:",t=e.message?e.message:t);const i=$("btnJoin");return i.innerHTML="JOIN",i.removeAttribute("disabled"),void Swal.fire({title:"Error",text:"Could not connect. Please try again",showCancelButton:!1,confirmButtonColor:"#0E78F9",cancelButtonColor:"#292C3D",confirmButtonText:"Ok",showCloseButton:!0,heightAuto:!1,background:"#292c3d"})}return currentRoom=n,window.currentRoom=n,setButtonsForState(!0),updateButtonsForPublishState(),n.participants.forEach(e=>{participantConnected(e)}),participantConnected(n.localParticipant),n}),toggleAudio:()=>__awaiter(void 0,void 0,void 0,function*(){var e;currentRoom&&(e=currentRoom.localParticipant.isMicrophoneEnabled,setButtonDisabled("toggle-audio-button",!0),appendLog(e?"disabling audio":"enabling audio"),yield currentRoom.localParticipant.setMicrophoneEnabled(!e),setButtonDisabled("toggle-audio-button",!1),updateButtonsForPublishState(),acquireDeviceList("audio-input"),acquireDeviceList("audio-output"))}),toggleVideo:()=>__awaiter(void 0,void 0,void 0,function*(){var e;currentRoom&&(setButtonDisabled("toggle-video-button",!0),appendLog((e=currentRoom.localParticipant.isCameraEnabled)?"disabling video":"enabling video"),yield currentRoom.localParticipant.setCameraEnabled(!e),setButtonDisabled("toggle-video-button",!1),renderParticipant(currentRoom.localParticipant),updateButtonsForPublishState(),acquireDeviceList("video-output"))}),flipVideo:()=>{var e,t=null===currentRoom||void 0===currentRoom?void 0:currentRoom.localParticipant.getTrack(Track.Source.Camera);t&&(state.isFrontFacing?setButtonState("flip-video-button","Front Camera",!1):setButtonState("flip-video-button","Back Camera",!1),state.isFrontFacing=!state.isFrontFacing,e={resolution:VideoPresets.h720.resolution,facingMode:state.isFrontFacing?"user":"environment"},null!=(t=t.videoTrack)&&t.restartTrack(e))},shareScreen:()=>__awaiter(void 0,void 0,void 0,function*(){if(currentRoom){var e=currentRoom.localParticipant.isScreenShareEnabled;appendLog(`${e?"stopping":"starting"} screen share`),setButtonDisabled("share-screen-button",!0);try{yield currentRoom.localParticipant.setScreenShareEnabled(!e,{audio:!0})}catch(e){console.log("share screen error: ",e),e instanceof Error&&"Permission denied"!=e.message&&Swal.fire({title:"Warning",text:""+e,showCancelButton:!1,confirmButtonColor:"#0E78F9",cancelButtonColor:"#292C3D",confirmButtonText:"Ok",showCloseButton:!0,heightAuto:!1,background:"#292c3d"})}setButtonDisabled("share-screen-button",!1),updateButtonsForPublishState(),e&&(null!=(e=$("screenshare-wrapper-"+currentRoom.localParticipant.identity))&&e.remove(),handleLayouts())}}),startAudio:()=>{null!==currentRoom&&void 0!==currentRoom&&currentRoom.startAudio()},enterText:()=>{if(currentRoom){const t=$("entry");if(t.value){var e=state.encoder.encode(t.value),e=(currentRoom.localParticipant.publishData(e,DataPacket_Kind.RELIABLE),`
      <div class="box-chat__inner wrap-mess reply">
        <div class="box-chat__inner content">
          <div class="box-messenger">
            <div class="messenger">${t.value}</div>
          </div>
          <span class="user-seen">
            <i class="icon-checkcircle"></i>
          </span>
        </div>
      </div>`);const i=$("chat-message");i.insertAdjacentHTML("beforeend",e),t.value="",i.parentElement&&(i.parentElement.scrollTop=i.scrollHeight)}return!1}},disconnectRoom:()=>{currentRoom&&currentRoom.disconnect(),state.bitrateInterval&&clearInterval(state.bitrateInterval),window.location.reload()},handleScenario:e=>{var t=e.target.value;""!==t&&(null!==currentRoom&&void 0!==currentRoom&&currentRoom.simulateScenario(t),e.target.value="")},handleDeviceSelected:i=>__awaiter(void 0,void 0,void 0,function*(){var e=i.target.value,t=i.target.id,t=elementMapping[t];t&&(state.defaultDevices.set(t,e),currentRoom&&(yield currentRoom.switchActiveDevice(t,e)))}),handlePreferredQuality:e=>{e=e.target.value;let t=VideoQuality.HIGH;switch(e){case"low":t=VideoQuality.LOW;break;case"medium":t=VideoQuality.MEDIUM;break;case"high":t=VideoQuality.HIGH}currentRoom&&currentRoom.participants.forEach(e=>{e.tracks.forEach(e=>{e.setVideoQuality(t)})})},hideRoomButtons:()=>{const e=$("settings-btn");e.classList.remove("active")},toggleChat:()=>{const e=$("chat-btn");e.classList.toggle("active"),e.classList.remove("notify"),document.querySelector(".wrap-box-frame__inner").classList.toggle("show-chat"),$("box-chat").classList.toggle("active")},copyMeetingLink:()=>__awaiter(void 0,void 0,void 0,function*(){if(navigator.clipboard)navigator.clipboard.writeText(location.href).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)});else{let e=document.createElement("textarea");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=location.href,document.body.appendChild(e),e.focus(),e.select();try{var t=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+t)}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(e)}const e=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,background:"#292c3d",didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});e.fire({icon:"success",title:"Copied meeting link",color:"#fff"})}),toggleFullscreen:()=>{const e=$("btnFullscreen");if('<i class="icon-Maximize"></i>'==e.innerHTML){e.innerHTML='<i class="icon-Minimize"></i>';const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else{e.innerHTML='<i class="icon-Maximize"></i>';const i=document;i.exitFullscreen?i.exitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen?i.webkitExitFullscreen():i.msExitFullscreen&&i.msExitFullscreen()}},raiseHand:()=>{let e;e=state.raiseHand?(state.raiseHand=!1,":lowerhand:"):(state.raiseHand=!0,":raisehand:");var t=state.encoder.encode(e);null!==currentRoom&&void 0!==currentRoom&&currentRoom.localParticipant.publishData(t,DataPacket_Kind.RELIABLE),null!==currentRoom&&void 0!==currentRoom&&currentRoom.localParticipant&&raiseHand(null===currentRoom||void 0===currentRoom?void 0:currentRoom.localParticipant,!state.raiseHand);const i=document.querySelector("#raise-hand-button span");i&&(i.innerHTML=state.raiseHand?"Lower hand":"Raise hand")}}),btnSettings=$("settings-btn");function initRoom(){$("joinPage").remove();let e=document.querySelectorAll(".room-partition");0<e.length&&e.forEach(e=>{e.classList.remove("hide")}),setTimeout(()=>{readyRecieveNotify=!0},2e3),document.addEventListener("fullscreenchange",()=>{const e=$("btnFullscreen");document.fullscreenElement?e.innerHTML='<i class="icon-Minimize"></i>':e.innerHTML='<i class="icon-Maximize"></i>'}),document.addEventListener("keydown",e=>{122!==e.which&&"F11"!==e.key||(e.preventDefault(),appActions.toggleFullscreen())})}function notify(i,r=void 0){if(readyRecieveNotify){r=r?SOUNDS[r]:SOUNDS.notify;let e=new Audio(r),t=(e.volume=.2,e.play(),Swal.mixin({toast:!0,position:"bottom-left",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,background:"#292c3d",didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}));t.fire({title:i,color:"#fff"})}}function handleLayoutItems(){var e=document.querySelectorAll(".box-frame .box-video-call");1==e.length||4<=e.length?null!=(e=document.querySelector(".box-frame"))&&e.classList.add("full-frame"):null!=(e=document.querySelector(".box-frame"))&&e.classList.remove("full-frame")}function raiseHand(i,e=void 0){if(!e){let e=new Audio(SOUNDS.notify),t=(e.volume=.2,e.play(),Swal.mixin({toast:!0,position:"top-right",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,background:"#292c3d",didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}));t.fire({title:`<svg width="30" height="30"><use xlink:href="#RaiseHand"></use></svg>${i.name} raise hand`,color:"#fff"})}const t=$("raise-hand-"+i.identity);t&&(e?t.classList.add("hide"):t.classList.remove("hide"))}function handleData(e,t){if(t){e=state.decoder.decode(e);if(/^:raisehand:$/g.test(e))raiseHand(t);else if(/^:lowerhand:$/g.test(e))raiseHand(t,!0);else{const r=$("chat-btn"),n=(r.classList.contains("active")||r.classList.contains("notify")||(r.classList.add("notify"),notify(t.name+" <br> "+e,"message")),new Date);var i=getAvatar(t);const o=$("chat-message");t=`
  <div class="box-chat__inner wrap-mess">
    <div class="box-chat__inner head">
      <span class="nickname">${t.name}</span>
      <span class="time">${n.getHours()}:${n.getMinutes()}</span>
    </div>
    <div class="box-chat__inner content">
      <span class="avatar">
        <div class="box-info-user">
          <div class="box-avatar ${i?"":"default"}">
            <i class="icon-Profile"></i>
            ${i?"<img src="+i+">":""}
          </div>
        </div>
      </span>
      <div class="box-messenger">
        <div class="messenger">${e}</div>
      </div>
    </div>
  </div>
  `;o.insertAdjacentHTML("beforeend",t),o.parentElement&&(o.parentElement.scrollTop=o.scrollHeight)}}}function updateRoomInfo(){let e=1;if(null!==currentRoom&&void 0!==currentRoom&&currentRoom.participants&&(e=(null===currentRoom||void 0===currentRoom?void 0:currentRoom.participants.size)+1),$("participants-counter").innerHTML=e+" participants",null!==currentRoom&&void 0!==currentRoom&&currentRoom.name){let e=null===currentRoom||void 0===currentRoom?void 0:currentRoom.name;var t;!currentRoom.metadata||""==currentRoom.metadata||(t=JSON.parse(currentRoom.metadata)).real_name&&""!=t.real_name&&(e=t.real_name),$("room-name").innerHTML=e}}function participantConnected(t){appendLog("participant",t.name,"connected",t.metadata),updateRoomInfo(),t.isCameraEnabled||t.isMicrophoneEnabled||(appendLog("connected participant empty track",t.name),renderParticipant(t),currentRoom&&renderScreenShare(currentRoom)),t.on(ParticipantEvent.TrackMuted,e=>{appendLog("track was muted",e.trackSid,t.name),renderParticipant(t)}).on(ParticipantEvent.TrackUnmuted,e=>{appendLog("track was unmuted",e.trackSid,t.name),renderParticipant(t)}).on(ParticipantEvent.IsSpeakingChanged,()=>{renderParticipant(t)}).on(ParticipantEvent.ConnectionQualityChanged,()=>{renderParticipant(t)})}function participantDisconnected(e){appendLog("participant",e.sid,"disconnected"),updateRoomInfo(),renderParticipant(e,!0);let t=$("screenshare-wrapper-"+e.identity);t&&(t.remove(),handleLayouts())}function handleRoomDisconnect(e){currentRoom&&(appendLog("disconnected from room",{reason:e}),setButtonsForState(!1),renderParticipant(currentRoom.localParticipant,!0),currentRoom.participants.forEach(e=>{renderParticipant(e,!0)}),renderScreenShare(currentRoom),document.querySelector(".page-video-call").innerHTML='<div class="container"><p style="text-align: center">Leaving the meeting...</p></div>',currentRoom=void 0,window.currentRoom=void 0,window.location.reload())}function appendLog(...t){for(let e=0;e<arguments.length;e+=1)"object"==typeof t[e]?console.log("LOG: ",`${JSON&&JSON.stringify?JSON.stringify(t[e],void 0,2):t[e]} `):console.log("LOG: ",t[e]+" ")}function getAvatar(e){e=e.metadata?JSON.parse(e.metadata):"";let t;return t=e.avatar&&"null"!=e.avatar?e.avatar:t}function renderParticipant(i,e=!1){let r=$("participants-area"+(2==state.layout?"-2":""));if(r=2==state.layout&&r.hasAttribute("data-simplebar")?r.querySelector(".simplebar-content"):r){var{identity:n,name:o}=i;let t=$("participant-"+n);if(!t&&!e){(t=document.createElement("div")).id="participant-"+n,t.classList.add("box-video-call");let e=!1;currentRoom&&currentRoom.metadata&&""!=currentRoom.metadata&&((a=JSON.parse(currentRoom.metadata)).host&&""!=a.host&&n==a.host&&(e=!0));var a=getAvatar(i);t.innerHTML=`
    <div class="box-video-call__inner">
      <a href="javascript:void(0);" class="raise-hand hide" id="raise-hand-${n}">
        <svg width="25" height="25"><use xlink:href="#RaiseHand"></use></svg>
      </a>
      <div class="box-info-user" id="box-avatar-${n}">
        <div class="box-avatar ${a?"":"default"}">
          <i class="icon-Profile"></i>
          ${a?"<img src="+a+">":""}
        </div>
      </div>
      <div class="box-video hide" id="box-video-${n}">
        <video id="video-${n}"></video>
        <audio id="audio-${n}"></audio>
        <div class="info-bar hide">
          <div style="text-align: center;">
            <span id="codec-${n}" class="codec"></span>
            <span id="size-${n}" class="size"></span>
            <span id="bitrate-${n}" class="bitrate"></span>
          </div>
        </div>
      </div>
      <span class="name" id="name-${n}">${o}</span>
      <div class="group-button">
        ${e?'<span class="p-host">host</span>':""}
        <a href="javascript:void(0);" class="item ic-voice hide" id="mic-${n}">
          <i class="icon-Voiceoff"></i>
        </a>
      </div>
      <div class="box-voice hide" id="speaking-${n}">
        <div class="box-voice__inner"><div></div><div></div><div></div><div></div><div></div></div>
      </div>
    </div>
    `+(i instanceof RemoteParticipant?`<div class="volume-control hide">
      <input id="volume-${n}" type="range" min="0" max="1" step="0.1" value="1" orient="vertical" />
    </div>`:""),r.appendChild(t);const b=$("size-"+n),s=$("video-"+n);s.onresize=()=>{updateVideoSize(s,b)},handleLayoutItems(),i instanceof RemoteParticipant&&notify(o+" joined","join-room")}const s=$("video-"+n),c=$("audio-"+n);if(e)return null!==t&&void 0!==t&&t.remove(),s&&(s.srcObject=null,s.src=""),c&&(c.srcObject=null,c.src=""),handleLayoutItems(),void(i instanceof RemoteParticipant&&notify(o+" has left the meeting","left-room"));const l=$("name-"+n),d=$("mic-"+n),u=$("speaking-"+n),p=i.getTrack(Track.Source.Camera),h=i.getTrack(Track.Source.Microphone),f=$("participant-"+n);if(l.innerHTML=null!=o?o:"",i instanceof LocalParticipant&&(l.innerHTML+=" (you)"),i.isSpeaking?(u.classList.remove("hide"),null!==f&&void 0!==f&&f.classList.add("speaking"),t.offsetTop-r.offsetTop>=t.offsetHeight&&r.insertAdjacentElement("afterbegin",t)):(u.classList.add("hide"),null!==f&&void 0!==f&&f.classList.remove("speaking")),i instanceof RemoteParticipant){const v=$("volume-"+n);v.addEventListener("input",e=>{i.setVolume(Number.parseFloat(e.target.value))})}var a=p&&p.isSubscribed&&!p.isMuted;const m=$("box-avatar-"+n),g=$("box-video-"+n);if(a){if(m.classList.add("hide"),g.classList.remove("hide"),!(i instanceof LocalParticipant||null!=(e=null===p||void 0===p?void 0:p.videoTrack)&&e.attachedElements.includes(s))){const y=Date.now();s.onloadeddata=()=>{var e=Date.now()-y;let t=0;i.joinedAt&&i.joinedAt.getTime()<startTime&&(t=Date.now()-startTime),appendLog(`RemoteVideoTrack ${null===p||void 0===p?void 0:p.trackSid} (${s.videoWidth}x${s.videoHeight}) rendered in ${e}ms`,0<t?`, ${t}ms from start`:"")}}null!=(o=null===p||void 0===p?void 0:p.videoTrack)&&o.attach(s)}else g.classList.add("hide"),m.classList.remove("hide"),$("size-"+n).innerHTML="",null!==p&&void 0!==p&&p.videoTrack?null!=(a=p.videoTrack)&&a.detach(s):(s.src="",s.srcObject=null);h&&h.isSubscribed&&!h.isMuted?(i instanceof LocalParticipant?$("toggle-audio-button").innerHTML='<i class="icon-Voice"></i><span class="tooltiptext">Turn off Mic</span>':(c.onloadeddata=()=>{var e;i.joinedAt&&i.joinedAt.getTime()<startTime&&(e=Date.now()-startTime,appendLog(`RemoteAudioTrack ${null===h||void 0===h?void 0:h.trackSid} played ${e}ms from start`))},null!=(e=null===h||void 0===h?void 0:h.audioTrack)&&e.attach(c)),d.classList.add("hide")):(i instanceof LocalParticipant&&($("toggle-audio-button").innerHTML='<i class="icon-Voiceoff"></i><span class="tooltiptext">Turn on Mic</span>'),d.classList.remove("hide"))}}function renderScreenShare(e){const n=$("screenshare-area");if(e.state!==ConnectionState.Connected)return state.layout=1,void n.classList.add("hide");let i=[];var t=e.localParticipant.getTrack(Track.Source.ScreenShare);let o;t&&i.push({track:t,participant:e.localParticipant}),e.participants.forEach(e=>{var t=e.getTrack(Track.Source.ScreenShare),t=(null!=t&&t.isSubscribed&&i.push({track:t,participant:e}),e.getTrack(Track.Source.ScreenShareAudio));null!=t&&t.isSubscribed&&(o=t)}),0<i.length?(state.layout=2,n.classList.remove("hide"),i.forEach(e=>{var t;if(!$("screenshare-wrapper-"+e.participant.identity)){n.insertAdjacentHTML("beforeend",`
        <div class="box-video__outer" id="screenshare-wrapper-${e.participant.identity}">
          <div class="box-video__inner">
            <video poster="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" id="screenshare-video-${e.participant.identity}" autoplay playsinline${isMobile?" controls":""} class="hide-controls-timeline hide-play-button hide-volume-slider hide-mute-button"></video>
          </div>
          ${isMobile?"":`
          <a href="javascript:void(0);" class="ic-maximize" id="screenshare-fullscreen-${e.participant.identity}" style="opacity:0">
            <i class="icon-Maximize" style="background-color: rgba(28,31,45,.7);"></i>
          </a>
          `}
          <div class="user-share-tooltip">Screenshare from ${e.participant.name} <span id="screenshare-resolution-${e.participant.identity}"> </span></div>
        </div>
        `),handleLayouts();const i=$("screenshare-video-"+e.participant.identity);if(null!=(t=e.track.videoTrack)&&t.attach(i),o&&null!=(t=o.audioTrack)&&t.attach(i),i.onresize=()=>{updateVideoSize(i,$("screenshare-resolution-"+e.participant.identity))},i.addEventListener("click",e=>(e.preventDefault(),!1)),!isMobile){const r=$("screenshare-fullscreen-"+e.participant.identity);r.addEventListener("click",()=>{i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen&&i.msRequestFullscreen()})}}})):(state.layout=1,n.classList.add("hide"))}function handleLayouts(){const e=$("screenshare-area"),t=document.querySelector(".page-video-call"),i=$("layout-1"),r=$("layout-2");if(0<(null===e||void 0===e?void 0:e.childElementCount)?(state.layout=2,t.classList.add("list-frame"),i.classList.add("hide"),r.classList.remove("hide"),2<=(null===e||void 0===e?void 0:e.childElementCount)?e.classList.add("multi-screen"):e.classList.remove("multi-screen")):(state.layout=1,t.classList.remove("list-frame"),r.classList.add("hide"),i.classList.remove("hide")),2==state.layout){var n=$("participants-area");if(n&&0<(null==n?void 0:n.childElementCount)){let e=$("participants-area-2");e&&(e.hasAttribute("data-simplebar")?null!=(o=null===e||void 0===e?void 0:e.querySelector(".simplebar-content"))&&o.append(...n.childNodes):(e.append(...n.childNodes),isMobile?null!=(o=r.querySelector(".scrollbar-outer"))&&o.classList.remove("scrollbar-outer"):new SimpleBar(e)))}var n=$("box-chat");"layout-1"==(null==(o=null==n?void 0:n.parentElement)?void 0:o.id)&&r.append(n)}else{n=isMobile?$("participants-area-2"):null==(o=$("participants-area-2"))?void 0:o.querySelector(".simplebar-content");if(n&&0<(null==n?void 0:n.childElementCount)){let e=$("participants-area");e&&(e.append(...n.childNodes),handleLayoutItems())}var o=$("box-chat");"layout-2"==(null==(n=null==o?void 0:o.parentElement)?void 0:n.id)&&i.append(o)}}function renderBitrate(){var i;if(currentRoom&&currentRoom.state===ConnectionState.Connected){const e=[...currentRoom.participants.values()];e.push(currentRoom.localParticipant);for(const r of e){const n=$("bitrate-"+r.identity);let e=0;for(const o of r.tracks.values())if(o.track&&(e+=o.track.currentBitrate),o.source===Track.Source.Camera&&o.videoTrack instanceof RemoteVideoTrack){const a=$("codec-"+r.identity);a.innerHTML=null!=(i=o.videoTrack.getDecoderImplementation())?i:""}let t="";0<e&&(t=Math.round(e/1024).toLocaleString()+" kbps"),n&&(n.innerHTML=t)}}}function updateVideoSize(e,t){e&&t&&(t.innerHTML=`(${e.videoWidth}x${e.videoHeight})`)}function setButtonState(e,t,i,r=void 0){const n=$(e);n&&(void 0!==r&&(n.disabled=r),n.innerHTML=t,i?n.classList.add("active"):n.classList.remove("active"))}function setButtonDisabled(e,t){const i=$(e);i.disabled=t}function setButtonsForState(e){var t=["toggle-video-button","toggle-audio-button","share-screen-button","disconnect-ws-button","disconnect-room-button","flip-video-button","send-button"],i=["connect-button"];const r=e?t:i,n=e?i:t;r.forEach(e=>{return null==(e=$(e))?void 0:e.removeAttribute("disabled")}),n.forEach(e=>{return null==(e=$(e))?void 0:e.setAttribute("disabled","true")})}btnSettings.addEventListener("click",e=>{e.target!=btnSettings.querySelector(".icon-Setting")&&e.target!=btnSettings||btnSettings.classList.toggle("active")}),window.appActions=appActions;const elementMapping={"video-input":"videoinput","audio-input":"audioinput","audio-output":"audiooutput"};function handleDevicesChanged(){return __awaiter(this,void 0,void 0,function*(){Promise.all(Object.keys(elementMapping).map(i=>__awaiter(this,void 0,void 0,function*(){var e,t=elementMapping[i];t&&(e=yield Room.getLocalDevices(t),console.log(i),populateSelect(t,$(i),e,state.defaultDevices.get(t)))})))})}function populateSelect(e,t,i,r){t.innerHTML="";const n=document.createElement("option");"audioinput"===e?n.text="Audio Input (default)":"videoinput"===e?n.text="Video Input (default)":"audiooutput"===e&&(n.text="Audio Output (default)"),t.appendChild(n);for(const o of i){const a=document.createElement("option");a.text=o.label,a.value=o.deviceId,o.deviceId===r&&(a.selected=!0),t.appendChild(a)}}function updateButtonsForPublishState(){if(currentRoom){var e=currentRoom.localParticipant;setButtonState("toggle-video-button",e.isCameraEnabled?'<i class="icon-Video"></i><span class="tooltiptext">Turn off Camera</span>':'<i class="icon-Videooff"></i><span class="tooltiptext">Turn on Camera</span>',!1),setButtonState("toggle-audio-button",e.isMicrophoneEnabled?'<i class="icon-Voice"></i><span class="tooltiptext">Turn off Mic</span>':'<i class="icon-Voiceoff"></i><span class="tooltiptext">Turn on Mic</span>',!1);const t=$("share-screen-button");e.isScreenShareEnabled?(t.classList.add("active"),t.innerHTML='<i class="icon-sharescreen"></i><span class="tooltiptext">Stop presenting</span>'):(t.classList.remove("active"),t.innerHTML='<i class="icon-sharescreen"></i><span class="tooltiptext">Present now</span>')}}function acquireDeviceList(i){var r;return __awaiter(this,void 0,void 0,function*(){var e,t=null==(r=$(i))?void 0:r.childElementCount;t&&t<=1&&((t=elementMapping[i])&&(e=yield Room.getLocalDevices(t),console.log(i),populateSelect(t,$(i),e,state.defaultDevices.get(t))))})}let timerInterval;function startCountTimer(){timerInterval&&clearInterval(timerInterval);const a=$("room-duration");var e=parseInt(null!=(e=a.getAttribute("data-start"))?e:"0");let s=0;0<e&&(s=Math.floor((new Date).getTime()/1e3)-e)<0&&(s=0),timerInterval=setInterval(()=>{++s;var e=Math.floor(s/3600),t=Math.floor((s-3600*e)/60),i=s-(3600*e+60*t);let r,n,o;r=e<10?"0"+e:e,n=t<10?"0"+t:t,o=i<10?"0"+i:i,a.innerHTML=r+":"+n+":"+o},1e3)}
